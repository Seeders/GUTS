{
  "name": "Building Requirements Test",
  "description": "Tests that building requirements are enforced. Attempts to train an archer without Fletchers Hall - should fail. Then builds Fletchers Hall and tries again - should succeed.",
  "seed": 12345,
  "level": "level_1",
  "startingGold": 500,
  "expectedOutcome": "BUILD_UNIT for archer should fail until Fletchers Hall is built",
  "instructions": [
    {
      "type": "CALL_SERVICE",
      "service": "setLocalGame",
      "args": [true, 0],
      "trigger": "immediate",
      "comment": "Enable local game mode"
    },

    {
      "type": "BUILD_UNIT",
      "team": "left",
      "unitType": "1_d_archer",
      "trigger": "immediate",
      "comment": "EXPECTED FAILURE: Try to train archer without Fletchers Hall"
    },

    {
      "type": "BUILD_BUILDING",
      "team": "left",
      "buildingType": "fletchersHall",
      "trigger": "immediate",
      "comment": "Now build the required Fletchers Hall"
    },

    {
      "type": "BUILD_UNIT",
      "team": "left",
      "unitType": "1_d_archer",
      "trigger": "immediate",
      "comment": "EXPECTED SUCCESS: Now archer training should work"
    },

    {
      "type": "END_SIMULATION",
      "trigger": "immediate",
      "comment": "End the test"
    }
  ]
}
