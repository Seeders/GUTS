/*!
 * GUTS Game Engine - Client Bundle
 * Project: HelloWorld
 * Built: 2026-01-10T20:48:55.110Z
 * Mode: development
 */

// Setup globals for browser environment BEFORE any imports execute
if (typeof window !== 'undefined') {
    if (!window.GUTS) window.GUTS = {};
}

/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./build/.temp/HelloWorld/client-entry.js":
/*!************************************************!*\
  !*** ./build/.temp/HelloWorld/client-entry.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* unused harmony exports Libraries, Systems */\n/* harmony import */ var C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/BaseEngine.js */ \"./engine/BaseEngine.js\");\n/* harmony import */ var C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_projects_GUTS_engine_Engine_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./engine/Engine.js */ \"./engine/Engine.js\");\n/* harmony import */ var C_projects_GUTS_global_collections_scripts_libraries_js_BaseECSGame_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./global/collections/scripts/libraries/js/BaseECSGame.js */ \"./global/collections/scripts/libraries/js/BaseECSGame.js\");\n/* harmony import */ var C_projects_GUTS_global_collections_scripts_libraries_js_SceneManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./global/collections/scripts/libraries/js/SceneManager.js */ \"./global/collections/scripts/libraries/js/SceneManager.js\");\n/* harmony import */ var C_projects_GUTS_global_collections_scripts_libraries_js_BaseSystem_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./global/collections/scripts/libraries/js/BaseSystem.js */ \"./global/collections/scripts/libraries/js/BaseSystem.js\");\n/* harmony import */ var C_projects_GUTS_global_collections_scripts_libraries_js_BaseLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./global/collections/scripts/libraries/js/BaseLoader.js */ \"./global/collections/scripts/libraries/js/BaseLoader.js\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_js_HelloSystem_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./projects/HelloWorld/collections/scripts/systems/js/HelloSystem.js */ \"./projects/HelloWorld/collections/scripts/systems/js/HelloSystem.js\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_data_scenes_hello_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./projects/HelloWorld/collections/data/scenes/hello.json */ \"./projects/HelloWorld/collections/data/scenes/hello.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_data_HelloSystem_json__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./projects/HelloWorld/collections/scripts/systems/data/HelloSystem.json */ \"./projects/HelloWorld/collections/scripts/systems/data/HelloSystem.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_configs_game_json__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/configs/game.json */ \"./projects/HelloWorld/collections/settings/configs/game.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_configs_state_json__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/configs/state.json */ \"./projects/HelloWorld/collections/settings/configs/state.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_data_json__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/data.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/data.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_editor_json__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/editor.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/editor.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_libraries_json__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/libraries.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/libraries.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_scripts_json__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/scripts.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/scripts.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_settings_json__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/settings.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/settings.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_ui_json__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeCategories/ui.json */ \"./projects/HelloWorld/collections/settings/objectTypeCategories/ui.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_configs_json__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/configs.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/configs.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_editorModules_json__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/editorModules.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/editorModules.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_interfaces_json__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/interfaces.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/interfaces.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_libraries_json__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/libraries.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/libraries.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_modals_json__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/modals.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/modals.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_objectTypeCategories_json__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeCategories.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeCategories.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_objectTypeDefinitions_json__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeDefinitions.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeDefinitions.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_scenes_json__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/scenes.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/scenes.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_systems_json__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/systems.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/systems.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_tests_json__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/tests.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/tests.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_themes_json__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./projects/HelloWorld/collections/settings/objectTypeDefinitions/themes.json */ \"./projects/HelloWorld/collections/settings/objectTypeDefinitions/themes.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_data_main_json__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./projects/HelloWorld/collections/ui/interfaces/data/main.json */ \"./projects/HelloWorld/collections/ui/interfaces/data/main.json\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_html_main_html__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./projects/HelloWorld/collections/ui/interfaces/html/main.html */ \"./projects/HelloWorld/collections/ui/interfaces/html/main.html\");\n/* harmony import */ var C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_css_main_css__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./projects/HelloWorld/collections/ui/interfaces/css/main.css */ \"./projects/HelloWorld/collections/ui/interfaces/css/main.css\");\n/**\n * GUTS Game Client Bundle\n * Generated: 2026-01-10T20:48:55.048Z\n * Project: HelloWorld\n */\n\n// ========== ENGINE ==========\n\n\n\n// ========== LIBRARIES ==========\n\n\n\n\nconst Libraries = {\n  BaseECSGame: C_projects_GUTS_global_collections_scripts_libraries_js_BaseECSGame_js__WEBPACK_IMPORTED_MODULE_2__.BaseECSGame || C_projects_GUTS_global_collections_scripts_libraries_js_BaseECSGame_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || C_projects_GUTS_global_collections_scripts_libraries_js_BaseECSGame_js__WEBPACK_IMPORTED_MODULE_2__,\n  SceneManager: C_projects_GUTS_global_collections_scripts_libraries_js_SceneManager_js__WEBPACK_IMPORTED_MODULE_3__.SceneManager || C_projects_GUTS_global_collections_scripts_libraries_js_SceneManager_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"] || C_projects_GUTS_global_collections_scripts_libraries_js_SceneManager_js__WEBPACK_IMPORTED_MODULE_3__,\n  BaseSystem: C_projects_GUTS_global_collections_scripts_libraries_js_BaseSystem_js__WEBPACK_IMPORTED_MODULE_4__.BaseSystem || C_projects_GUTS_global_collections_scripts_libraries_js_BaseSystem_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"] || C_projects_GUTS_global_collections_scripts_libraries_js_BaseSystem_js__WEBPACK_IMPORTED_MODULE_4__,\n  BaseLoader: C_projects_GUTS_global_collections_scripts_libraries_js_BaseLoader_js__WEBPACK_IMPORTED_MODULE_5__.BaseLoader || C_projects_GUTS_global_collections_scripts_libraries_js_BaseLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"] || C_projects_GUTS_global_collections_scripts_libraries_js_BaseLoader_js__WEBPACK_IMPORTED_MODULE_5__\n};\n\n// ========== SYSTEMS ==========\n\nconst Systems = {\n  HelloSystem: C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_js_HelloSystem_js__WEBPACK_IMPORTED_MODULE_6__.HelloSystem || C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_js_HelloSystem_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"] || C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_js_HelloSystem_js__WEBPACK_IMPORTED_MODULE_6__\n};\n\n// ========== DATA COLLECTIONS ==========\n// scenes data\n\nconst scenesData = {\n  \"hello\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_data_scenes_hello_json__WEBPACK_IMPORTED_MODULE_7__,\n    id: \"hello\",\n    collection: \"scenes\"\n  }\n};\n\n// systems data\n\nconst systemsData = {\n  \"HelloSystem\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_scripts_systems_data_HelloSystem_json__WEBPACK_IMPORTED_MODULE_8__,\n    id: \"HelloSystem\",\n    collection: \"systems\"\n  }\n};\n\n// configs data\n\n\nconst configsData = {\n  \"game\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_configs_game_json__WEBPACK_IMPORTED_MODULE_9__,\n    id: \"game\",\n    collection: \"configs\"\n  },\n  \"state\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_configs_state_json__WEBPACK_IMPORTED_MODULE_10__,\n    id: \"state\",\n    collection: \"configs\"\n  }\n};\n\n// objectTypeCategories data\n\n\n\n\n\n\nconst objectTypeCategoriesData = {\n  \"data\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_data_json__WEBPACK_IMPORTED_MODULE_11__,\n    id: \"data\",\n    collection: \"objectTypeCategories\"\n  },\n  \"editor\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_editor_json__WEBPACK_IMPORTED_MODULE_12__,\n    id: \"editor\",\n    collection: \"objectTypeCategories\"\n  },\n  \"libraries\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_libraries_json__WEBPACK_IMPORTED_MODULE_13__,\n    id: \"libraries\",\n    collection: \"objectTypeCategories\"\n  },\n  \"scripts\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_scripts_json__WEBPACK_IMPORTED_MODULE_14__,\n    id: \"scripts\",\n    collection: \"objectTypeCategories\"\n  },\n  \"settings\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_settings_json__WEBPACK_IMPORTED_MODULE_15__,\n    id: \"settings\",\n    collection: \"objectTypeCategories\"\n  },\n  \"ui\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeCategories_ui_json__WEBPACK_IMPORTED_MODULE_16__,\n    id: \"ui\",\n    collection: \"objectTypeCategories\"\n  }\n};\n\n// objectTypeDefinitions data\n\n\n\n\n\n\n\n\n\n\n\nconst objectTypeDefinitionsData = {\n  \"configs\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_configs_json__WEBPACK_IMPORTED_MODULE_17__,\n    id: \"configs\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"editorModules\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_editorModules_json__WEBPACK_IMPORTED_MODULE_18__,\n    id: \"editorModules\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"interfaces\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_interfaces_json__WEBPACK_IMPORTED_MODULE_19__,\n    id: \"interfaces\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"libraries\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_libraries_json__WEBPACK_IMPORTED_MODULE_20__,\n    id: \"libraries\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"modals\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_modals_json__WEBPACK_IMPORTED_MODULE_21__,\n    id: \"modals\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"objectTypeCategories\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_objectTypeCategories_json__WEBPACK_IMPORTED_MODULE_22__,\n    id: \"objectTypeCategories\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"objectTypeDefinitions\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_objectTypeDefinitions_json__WEBPACK_IMPORTED_MODULE_23__,\n    id: \"objectTypeDefinitions\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"scenes\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_scenes_json__WEBPACK_IMPORTED_MODULE_24__,\n    id: \"scenes\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"systems\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_systems_json__WEBPACK_IMPORTED_MODULE_25__,\n    id: \"systems\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"tests\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_tests_json__WEBPACK_IMPORTED_MODULE_26__,\n    id: \"tests\",\n    collection: \"objectTypeDefinitions\"\n  },\n  \"themes\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_settings_objectTypeDefinitions_themes_json__WEBPACK_IMPORTED_MODULE_27__,\n    id: \"themes\",\n    collection: \"objectTypeDefinitions\"\n  }\n};\n\n// interfaces data\n\n\n\nconst interfacesData = {\n  \"main\": {\n    ...C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_data_main_json__WEBPACK_IMPORTED_MODULE_28__,\n    id: \"main\",\n    collection: \"interfaces\",\n    html: C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_html_main_html__WEBPACK_IMPORTED_MODULE_29__,\n    css: C_projects_GUTS_projects_HelloWorld_collections_ui_interfaces_css_main_css__WEBPACK_IMPORTED_MODULE_30__\n  }\n};\n\n// ========== COMBINED COLLECTIONS ==========\nconst DataCollections = {\n  scenes: scenesData,\n  systems: systemsData,\n  configs: configsData,\n  objectTypeCategories: objectTypeCategoriesData,\n  objectTypeDefinitions: objectTypeDefinitionsData,\n  interfaces: interfacesData\n};\n\n// ========== GLOBAL SETUP ==========\n\n// Setup window.GUTS for backwards compatibility\nif (!window.GUTS) {\n  window.GUTS = {};\n}\n\n// Register all libraries in window.GUTS\nObject.assign(window.GUTS, Libraries);\n\n// Library windowContext metadata (generated at build time)\nconst _libraryWindowContexts = {};\n\n// Setup window.THREE if it exists in libraries\nif (Libraries.THREE) {\n  window.THREE = Libraries.THREE;\n\n  // Add libraries with windowContext=\"THREE\" to window.THREE namespace\n  Object.keys(Libraries).forEach(key => {\n    const windowContext = _libraryWindowContexts[key];\n    if (windowContext === 'THREE' && key !== 'THREE') {\n      const addon = Libraries[key];\n      window.THREE[key] = addon;\n      // Also flatten exported functions/classes for direct access\n      if (typeof addon === 'object' && addon !== null) {\n        Object.assign(window.THREE, addon);\n      }\n    }\n  });\n}\nObject.assign(window.GUTS, {\n  systems: Systems\n});\n\n// Assign all individual classes directly to window.GUTS for direct access\nObject.assign(window.GUTS, Systems);\n\n// Setup COMPILED_GAME namespace\nwindow.COMPILED_GAME = {\n  ready: Promise.resolve(),\n  initialized: false,\n  libraryClasses: Libraries,\n  systems: Systems,\n  collections: DataCollections,\n  init: function (gutsEngine) {\n    if (this.initialized) return;\n    this.initialized = true;\n    window.GUTS.engine = gutsEngine;\n    console.log(\"âœ… COMPILED_GAME initialized\");\n  }\n};\n\n// ========== EXPORTS ==========\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (window.COMPILED_GAME);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9idWlsZC8udGVtcC9IZWxsb1dvcmxkL2NsaWVudC1lbnRyeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytEO0FBQ1I7O0FBRXZEO0FBQzJHO0FBQ0U7QUFDSjtBQUNBO0FBRXpHLE1BQU1NLFNBQVMsR0FBRztFQUNoQkMsV0FBVyxFQUFHTCwrR0FBMkIsSUFBSUEsOEdBQXVCLElBQUlBLG1HQUFnQjtFQUN4Rk8sWUFBWSxFQUFHTixpSEFBNkIsSUFBSUEsK0dBQXdCLElBQUlBLG9HQUFpQjtFQUM3Rk8sVUFBVSxFQUFHTiw2R0FBeUIsSUFBSUEsNkdBQXNCLElBQUlBLGtHQUFlO0VBQ25GTyxVQUFVLEVBQUdOLDZHQUF5QixJQUFJQSw2R0FBc0IsSUFBSUEsa0dBQWNBO0FBQ3BGLENBQUM7O0FBRUQ7QUFDc0g7QUFFdEgsTUFBTVEsT0FBTyxHQUFHO0VBQ2RDLFdBQVcsRUFBR0YsMEhBQTJCLElBQUlBLHlIQUF1QixJQUFJQSw4R0FBZUE7QUFDekYsQ0FBQzs7QUFFRDtBQUNBO0FBQ3dHO0FBQ3hHLE1BQU1JLFVBQVUsR0FBRztFQUNqQixPQUFPLEVBQUU7SUFDUCxHQUFHRCxtR0FBaUI7SUFDcEJFLEVBQUUsRUFBRSxPQUFPO0lBQ1hDLFVBQVUsRUFBRTtFQUNkO0FBQ0YsQ0FBQzs7QUFFRDtBQUM4SDtBQUM5SCxNQUFNRSxXQUFXLEdBQUc7RUFDbEIsYUFBYSxFQUFFO0lBQ2IsR0FBR0Qsa0hBQXdCO0lBQzNCRixFQUFFLEVBQUUsYUFBYTtJQUNqQkMsVUFBVSxFQUFFO0VBQ2Q7QUFDRixDQUFDOztBQUVEO0FBQzRHO0FBQ0U7QUFDOUcsTUFBTUssV0FBVyxHQUFHO0VBQ2xCLE1BQU0sRUFBRTtJQUNOLEdBQUdGLHVHQUFpQjtJQUNwQkosRUFBRSxFQUFFLE1BQU07SUFDVkMsVUFBVSxFQUFFO0VBQ2QsQ0FBQztFQUNELE9BQU8sRUFBRTtJQUNQ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QztJQUNGO0VBQ0YsQ0FBQyxDQUFDO0FBQ0o7QUFFQVIsTUFBTSxDQUFDQyxNQUFNLENBQUNILE1BQU0sQ0FBQ0MsSUFBSSxFQUFFO0VBQ3pCTixPQUFPLEVBQUV0QztBQUNYLENBQUMsQ0FBQzs7QUFFRjtBQUNBNkMsTUFBTSxDQUFDQyxNQUFNLENBQUNILE1BQU0sQ0FBQ0MsSUFBSSxFQUFFNUMsT0FBTyxDQUFDOztBQUVuQztBQUNBMkMsTUFBTSxDQUFDVyxhQUFhLEdBQUc7RUFDckJDLEtBQUssRUFBRUMsT0FBTyxDQUFDQyxPQUFPLENBQUMsQ0FBQztFQUN4QkMsV0FBVyxFQUFFLEtBQUs7RUFDbEJDLGNBQWMsRUFBRWxFLFNBQVM7RUFDekI2QyxPQUFPLEVBQUV0QyxPQUFPO0VBQ2hCNEQsV0FBVyxFQUFFeEIsZUFBZTtFQUM1QnlCLElBQUksRUFBRSxTQUFBQSxDQUFTQyxVQUFVLEVBQUU7SUFDekIsSUFBSSxJQUFJLENBQUNKLFdBQVcsRUFBRTtJQUN0QixJQUFJLENBQUNBLFdBQVcsR0FBRyxJQUFJO0lBQ3ZCZixNQUFNLENBQUNDLElBQUksQ0FBQ21CLE1BQU0sR0FBR0QsVUFBVTtJQUMvQkUsT0FBTyxDQUFDQyxHQUFHLENBQUMsNkJBQTZCLENBQUM7RUFDNUM7QUFDRixDQUFDOztBQUVEO0FBS1M7QUFHVCxpRUFBZXRCLE1BQU0sQ0FBQ1csYUFBYSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rvd2VyZGVmZW5zZS8uL2J1aWxkLy50ZW1wL0hlbGxvV29ybGQvY2xpZW50LWVudHJ5LmpzPzZlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHVVRTIEdhbWUgQ2xpZW50IEJ1bmRsZVxuICogR2VuZXJhdGVkOiAyMDI2LTAxLTEwVDIwOjQ4OjU1LjA0OFpcbiAqIFByb2plY3Q6IEhlbGxvV29ybGRcbiAqL1xuXG4vLyA9PT09PT09PT09IEVOR0lORSA9PT09PT09PT09XG5pbXBvcnQgQmFzZUVuZ2luZSBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL2VuZ2luZS9CYXNlRW5naW5lLmpzJztcbmltcG9ydCBFbmdpbmUgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9lbmdpbmUvRW5naW5lLmpzJztcblxuLy8gPT09PT09PT09PSBMSUJSQVJJRVMgPT09PT09PT09PVxuaW1wb3J0ICogYXMgbGliX0Jhc2VFQ1NHYW1lIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvZ2xvYmFsL2NvbGxlY3Rpb25zL3NjcmlwdHMvbGlicmFyaWVzL2pzL0Jhc2VFQ1NHYW1lLmpzJztcbmltcG9ydCAqIGFzIGxpYl9TY2VuZU1hbmFnZXIgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvU2NlbmVNYW5hZ2VyLmpzJztcbmltcG9ydCAqIGFzIGxpYl9CYXNlU3lzdGVtIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvZ2xvYmFsL2NvbGxlY3Rpb25zL3NjcmlwdHMvbGlicmFyaWVzL2pzL0Jhc2VTeXN0ZW0uanMnO1xuaW1wb3J0ICogYXMgbGliX0Jhc2VMb2FkZXIgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZUxvYWRlci5qcyc7XG5cbmNvbnN0IExpYnJhcmllcyA9IHtcbiAgQmFzZUVDU0dhbWU6IChsaWJfQmFzZUVDU0dhbWUuQmFzZUVDU0dhbWUgfHwgbGliX0Jhc2VFQ1NHYW1lLmRlZmF1bHQgfHwgbGliX0Jhc2VFQ1NHYW1lKSxcbiAgU2NlbmVNYW5hZ2VyOiAobGliX1NjZW5lTWFuYWdlci5TY2VuZU1hbmFnZXIgfHwgbGliX1NjZW5lTWFuYWdlci5kZWZhdWx0IHx8IGxpYl9TY2VuZU1hbmFnZXIpLFxuICBCYXNlU3lzdGVtOiAobGliX0Jhc2VTeXN0ZW0uQmFzZVN5c3RlbSB8fCBsaWJfQmFzZVN5c3RlbS5kZWZhdWx0IHx8IGxpYl9CYXNlU3lzdGVtKSxcbiAgQmFzZUxvYWRlcjogKGxpYl9CYXNlTG9hZGVyLkJhc2VMb2FkZXIgfHwgbGliX0Jhc2VMb2FkZXIuZGVmYXVsdCB8fCBsaWJfQmFzZUxvYWRlcilcbn07XG5cbi8vID09PT09PT09PT0gU1lTVEVNUyA9PT09PT09PT09XG5pbXBvcnQgKiBhcyBzeXNfSGVsbG9TeXN0ZW0gZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NjcmlwdHMvc3lzdGVtcy9qcy9IZWxsb1N5c3RlbS5qcyc7XG5cbmNvbnN0IFN5c3RlbXMgPSB7XG4gIEhlbGxvU3lzdGVtOiAoc3lzX0hlbGxvU3lzdGVtLkhlbGxvU3lzdGVtIHx8IHN5c19IZWxsb1N5c3RlbS5kZWZhdWx0IHx8IHN5c19IZWxsb1N5c3RlbSlcbn07XG5cbi8vID09PT09PT09PT0gREFUQSBDT0xMRUNUSU9OUyA9PT09PT09PT09XG4vLyBzY2VuZXMgZGF0YVxuaW1wb3J0IHNjZW5lc19qc29uX2hlbGxvIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9kYXRhL3NjZW5lcy9oZWxsby5qc29uJztcbmNvbnN0IHNjZW5lc0RhdGEgPSB7XG4gIFwiaGVsbG9cIjoge1xuICAgIC4uLnNjZW5lc19qc29uX2hlbGxvLFxuICAgIGlkOiBcImhlbGxvXCIsXG4gICAgY29sbGVjdGlvbjogXCJzY2VuZXNcIlxuICB9XG59O1xuXG4vLyBzeXN0ZW1zIGRhdGFcbmltcG9ydCBzeXN0ZW1zX2pzb25fSGVsbG9TeXN0ZW0gZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NjcmlwdHMvc3lzdGVtcy9kYXRhL0hlbGxvU3lzdGVtLmpzb24nO1xuY29uc3Qgc3lzdGVtc0RhdGEgPSB7XG4gIFwiSGVsbG9TeXN0ZW1cIjoge1xuICAgIC4uLnN5c3RlbXNfanNvbl9IZWxsb1N5c3RlbSxcbiAgICBpZDogXCJIZWxsb1N5c3RlbVwiLFxuICAgIGNvbGxlY3Rpb246IFwic3lzdGVtc1wiXG4gIH1cbn07XG5cbi8vIGNvbmZpZ3MgZGF0YVxuaW1wb3J0IGNvbmZpZ3NfanNvbl9nYW1lIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9jb25maWdzL2dhbWUuanNvbic7XG5pbXBvcnQgY29uZmlnc19qc29uX3N0YXRlIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9jb25maWdzL3N0YXRlLmpzb24nO1xuY29uc3QgY29uZmlnc0RhdGEgPSB7XG4gIFwiZ2FtZVwiOiB7XG4gICAgLi4uY29uZmlnc19qc29uX2dhbWUsXG4gICAgaWQ6IFwiZ2FtZVwiLFxuICAgIGNvbGxlY3Rpb246IFwiY29uZmlnc1wiXG4gIH0sXG4gIFwic3RhdGVcIjoge1xuICAgIC4uLmNvbmZpZ3NfanNvbl9zdGF0ZSxcbiAgICBpZDogXCJzdGF0ZVwiLFxuICAgIGNvbGxlY3Rpb246IFwiY29uZmlnc1wiXG4gIH1cbn07XG5cbi8vIG9iamVjdFR5cGVDYXRlZ29yaWVzIGRhdGFcbmltcG9ydCBvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2RhdGEgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NldHRpbmdzL29iamVjdFR5cGVDYXRlZ29yaWVzL2RhdGEuanNvbic7XG5pbXBvcnQgb2JqZWN0VHlwZUNhdGVnb3JpZXNfanNvbl9lZGl0b3IgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NldHRpbmdzL29iamVjdFR5cGVDYXRlZ29yaWVzL2VkaXRvci5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2xpYnJhcmllcyBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL3Byb2plY3RzL0hlbGxvV29ybGQvY29sbGVjdGlvbnMvc2V0dGluZ3Mvb2JqZWN0VHlwZUNhdGVnb3JpZXMvbGlicmFyaWVzLmpzb24nO1xuaW1wb3J0IG9iamVjdFR5cGVDYXRlZ29yaWVzX2pzb25fc2NyaXB0cyBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL3Byb2plY3RzL0hlbGxvV29ybGQvY29sbGVjdGlvbnMvc2V0dGluZ3Mvb2JqZWN0VHlwZUNhdGVnb3JpZXMvc2NyaXB0cy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX3NldHRpbmdzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlQ2F0ZWdvcmllcy9zZXR0aW5ncy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX3VpIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlQ2F0ZWdvcmllcy91aS5qc29uJztcbmNvbnN0IG9iamVjdFR5cGVDYXRlZ29yaWVzRGF0YSA9IHtcbiAgXCJkYXRhXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2RhdGEsXG4gICAgaWQ6IFwiZGF0YVwiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZUNhdGVnb3JpZXNcIlxuICB9LFxuICBcImVkaXRvclwiOiB7XG4gICAgLi4ub2JqZWN0VHlwZUNhdGVnb3JpZXNfanNvbl9lZGl0b3IsXG4gICAgaWQ6IFwiZWRpdG9yXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlQ2F0ZWdvcmllc1wiXG4gIH0sXG4gIFwibGlicmFyaWVzXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2xpYnJhcmllcyxcbiAgICBpZDogXCJsaWJyYXJpZXNcIixcbiAgICBjb2xsZWN0aW9uOiBcIm9iamVjdFR5cGVDYXRlZ29yaWVzXCJcbiAgfSxcbiAgXCJzY3JpcHRzXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX3NjcmlwdHMsXG4gICAgaWQ6IFwic2NyaXB0c1wiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZUNhdGVnb3JpZXNcIlxuICB9LFxuICBcInNldHRpbmdzXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX3NldHRpbmdzLFxuICAgIGlkOiBcInNldHRpbmdzXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlQ2F0ZWdvcmllc1wiXG4gIH0sXG4gIFwidWlcIjoge1xuICAgIC4uLm9iamVjdFR5cGVDYXRlZ29yaWVzX2pzb25fdWksXG4gICAgaWQ6IFwidWlcIixcbiAgICBjb2xsZWN0aW9uOiBcIm9iamVjdFR5cGVDYXRlZ29yaWVzXCJcbiAgfVxufTtcblxuLy8gb2JqZWN0VHlwZURlZmluaXRpb25zIGRhdGFcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9jb25maWdzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvY29uZmlncy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9lZGl0b3JNb2R1bGVzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvZWRpdG9yTW9kdWxlcy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9pbnRlcmZhY2VzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvaW50ZXJmYWNlcy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9saWJyYXJpZXMgZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NldHRpbmdzL29iamVjdFR5cGVEZWZpbml0aW9ucy9saWJyYXJpZXMuanNvbic7XG5pbXBvcnQgb2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fbW9kYWxzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvbW9kYWxzLmpzb24nO1xuaW1wb3J0IG9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX29iamVjdFR5cGVDYXRlZ29yaWVzIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvb2JqZWN0VHlwZUNhdGVnb3JpZXMuanNvbic7XG5pbXBvcnQgb2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fb2JqZWN0VHlwZURlZmluaXRpb25zIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvb2JqZWN0VHlwZURlZmluaXRpb25zLmpzb24nO1xuaW1wb3J0IG9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3NjZW5lcyBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL3Byb2plY3RzL0hlbGxvV29ybGQvY29sbGVjdGlvbnMvc2V0dGluZ3Mvb2JqZWN0VHlwZURlZmluaXRpb25zL3NjZW5lcy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9zeXN0ZW1zIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zZXR0aW5ncy9vYmplY3RUeXBlRGVmaW5pdGlvbnMvc3lzdGVtcy5qc29uJztcbmltcG9ydCBvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl90ZXN0cyBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL3Byb2plY3RzL0hlbGxvV29ybGQvY29sbGVjdGlvbnMvc2V0dGluZ3Mvb2JqZWN0VHlwZURlZmluaXRpb25zL3Rlc3RzLmpzb24nO1xuaW1wb3J0IG9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3RoZW1lcyBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL3Byb2plY3RzL0hlbGxvV29ybGQvY29sbGVjdGlvbnMvc2V0dGluZ3Mvb2JqZWN0VHlwZURlZmluaXRpb25zL3RoZW1lcy5qc29uJztcbmNvbnN0IG9iamVjdFR5cGVEZWZpbml0aW9uc0RhdGEgPSB7XG4gIFwiY29uZmlnc1wiOiB7XG4gICAgLi4ub2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fY29uZmlncyxcbiAgICBpZDogXCJjb25maWdzXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlRGVmaW5pdGlvbnNcIlxuICB9LFxuICBcImVkaXRvck1vZHVsZXNcIjoge1xuICAgIC4uLm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX2VkaXRvck1vZHVsZXMsXG4gICAgaWQ6IFwiZWRpdG9yTW9kdWxlc1wiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZURlZmluaXRpb25zXCJcbiAgfSxcbiAgXCJpbnRlcmZhY2VzXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9pbnRlcmZhY2VzLFxuICAgIGlkOiBcImludGVyZmFjZXNcIixcbiAgICBjb2xsZWN0aW9uOiBcIm9iamVjdFR5cGVEZWZpbml0aW9uc1wiXG4gIH0sXG4gIFwibGlicmFyaWVzXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9saWJyYXJpZXMsXG4gICAgaWQ6IFwibGlicmFyaWVzXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlRGVmaW5pdGlvbnNcIlxuICB9LFxuICBcIm1vZGFsc1wiOiB7XG4gICAgLi4ub2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fbW9kYWxzLFxuICAgIGlkOiBcIm1vZGFsc1wiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZURlZmluaXRpb25zXCJcbiAgfSxcbiAgXCJvYmplY3RUeXBlQ2F0ZWdvcmllc1wiOiB7XG4gICAgLi4ub2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fb2JqZWN0VHlwZUNhdGVnb3JpZXMsXG4gICAgaWQ6IFwib2JqZWN0VHlwZUNhdGVnb3JpZXNcIixcbiAgICBjb2xsZWN0aW9uOiBcIm9iamVjdFR5cGVEZWZpbml0aW9uc1wiXG4gIH0sXG4gIFwib2JqZWN0VHlwZURlZmluaXRpb25zXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9vYmplY3RUeXBlRGVmaW5pdGlvbnMsXG4gICAgaWQ6IFwib2JqZWN0VHlwZURlZmluaXRpb25zXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlRGVmaW5pdGlvbnNcIlxuICB9LFxuICBcInNjZW5lc1wiOiB7XG4gICAgLi4ub2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fc2NlbmVzLFxuICAgIGlkOiBcInNjZW5lc1wiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZURlZmluaXRpb25zXCJcbiAgfSxcbiAgXCJzeXN0ZW1zXCI6IHtcbiAgICAuLi5vYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9zeXN0ZW1zLFxuICAgIGlkOiBcInN5c3RlbXNcIixcbiAgICBjb2xsZWN0aW9uOiBcIm9iamVjdFR5cGVEZWZpbml0aW9uc1wiXG4gIH0sXG4gIFwidGVzdHNcIjoge1xuICAgIC4uLm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3Rlc3RzLFxuICAgIGlkOiBcInRlc3RzXCIsXG4gICAgY29sbGVjdGlvbjogXCJvYmplY3RUeXBlRGVmaW5pdGlvbnNcIlxuICB9LFxuICBcInRoZW1lc1wiOiB7XG4gICAgLi4ub2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fdGhlbWVzLFxuICAgIGlkOiBcInRoZW1lc1wiLFxuICAgIGNvbGxlY3Rpb246IFwib2JqZWN0VHlwZURlZmluaXRpb25zXCJcbiAgfVxufTtcblxuLy8gaW50ZXJmYWNlcyBkYXRhXG5pbXBvcnQgaW50ZXJmYWNlc19qc29uX21haW4gZnJvbSAnQzovcHJvamVjdHMvR1VUUy9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3VpL2ludGVyZmFjZXMvZGF0YS9tYWluLmpzb24nO1xuaW1wb3J0IGludGVyZmFjZXNfaHRtbF9tYWluIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy91aS9pbnRlcmZhY2VzL2h0bWwvbWFpbi5odG1sJztcbmltcG9ydCBpbnRlcmZhY2VzX2Nzc19tYWluIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy91aS9pbnRlcmZhY2VzL2Nzcy9tYWluLmNzcyc7XG5jb25zdCBpbnRlcmZhY2VzRGF0YSA9IHtcbiAgXCJtYWluXCI6IHtcbiAgICAuLi5pbnRlcmZhY2VzX2pzb25fbWFpbixcbiAgICBpZDogXCJtYWluXCIsXG4gICAgY29sbGVjdGlvbjogXCJpbnRlcmZhY2VzXCIsXG4gICAgaHRtbDogaW50ZXJmYWNlc19odG1sX21haW4sXG4gICAgY3NzOiBpbnRlcmZhY2VzX2Nzc19tYWluXG4gIH1cbn07XG5cbi8vID09PT09PT09PT0gQ09NQklORUQgQ09MTEVDVElPTlMgPT09PT09PT09PVxuY29uc3QgRGF0YUNvbGxlY3Rpb25zID0ge1xuICBzY2VuZXM6IHNjZW5lc0RhdGEsXG4gIHN5c3RlbXM6IHN5c3RlbXNEYXRhLFxuICBjb25maWdzOiBjb25maWdzRGF0YSxcbiAgb2JqZWN0VHlwZUNhdGVnb3JpZXM6IG9iamVjdFR5cGVDYXRlZ29yaWVzRGF0YSxcbiAgb2JqZWN0VHlwZURlZmluaXRpb25zOiBvYmplY3RUeXBlRGVmaW5pdGlvbnNEYXRhLFxuICBpbnRlcmZhY2VzOiBpbnRlcmZhY2VzRGF0YVxufTtcblxuLy8gPT09PT09PT09PSBHTE9CQUwgU0VUVVAgPT09PT09PT09PVxuXG4vLyBTZXR1cCB3aW5kb3cuR1VUUyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbmlmICghd2luZG93LkdVVFMpIHtcbiAgd2luZG93LkdVVFMgPSB7fTtcbn1cblxuLy8gUmVnaXN0ZXIgYWxsIGxpYnJhcmllcyBpbiB3aW5kb3cuR1VUU1xuT2JqZWN0LmFzc2lnbih3aW5kb3cuR1VUUywgTGlicmFyaWVzKTtcblxuLy8gTGlicmFyeSB3aW5kb3dDb250ZXh0IG1ldGFkYXRhIChnZW5lcmF0ZWQgYXQgYnVpbGQgdGltZSlcbmNvbnN0IF9saWJyYXJ5V2luZG93Q29udGV4dHMgPSB7fTtcblxuLy8gU2V0dXAgd2luZG93LlRIUkVFIGlmIGl0IGV4aXN0cyBpbiBsaWJyYXJpZXNcbmlmIChMaWJyYXJpZXMuVEhSRUUpIHtcbiAgd2luZG93LlRIUkVFID0gTGlicmFyaWVzLlRIUkVFO1xuICBcbiAgLy8gQWRkIGxpYnJhcmllcyB3aXRoIHdpbmRvd0NvbnRleHQ9XCJUSFJFRVwiIHRvIHdpbmRvdy5USFJFRSBuYW1lc3BhY2VcbiAgT2JqZWN0LmtleXMoTGlicmFyaWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgY29uc3Qgd2luZG93Q29udGV4dCA9IF9saWJyYXJ5V2luZG93Q29udGV4dHNba2V5XTtcbiAgICBpZiAod2luZG93Q29udGV4dCA9PT0gJ1RIUkVFJyAmJiBrZXkgIT09ICdUSFJFRScpIHtcbiAgICAgIGNvbnN0IGFkZG9uID0gTGlicmFyaWVzW2tleV07XG4gICAgICB3aW5kb3cuVEhSRUVba2V5XSA9IGFkZG9uO1xuICAgICAgLy8gQWxzbyBmbGF0dGVuIGV4cG9ydGVkIGZ1bmN0aW9ucy9jbGFzc2VzIGZvciBkaXJlY3QgYWNjZXNzXG4gICAgICBpZiAodHlwZW9mIGFkZG9uID09PSAnb2JqZWN0JyAmJiBhZGRvbiAhPT0gbnVsbCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHdpbmRvdy5USFJFRSwgYWRkb24pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbk9iamVjdC5hc3NpZ24od2luZG93LkdVVFMsIHtcbiAgc3lzdGVtczogU3lzdGVtcyxcbn0pO1xuXG4vLyBBc3NpZ24gYWxsIGluZGl2aWR1YWwgY2xhc3NlcyBkaXJlY3RseSB0byB3aW5kb3cuR1VUUyBmb3IgZGlyZWN0IGFjY2Vzc1xuT2JqZWN0LmFzc2lnbih3aW5kb3cuR1VUUywgU3lzdGVtcyk7XG5cbi8vIFNldHVwIENPTVBJTEVEX0dBTUUgbmFtZXNwYWNlXG53aW5kb3cuQ09NUElMRURfR0FNRSA9IHtcbiAgcmVhZHk6IFByb21pc2UucmVzb2x2ZSgpLFxuICBpbml0aWFsaXplZDogZmFsc2UsXG4gIGxpYnJhcnlDbGFzc2VzOiBMaWJyYXJpZXMsXG4gIHN5c3RlbXM6IFN5c3RlbXMsXG4gIGNvbGxlY3Rpb25zOiBEYXRhQ29sbGVjdGlvbnMsXG4gIGluaXQ6IGZ1bmN0aW9uKGd1dHNFbmdpbmUpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHdpbmRvdy5HVVRTLmVuZ2luZSA9IGd1dHNFbmdpbmU7XG4gICAgY29uc29sZS5sb2coXCLinIUgQ09NUElMRURfR0FNRSBpbml0aWFsaXplZFwiKTtcbiAgfVxufTtcblxuLy8gPT09PT09PT09PSBFWFBPUlRTID09PT09PT09PT1cbmV4cG9ydCB7XG4gIEJhc2VFbmdpbmUsXG4gIEVuZ2luZSxcbiAgTGlicmFyaWVzLFxuICBTeXN0ZW1zXG59O1xuXG5leHBvcnQgZGVmYXVsdCB3aW5kb3cuQ09NUElMRURfR0FNRTsiXSwibmFtZXMiOlsiQmFzZUVuZ2luZSIsIkVuZ2luZSIsImxpYl9CYXNlRUNTR2FtZSIsImxpYl9TY2VuZU1hbmFnZXIiLCJsaWJfQmFzZVN5c3RlbSIsImxpYl9CYXNlTG9hZGVyIiwiTGlicmFyaWVzIiwiQmFzZUVDU0dhbWUiLCJkZWZhdWx0IiwiU2NlbmVNYW5hZ2VyIiwiQmFzZVN5c3RlbSIsIkJhc2VMb2FkZXIiLCJzeXNfSGVsbG9TeXN0ZW0iLCJTeXN0ZW1zIiwiSGVsbG9TeXN0ZW0iLCJzY2VuZXNfanNvbl9oZWxsbyIsInNjZW5lc0RhdGEiLCJpZCIsImNvbGxlY3Rpb24iLCJzeXN0ZW1zX2pzb25fSGVsbG9TeXN0ZW0iLCJzeXN0ZW1zRGF0YSIsImNvbmZpZ3NfanNvbl9nYW1lIiwiY29uZmlnc19qc29uX3N0YXRlIiwiY29uZmlnc0RhdGEiLCJvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2RhdGEiLCJvYmplY3RUeXBlQ2F0ZWdvcmllc19qc29uX2VkaXRvciIsIm9iamVjdFR5cGVDYXRlZ29yaWVzX2pzb25fbGlicmFyaWVzIiwib2JqZWN0VHlwZUNhdGVnb3JpZXNfanNvbl9zY3JpcHRzIiwib2JqZWN0VHlwZUNhdGVnb3JpZXNfanNvbl9zZXR0aW5ncyIsIm9iamVjdFR5cGVDYXRlZ29yaWVzX2pzb25fdWkiLCJvYmplY3RUeXBlQ2F0ZWdvcmllc0RhdGEiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9jb25maWdzIiwib2JqZWN0VHlwZURlZmluaXRpb25zX2pzb25fZWRpdG9yTW9kdWxlcyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX2ludGVyZmFjZXMiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9saWJyYXJpZXMiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9tb2RhbHMiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl9vYmplY3RUeXBlQ2F0ZWdvcmllcyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX29iamVjdFR5cGVEZWZpbml0aW9ucyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3NjZW5lcyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3N5c3RlbXMiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnNfanNvbl90ZXN0cyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc19qc29uX3RoZW1lcyIsIm9iamVjdFR5cGVEZWZpbml0aW9uc0RhdGEiLCJpbnRlcmZhY2VzX2pzb25fbWFpbiIsImludGVyZmFjZXNfaHRtbF9tYWluIiwiaW50ZXJmYWNlc19jc3NfbWFpbiIsImludGVyZmFjZXNEYXRhIiwiaHRtbCIsImNzcyIsIkRhdGFDb2xsZWN0aW9ucyIsInNjZW5lcyIsInN5c3RlbXMiLCJjb25maWdzIiwib2JqZWN0VHlwZUNhdGVnb3JpZXMiLCJvYmplY3RUeXBlRGVmaW5pdGlvbnMiLCJpbnRlcmZhY2VzIiwid2luZG93IiwiR1VUUyIsIk9iamVjdCIsImFzc2lnbiIsIl9saWJyYXJ5V2luZG93Q29udGV4dHMiLCJUSFJFRSIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwid2luZG93Q29udGV4dCIsImFkZG9uIiwiQ09NUElMRURfR0FNRSIsInJlYWR5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbml0aWFsaXplZCIsImxpYnJhcnlDbGFzc2VzIiwiY29sbGVjdGlvbnMiLCJpbml0IiwiZ3V0c0VuZ2luZSIsImVuZ2luZSIsImNvbnNvbGUiLCJsb2ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./build/.temp/HelloWorld/client-entry.js\n\n}");

/***/ }),

/***/ "./build/.temp/HelloWorld/combined-entry.js":
/*!**************************************************!*\
  !*** ./build/.temp/HelloWorld/combined-entry.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
eval("{/* harmony import */ var _engine_entry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine-entry.js */ \"./build/.temp/HelloWorld/engine-entry.js\");\n/* harmony import */ var _client_entry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client-entry.js */ \"./build/.temp/HelloWorld/client-entry.js\");\n/**\n * GUTS Combined Bundle (Engine + Game)\n * Generated: 2026-01-10T20:48:55.048Z\n * Project: HelloWorld\n */\n\n\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (_client_entry_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9idWlsZC8udGVtcC9IZWxsb1dvcmxkL2NvbWJpbmVkLWVudHJ5LmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMkI7QUFFbUI7QUFFOUMsc0VBQWVBLHdEQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG93ZXJkZWZlbnNlLy4vYnVpbGQvLnRlbXAvSGVsbG9Xb3JsZC9jb21iaW5lZC1lbnRyeS5qcz85ZDMyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR1VUUyBDb21iaW5lZCBCdW5kbGUgKEVuZ2luZSArIEdhbWUpXG4gKiBHZW5lcmF0ZWQ6IDIwMjYtMDEtMTBUMjA6NDg6NTUuMDQ4WlxuICogUHJvamVjdDogSGVsbG9Xb3JsZFxuICovXG5cbmltcG9ydCAnLi9lbmdpbmUtZW50cnkuanMnO1xuXG5pbXBvcnQgQ09NUElMRURfR0FNRSBmcm9tICcuL2NsaWVudC1lbnRyeS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IENPTVBJTEVEX0dBTUU7Il0sIm5hbWVzIjpbIkNPTVBJTEVEX0dBTUUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./build/.temp/HelloWorld/combined-entry.js\n\n}");

/***/ }),

/***/ "./build/.temp/HelloWorld/engine-entry.js":
/*!************************************************!*\
  !*** ./build/.temp/HelloWorld/engine-entry.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
eval("{/* harmony import */ var C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/BaseEngine.js */ \"./engine/BaseEngine.js\");\n/* harmony import */ var C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var C_projects_GUTS_engine_Engine_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./engine/Engine.js */ \"./engine/Engine.js\");\n/**\n * GUTS Engine Bundle\n * Generated: 2026-01-10T20:48:55.047Z\n */\n\n\n\nwindow.Engine = C_projects_GUTS_engine_Engine_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\nwindow.BaseEngine = (C_projects_GUTS_engine_BaseEngine_js__WEBPACK_IMPORTED_MODULE_0___default());\n\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (C_projects_GUTS_engine_Engine_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9idWlsZC8udGVtcC9IZWxsb1dvcmxkL2VuZ2luZS1lbnRyeS5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFK0Q7QUFDUjtBQUV2REUsTUFBTSxDQUFDRCxNQUFNLEdBQUdBLHdFQUFNO0FBQ3RCQyxNQUFNLENBQUNGLFVBQVUsR0FBR0EsNkVBQVU7QUFFQTtBQUM5QixzRUFBZUMsd0VBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3dlcmRlZmVuc2UvLi9idWlsZC8udGVtcC9IZWxsb1dvcmxkL2VuZ2luZS1lbnRyeS5qcz9hZTA2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR1VUUyBFbmdpbmUgQnVuZGxlXG4gKiBHZW5lcmF0ZWQ6IDIwMjYtMDEtMTBUMjA6NDg6NTUuMDQ3WlxuICovXG5cbmltcG9ydCBCYXNlRW5naW5lIGZyb20gJ0M6L3Byb2plY3RzL0dVVFMvZW5naW5lL0Jhc2VFbmdpbmUuanMnO1xuaW1wb3J0IEVuZ2luZSBmcm9tICdDOi9wcm9qZWN0cy9HVVRTL2VuZ2luZS9FbmdpbmUuanMnO1xuXG53aW5kb3cuRW5naW5lID0gRW5naW5lO1xud2luZG93LkJhc2VFbmdpbmUgPSBCYXNlRW5naW5lO1xuXG5leHBvcnQgeyBCYXNlRW5naW5lLCBFbmdpbmUgfTtcbmV4cG9ydCBkZWZhdWx0IEVuZ2luZTsiXSwibmFtZXMiOlsiQmFzZUVuZ2luZSIsIkVuZ2luZSIsIndpbmRvdyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./build/.temp/HelloWorld/engine-entry.js\n\n}");

/***/ }),

/***/ "./engine/BaseEngine.js":
/*!******************************!*\
  !*** ./engine/BaseEngine.js ***!
  \******************************/
/***/ ((module, exports) => {

eval("{class BaseEngine {\n  constructor() {\n    this.plugins = {};\n    this.currentTime = Date.now();\n    this.lastTime = Date.now();\n    this.deltaTime = 0;\n    this.accumulator = 0;\n    this.engineClasses = [];\n    this.appClasses = {};\n    this.libraries = {};\n    this.running = false;\n    this.collections = null;\n    this.gameInstance = null;\n  }\n  async loadCollections(projectName) {\n    // This method will be overridden by client and server implementations\n    throw new Error('loadCollections must be implemented by subclass');\n  }\n  getCollections() {\n    return this.collections;\n  }\n  resetAccumulator() {\n    this.accumulator = 0;\n  }\n  start() {\n    this.running = true;\n    this.lastTime = this.getCurrentTime();\n  }\n  stop() {\n    this.running = false;\n  }\n  getCurrentTime() {\n    return Date.now();\n  }\n}\nif (typeof BaseEngine != 'undefined') {\n  if (typeof window !== 'undefined') {\n    window.BaseEngine = BaseEngine;\n  }\n\n  // Make available as ES module export (new for server)  \n  if ( true && module.exports) {\n    module.exports = BaseEngine;\n  }\n\n  // Make available as ES6 export (also new for server)\n  if (true) {\n    exports[\"default\"] = BaseEngine;\n    exports.BaseEngine = BaseEngine;\n  }\n}\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.BaseEngine = BaseEngine;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9lbmdpbmUvQmFzZUVuZ2luZS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxVQUFVLENBQUM7RUFDYkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1YsSUFBSSxDQUFDQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQzdCLElBQUksQ0FBQ0MsUUFBUSxHQUFHRixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLElBQUksQ0FBQ0UsU0FBUyxHQUFHLENBQUM7SUFDbEIsSUFBSSxDQUFDQyxXQUFXLEdBQUcsQ0FBQztJQUNwQixJQUFJLENBQUNDLGFBQWEsR0FBRyxFQUFFO0lBQ3ZCLElBQUksQ0FBQ0MsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUNwQixJQUFJLENBQUNDLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDQyxPQUFPLEdBQUcsS0FBSztJQUNwQixJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJO0lBQ3ZCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7RUFDNUI7RUFFQSxNQUFNQyxlQUFlQSxDQUFDQyxXQUFXLEVBQUU7SUFDL0I7SUFDQSxNQUFNLElBQUlDLEtBQUssQ0FBQyxpREFBaUQsQ0FBQztFQUN0RTtFQUVBQyxjQUFjQSxDQUFBLEVBQUc7SUFDYixPQUFPLElBQUksQ0FBQ0wsV0FBVztFQUMzQjtFQUdBTSxnQkFBZ0JBLENBQUEsRUFBRztJQUNmLElBQUksQ0FBQ1gsV0FBVyxHQUFHLENBQUM7RUFDeEI7RUFHQVksS0FBS0EsQ0FBQSxFQUFHO0lBQ0osSUFBSSxDQUFDUixPQUFPLEdBQUcsSUFBSTtJQUNuQixJQUFJLENBQUNOLFFBQVEsR0FBRyxJQUFJLENBQUNlLGNBQWMsQ0FBQyxDQUFDO0VBQ3pDO0VBRUFDLElBQUlBLENBQUEsRUFBRztJQUNILElBQUksQ0FBQ1YsT0FBTyxHQUFHLEtBQUs7RUFDeEI7RUFFQVMsY0FBY0EsQ0FBQSxFQUFHO0lBQ2IsT0FBT2pCLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFDckI7QUFDSjtBQUNBLElBQUcsT0FBT0wsVUFBVSxJQUFJLFdBQVcsRUFBQztFQUNoQyxJQUFJLE9BQU91QixNQUFNLEtBQUssV0FBVyxFQUFFO0lBQy9CQSxNQUFNLENBQUN2QixVQUFVLEdBQUdBLFVBQVU7RUFDbEM7O0VBRUE7RUFDQSxJQUFJLEtBQTZCLElBQUl3QixNQUFNLENBQUNDLE9BQU8sRUFBRTtJQUNqREQsTUFBTSxDQUFDQyxPQUFPLEdBQUd6QixVQUFVO0VBQy9COztFQUVBO0VBQ0EsSUFBSSxJQUE4QixFQUFFO0lBQ2hDeUIsa0JBQWUsR0FBR3pCLFVBQVU7SUFDNUJ5QixrQkFBa0IsR0FBR3pCLFVBQVU7RUFDbkM7QUFDSjs7QUFFQTtBQUNBLElBQUksT0FBT3VCLE1BQU0sS0FBSyxXQUFXLElBQUlBLE1BQU0sQ0FBQ0ksSUFBSSxFQUFFO0VBQ2hESixNQUFNLENBQUNJLElBQUksQ0FBQzNCLFVBQVUsR0FBR0EsVUFBVTtBQUNyQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rvd2VyZGVmZW5zZS8uL2VuZ2luZS9CYXNlRW5naW5lLmpzPzk3YzEiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmFzZUVuZ2luZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHt9O1xuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZGVsdGFUaW1lID0gMDtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7XG4gICAgICAgIHRoaXMuZW5naW5lQ2xhc3NlcyA9IFtdO1xuICAgICAgICB0aGlzLmFwcENsYXNzZXMgPSB7fTtcbiAgICAgICAgdGhpcy5saWJyYXJpZXMgPSB7fTtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBudWxsO1xuICAgICAgICB0aGlzLmdhbWVJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZENvbGxlY3Rpb25zKHByb2plY3ROYW1lKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHdpbGwgYmUgb3ZlcnJpZGRlbiBieSBjbGllbnQgYW5kIHNlcnZlciBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsb2FkQ29sbGVjdGlvbnMgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzcycpO1xuICAgIH1cblxuICAgIGdldENvbGxlY3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9ucztcbiAgICB9XG5cblxuICAgIHJlc2V0QWNjdW11bGF0b3IoKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwO1xuICAgIH1cblxuXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSB0aGlzLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFRpbWUoKSB7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuICAgIH1cbn1cbmlmKHR5cGVvZiBCYXNlRW5naW5lICE9ICd1bmRlZmluZWQnKXtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LkJhc2VFbmdpbmUgPSBCYXNlRW5naW5lO1xuICAgIH1cblxuICAgIC8vIE1ha2UgYXZhaWxhYmxlIGFzIEVTIG1vZHVsZSBleHBvcnQgKG5ldyBmb3Igc2VydmVyKSAgXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gQmFzZUVuZ2luZTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGF2YWlsYWJsZSBhcyBFUzYgZXhwb3J0IChhbHNvIG5ldyBmb3Igc2VydmVyKVxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZXhwb3J0cy5kZWZhdWx0ID0gQmFzZUVuZ2luZTtcbiAgICAgICAgZXhwb3J0cy5CYXNlRW5naW5lID0gQmFzZUVuZ2luZTtcbiAgICB9XG59XG5cbi8vIEF1dG8tZ2VuZXJhdGVkIGV4cG9ydHNcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuR1VUUykge1xuICB3aW5kb3cuR1VUUy5CYXNlRW5naW5lID0gQmFzZUVuZ2luZTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlRW5naW5lIiwiY29uc3RydWN0b3IiLCJwbHVnaW5zIiwiY3VycmVudFRpbWUiLCJEYXRlIiwibm93IiwibGFzdFRpbWUiLCJkZWx0YVRpbWUiLCJhY2N1bXVsYXRvciIsImVuZ2luZUNsYXNzZXMiLCJhcHBDbGFzc2VzIiwibGlicmFyaWVzIiwicnVubmluZyIsImNvbGxlY3Rpb25zIiwiZ2FtZUluc3RhbmNlIiwibG9hZENvbGxlY3Rpb25zIiwicHJvamVjdE5hbWUiLCJFcnJvciIsImdldENvbGxlY3Rpb25zIiwicmVzZXRBY2N1bXVsYXRvciIsInN0YXJ0IiwiZ2V0Q3VycmVudFRpbWUiLCJzdG9wIiwid2luZG93IiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiLCJHVVRTIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./engine/BaseEngine.js\n\n}");

/***/ }),

/***/ "./engine/Engine.js":
/*!**************************!*\
  !*** ./engine/Engine.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* unused harmony export Engine */\nclass Engine extends BaseEngine {\n  constructor(target) {\n    super();\n    this.applicationTarget = document.getElementById(target);\n    this.isServer = false;\n    this.tickRate = 1 / 20; // 20 TPS\n    this.lastTick = 0;\n    const urlParams = new URLSearchParams(window.location.search);\n    this.serverMode = urlParams.get('isServer');\n    this.services = new Map();\n    window.APP = this;\n  }\n  async init(projectName) {\n    this.currentProjectName = projectName;\n    this.collections = await this.loadCollections();\n    if (!this.collections) {\n      console.error(\"Failed to load game configuration\");\n      return;\n    }\n    let projectConfig = this.collections.configs.game;\n    let ui = this.collections.interfaces[projectConfig.interface];\n    if (ui) {\n      let html = ui.html;\n      let css = ui.css;\n      let modals = ui.modals;\n      if (html) {\n        this.applicationTarget.innerHTML += html;\n      }\n      if (css) {\n        let styleTag = document.createElement('style');\n        styleTag.innerHTML = css;\n        document.head.append(styleTag);\n      }\n      if (modals) {\n        modals.forEach(modalId => {\n          let modal = document.createElement('div');\n          modal.setAttribute('id', `modal-${modalId}`);\n          let modalContent = document.createElement('div');\n          modal.classList.add('modal');\n          modalContent.classList.add('modal-content');\n          modal.append(modalContent);\n          modalContent.innerHTML = this.collections.modals[modalId].html;\n          this.applicationTarget.append(modal);\n        });\n      }\n    }\n    this.gameInstance = new GUTS[projectConfig.appLibrary](this);\n    this.loader = new GUTS[projectConfig.appLoaderLibrary](this.gameInstance);\n    await this.loader.load();\n\n    // Allow game config to override tick rate (default is 20 TPS)\n    if (projectConfig.tickRate) {\n      this.tickRate = 1 / projectConfig.tickRate;\n      // Also update the game's fixed delta time to match\n      if (this.gameInstance && this.gameInstance.FIXED_DELTA_TIME !== undefined) {\n        this.gameInstance.FIXED_DELTA_TIME = this.tickRate;\n      }\n    }\n    this.start();\n  }\n  getCurrentProject() {\n    return this.currentProjectName;\n  }\n  getResourcesPath() {\n    if (window) {\n      // Return absolute path to prevent doubling when accessed from subdirectories\n      return window.location.pathname.replace('index.html', 'resources/');\n    }\n    return \"resources/\";\n  }\n  async loadCollections() {\n    // Use compiled collections from webpack build\n    if (window.COMPILED_GAME?.collections) {\n      return window.COMPILED_GAME.collections;\n    }\n\n    // No collections available\n    console.warn('No collections found in localStorage or COMPILED_GAME');\n    return {};\n  }\n  hideLoadingScreen() {\n    document.body.style = \"\";\n    requestAnimationFrame(() => {\n      this.applicationTarget.style = '';\n    });\n  }\n  async gameLoop() {\n    if (!this.running) return;\n    const now = this.getCurrentTime();\n    const deltaTime = (now - this.lastTick) / 1000;\n    this.lastTick = now;\n\n    // Always accumulate time for fixed timestep\n    this.accumulator += deltaTime;\n\n    // Process ticks at fixed rate, limit per frame to catch up gradually\n    // This prevents lag spikes while maintaining sync\n    const maxTicksPerFrame = 3;\n    let ticksProcessed = 0;\n    while (this.accumulator >= this.tickRate && ticksProcessed < maxTicksPerFrame) {\n      await this.tick();\n      this.accumulator -= this.tickRate;\n      ticksProcessed++;\n    }\n\n    // Schedule next frame using requestAnimationFrame when tab is active\n    if (this.useRAF) {\n      this.animationFrameId = requestAnimationFrame(() => this.gameLoop());\n    }\n  }\n\n  /**\r\n   * Reset the accumulator to prevent catchup after sync\r\n   */\n  resetAccumulator() {\n    this.accumulator = 0;\n    this.lastTick = this.getCurrentTime();\n  }\n  handleVisibilityChange() {\n    if (document.hidden) {\n      // Tab is hidden - switch to setInterval\n      this.useRAF = false;\n      if (this.animationFrameId) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.animationFrameId = null;\n      }\n      // Use setInterval to keep running in background\n      this.intervalId = setInterval(() => this.gameLoop(), 16);\n    } else {\n      // Tab is visible - switch to requestAnimationFrame\n      this.useRAF = true;\n      if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n      // Notify game that tab became visible (for catchup handling)\n      if (this.gameInstance?.triggerEvent) {\n        this.gameInstance.triggerEvent('onTabVisible');\n      }\n      this.animationFrameId = requestAnimationFrame(() => this.gameLoop());\n    }\n  }\n  async tick() {\n    // Update all active game rooms\n    if (this.gameInstance && this.gameInstance.update) {\n      await this.gameInstance.update(this.tickRate);\n    }\n  }\n  start() {\n    super.start();\n    this.lastTick = this.getCurrentTime();\n    this.useRAF = true;\n\n    // Listen for tab visibility changes\n    this.visibilityHandler = () => this.handleVisibilityChange();\n    document.addEventListener('visibilitychange', this.visibilityHandler);\n\n    // Start with requestAnimationFrame\n    this.animationFrameId = requestAnimationFrame(() => this.gameLoop());\n    requestAnimationFrame(() => {\n      this.hideLoadingScreen();\n    });\n  }\n  stop() {\n    super.stop();\n    if (this.animationFrameId) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n    if (this.visibilityHandler) {\n      document.removeEventListener('visibilitychange', this.visibilityHandler);\n      this.visibilityHandler = null;\n    }\n  }\n  getCurrentTime() {\n    return performance.now();\n  }\n  addService(key, serviceInstance) {\n    if (!this.services.get(key)) {\n      this.services.set(key, serviceInstance);\n    } else {\n      console.warn('duplicate service key', key);\n    }\n  }\n}\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.Engine = Engine;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Engine);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ0MsR0FBRyxFQUFFQyxlQUFlLEVBQUU7SUFDN0IsSUFBRyxDQUFDLElBQUksQ0FBQzdFLFFBQVEsQ0FBQ0QsR0FBRyxDQUFDNkUsR0FBRyxDQUFDLEVBQUM7TUFDdkIsSUFBSSxDQUFDNUUsUUFBUSxDQUFDOEUsR0FBRyxDQUFDRixHQUFHLEVBQUVDLGVBQWUsQ0FBQztJQUMzQyxDQUFDLE1BQU07TUFDSHJFLE9BQU8sQ0FBQ3FDLElBQUksQ0FBQyx1QkFBdUIsRUFBRStCLEdBQUcsQ0FBQztJQUM5QztFQUNKO0FBQ0o7O0FBRUE7QUFDQSxJQUFJLE9BQU9qRixNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNxQyxJQUFJLEVBQUU7RUFDaERyQyxNQUFNLENBQUNxQyxJQUFJLENBQUNqRCxNQUFNLEdBQUdBLE1BQU07QUFDN0I7QUFFQSxpRUFBZUEsTUFBTSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG93ZXJkZWZlbnNlLy4vZW5naW5lL0VuZ2luZS5qcz8zZTU0Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEVuZ2luZSBleHRlbmRzIEJhc2VFbmdpbmUge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uVGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KTtcclxuICAgICAgICB0aGlzLmlzU2VydmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50aWNrUmF0ZSA9IDEgLyAyMDsgLy8gMjAgVFBTXHJcbiAgICAgICAgdGhpcy5sYXN0VGljayA9IDA7XHJcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgICAgICB0aGlzLnNlcnZlck1vZGUgPSB1cmxQYXJhbXMuZ2V0KCdpc1NlcnZlcicpO1xyXG4gICAgICAgIHRoaXMuc2VydmljZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgd2luZG93LkFQUCA9IHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaW5pdChwcm9qZWN0TmFtZSkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3ROYW1lID0gcHJvamVjdE5hbWU7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IGF3YWl0IHRoaXMubG9hZENvbGxlY3Rpb25zKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBnYW1lIGNvbmZpZ3VyYXRpb25cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwcm9qZWN0Q29uZmlnID0gdGhpcy5jb2xsZWN0aW9ucy5jb25maWdzLmdhbWU7XHJcblxyXG5cclxuICAgICAgICBsZXQgdWkgPSB0aGlzLmNvbGxlY3Rpb25zLmludGVyZmFjZXNbcHJvamVjdENvbmZpZy5pbnRlcmZhY2VdO1xyXG4gICAgICAgIGlmICh1aSkge1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IHVpLmh0bWw7XHJcbiAgICAgICAgICAgIGxldCBjc3MgPSB1aS5jc3M7XHJcbiAgICAgICAgICAgIGxldCBtb2RhbHMgPSB1aS5tb2RhbHM7XHJcbiAgICAgICAgICAgIGlmIChodG1sKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uVGFyZ2V0LmlubmVySFRNTCArPSBodG1sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICAgICBzdHlsZVRhZy5pbm5lckhUTUwgPSBjc3M7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZChzdHlsZVRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RhbHMpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFscy5mb3JFYWNoKChtb2RhbElkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsIGBtb2RhbC0ke21vZGFsSWR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGFsQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxDb250ZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsLWNvbnRlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5hcHBlbmQobW9kYWxDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5jb2xsZWN0aW9ucy5tb2RhbHNbbW9kYWxJZF0uaHRtbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGxpY2F0aW9uVGFyZ2V0LmFwcGVuZChtb2RhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB0aGlzLmdhbWVJbnN0YW5jZSA9IG5ldyBHVVRTW3Byb2plY3RDb25maWcuYXBwTGlicmFyeV0odGhpcyk7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgR1VUU1twcm9qZWN0Q29uZmlnLmFwcExvYWRlckxpYnJhcnldKHRoaXMuZ2FtZUluc3RhbmNlKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRlci5sb2FkKCk7XHJcblxyXG4gICAgICAgIC8vIEFsbG93IGdhbWUgY29uZmlnIHRvIG92ZXJyaWRlIHRpY2sgcmF0ZSAoZGVmYXVsdCBpcyAyMCBUUFMpXHJcbiAgICAgICAgaWYgKHByb2plY3RDb25maWcudGlja1JhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy50aWNrUmF0ZSA9IDEgLyBwcm9qZWN0Q29uZmlnLnRpY2tSYXRlO1xyXG4gICAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgZ2FtZSdzIGZpeGVkIGRlbHRhIHRpbWUgdG8gbWF0Y2hcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUluc3RhbmNlICYmIHRoaXMuZ2FtZUluc3RhbmNlLkZJWEVEX0RFTFRBX1RJTUUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2UuRklYRURfREVMVEFfVElNRSA9IHRoaXMudGlja1JhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50UHJvamVjdCgpeyBcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvamVjdE5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzb3VyY2VzUGF0aCgpe1xyXG4gICAgICAgIGlmKHdpbmRvdyl7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBhYnNvbHV0ZSBwYXRoIHRvIHByZXZlbnQgZG91Ymxpbmcgd2hlbiBhY2Nlc3NlZCBmcm9tIHN1YmRpcmVjdG9yaWVzXHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnaW5kZXguaHRtbCcsICdyZXNvdXJjZXMvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcInJlc291cmNlcy9cIjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkQ29sbGVjdGlvbnMoKSB7XHJcblxyXG4gICAgICAgIC8vIFVzZSBjb21waWxlZCBjb2xsZWN0aW9ucyBmcm9tIHdlYnBhY2sgYnVpbGRcclxuICAgICAgICBpZiAod2luZG93LkNPTVBJTEVEX0dBTUU/LmNvbGxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuQ09NUElMRURfR0FNRS5jb2xsZWN0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5vIGNvbGxlY3Rpb25zIGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnNvbGUud2FybignTm8gY29sbGVjdGlvbnMgZm91bmQgaW4gbG9jYWxTdG9yYWdlIG9yIENPTVBJTEVEX0dBTUUnKTtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUxvYWRpbmdTY3JlZW4oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvblRhcmdldC5zdHlsZSA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2FtZUxvb3AoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgbm93ID0gdGhpcy5nZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IChub3cgLSB0aGlzLmxhc3RUaWNrKSAvIDEwMDA7XHJcbiAgICAgICAgdGhpcy5sYXN0VGljayA9IG5vdztcclxuXHJcbiAgICAgICAgLy8gQWx3YXlzIGFjY3VtdWxhdGUgdGltZSBmb3IgZml4ZWQgdGltZXN0ZXBcclxuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgLy8gUHJvY2VzcyB0aWNrcyBhdCBmaXhlZCByYXRlLCBsaW1pdCBwZXIgZnJhbWUgdG8gY2F0Y2ggdXAgZ3JhZHVhbGx5XHJcbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBsYWcgc3Bpa2VzIHdoaWxlIG1haW50YWluaW5nIHN5bmNcclxuICAgICAgICBjb25zdCBtYXhUaWNrc1BlckZyYW1lID0gMztcclxuICAgICAgICBsZXQgdGlja3NQcm9jZXNzZWQgPSAwO1xyXG5cclxuICAgICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSB0aGlzLnRpY2tSYXRlICYmIHRpY2tzUHJvY2Vzc2VkIDwgbWF4VGlja3NQZXJGcmFtZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRpY2soKTtcclxuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSB0aGlzLnRpY2tSYXRlO1xyXG4gICAgICAgICAgICB0aWNrc1Byb2Nlc3NlZCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2NoZWR1bGUgbmV4dCBmcmFtZSB1c2luZyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgd2hlbiB0YWIgaXMgYWN0aXZlXHJcbiAgICAgICAgaWYgKHRoaXMudXNlUkFGKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmdhbWVMb29wKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IHRoZSBhY2N1bXVsYXRvciB0byBwcmV2ZW50IGNhdGNodXAgYWZ0ZXIgc3luY1xyXG4gICAgICovXHJcbiAgICByZXNldEFjY3VtdWxhdG9yKCkge1xyXG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdFRpY2sgPSB0aGlzLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIC8vIFRhYiBpcyBoaWRkZW4gLSBzd2l0Y2ggdG8gc2V0SW50ZXJ2YWxcclxuICAgICAgICAgICAgdGhpcy51c2VSQUYgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCkge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVXNlIHNldEludGVydmFsIHRvIGtlZXAgcnVubmluZyBpbiBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHRoaXMuZ2FtZUxvb3AoKSwgMTYpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRhYiBpcyB2aXNpYmxlIC0gc3dpdGNoIHRvIHJlcXVlc3RBbmltYXRpb25GcmFtZVxyXG4gICAgICAgICAgICB0aGlzLnVzZVJBRiA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTm90aWZ5IGdhbWUgdGhhdCB0YWIgYmVjYW1lIHZpc2libGUgKGZvciBjYXRjaHVwIGhhbmRsaW5nKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lSW5zdGFuY2U/LnRyaWdnZXJFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lSW5zdGFuY2UudHJpZ2dlckV2ZW50KCdvblRhYlZpc2libGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5nYW1lTG9vcCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGljaygpIHtcclxuICAgICAgICAvLyBVcGRhdGUgYWxsIGFjdGl2ZSBnYW1lIHJvb21zXHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUluc3RhbmNlICYmIHRoaXMuZ2FtZUluc3RhbmNlLnVwZGF0ZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdhbWVJbnN0YW5jZS51cGRhdGUodGhpcy50aWNrUmF0ZSk7ICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBzdXBlci5zdGFydCgpO1xyXG4gICAgICAgIHRoaXMubGFzdFRpY2sgPSB0aGlzLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy51c2VSQUYgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHRhYiB2aXNpYmlsaXR5IGNoYW5nZXNcclxuICAgICAgICB0aGlzLnZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4gdGhpcy5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMudmlzaWJpbGl0eUhhbmRsZXIpO1xyXG5cclxuICAgICAgICAvLyBTdGFydCB3aXRoIHJlcXVlc3RBbmltYXRpb25GcmFtZVxyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmdhbWVMb29wKCkpO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUxvYWRpbmdTY3JlZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHN1cGVyLnN0b3AoKTtcclxuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZUlkKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xyXG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy52aXNpYmlsaXR5SGFuZGxlcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy52aXNpYmlsaXR5SGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEN1cnJlbnRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTZXJ2aWNlKGtleSwgc2VydmljZUluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuc2VydmljZXMuZ2V0KGtleSkpe1xyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VzLnNldChrZXksIHNlcnZpY2VJbnN0YW5jZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdkdXBsaWNhdGUgc2VydmljZSBrZXknLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vLyBBdXRvLWdlbmVyYXRlZCBleHBvcnRzXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LkdVVFMpIHtcbiAgd2luZG93LkdVVFMuRW5naW5lID0gRW5naW5lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBFbmdpbmU7XG5leHBvcnQgeyBFbmdpbmUgfTtcbiJdLCJuYW1lcyI6WyJFbmdpbmUiLCJCYXNlRW5naW5lIiwiY29uc3RydWN0b3IiLCJ0YXJnZXQiLCJhcHBsaWNhdGlvblRhcmdldCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpc1NlcnZlciIsInRpY2tSYXRlIiwibGFzdFRpY2siLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInNlcnZlck1vZGUiLCJnZXQiLCJzZXJ2aWNlcyIsIk1hcCIsIkFQUCIsImluaXQiLCJwcm9qZWN0TmFtZSIsImN1cnJlbnRQcm9qZWN0TmFtZSIsImNvbGxlY3Rpb25zIiwibG9hZENvbGxlY3Rpb25zIiwiY29uc29sZSIsImVycm9yIiwicHJvamVjdENvbmZpZyIsImNvbmZpZ3MiLCJnYW1lIiwidWkiLCJpbnRlcmZhY2VzIiwiaW50ZXJmYWNlIiwiaHRtbCIsImNzcyIsIm1vZGFscyIsImlubmVySFRNTCIsInN0eWxlVGFnIiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJhcHBlbmQiLCJmb3JFYWNoIiwibW9kYWxJZCIsIm1vZGFsIiwic2V0QXR0cmlidXRlIiwibW9kYWxDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2FtZUluc3RhbmNlIiwiR1VUUyIsImFwcExpYnJhcnkiLCJsb2FkZXIiLCJhcHBMb2FkZXJMaWJyYXJ5IiwibG9hZCIsIkZJWEVEX0RFTFRBX1RJTUUiLCJ1bmRlZmluZWQiLCJzdGFydCIsImdldEN1cnJlbnRQcm9qZWN0IiwiZ2V0UmVzb3VyY2VzUGF0aCIsInBhdGhuYW1lIiwicmVwbGFjZSIsIkNPTVBJTEVEX0dBTUUiLCJ3YXJuIiwiaGlkZUxvYWRpbmdTY3JlZW4iLCJib2R5Iiwic3R5bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJnYW1lTG9vcCIsInJ1bm5pbmciLCJub3ciLCJnZXRDdXJyZW50VGltZSIsImRlbHRhVGltZSIsImFjY3VtdWxhdG9yIiwibWF4VGlja3NQZXJGcmFtZSIsInRpY2tzUHJvY2Vzc2VkIiwidGljayIsInVzZVJBRiIsImFuaW1hdGlvbkZyYW1lSWQiLCJyZXNldEFjY3VtdWxhdG9yIiwiaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSIsImhpZGRlbiIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRyaWdnZXJFdmVudCIsInVwZGF0ZSIsInZpc2liaWxpdHlIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3AiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGVyZm9ybWFuY2UiLCJhZGRTZXJ2aWNlIiwia2V5Iiwic2VydmljZUluc3RhbmNlIiwic2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./engine/Engine.js\n\n}");

/***/ }),

/***/ "./global/collections/scripts/libraries/js/BaseECSGame.js":
/*!****************************************************************!*\
  !*** ./global/collections/scripts/libraries/js/BaseECSGame.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseECSGame: () => (/* binding */ BaseECSGame),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass BaseECSGame {\n  constructor(app) {\n    this.app = app;\n    this.state = {};\n    this.entitiesToAdd = [];\n    this.classes = [];\n    this.systems = [];\n\n    // Scene management\n    this.sceneManager = null;\n\n    // Service registry\n    this._services = new GUTS.GameServices();\n\n    // ============================================\n    // HIGH-PERFORMANCE ECS STORAGE (10k+ entities)\n    // ============================================\n\n    // Maximum entities - pre-allocate for performance\n    // Can be configured via game.json maxEntities (default 65536)\n    const gameConfig = app?.collections?.configs?.game;\n    this.MAX_ENTITIES = gameConfig?.maxEntities || 65536; // Power of 2 recommended for performance\n\n    // Entity management with TypedArrays\n    // entityAlive[i] = 1 if entity i exists, 0 if free slot\n    this.entityAlive = new Uint8Array(this.MAX_ENTITIES);\n    // Component bitmask per entity (up to 32 component types with single Uint32)\n    // For more components, we use multiple Uint32s\n    this.entityComponentMask = new Uint32Array(this.MAX_ENTITIES * 2); // 64 component types max\n\n    // Entity ID counter (no recycling - IDs grow monotonically to prevent reference bugs)\n    this.nextEntityId = 1; // Start at 1, reserve 0 as \"no entity\"\n    this.entityCount = 0;\n\n    // Component type registry - maps component name to numeric ID (0-63)\n    this._componentTypeId = new Map(); // componentName -> typeId\n    this._componentTypeNames = []; // typeId -> componentName\n    this._nextComponentTypeId = 0;\n\n    // SoA (Structure of Arrays) storage for numeric components\n    // Each numeric field gets its own Float32Array for cache-friendly iteration\n    this._numericArrays = new Map(); // \"componentType.field.path\" -> Float32Array\n\n    // Track which components are numeric-only (use TypedArrays)\n    // Maps componentId -> { fields: ['field1', 'nested.field2'], isNumeric: true }\n    this._numericComponentInfo = new Map();\n\n    // Object storage for non-numeric/complex component data\n    // Pre-allocated array of objects, indexed by entity ID\n    this._objectComponents = new Map(); // componentType -> Array[MAX_ENTITIES]\n\n    // Query cache for getEntitiesWith - stores reusable arrays to avoid allocations\n    this._queryCache = new Map();\n\n    // Delta sync tracking - stores last synced state for computing deltas\n    this._lastSyncedState = null;\n\n    // Client-only components - excluded from server sync to preserve client state\n    // These components are managed locally and should not be overwritten by server\n    this._clientOnlyComponents = new Set(['renderable', 'animationState']);\n\n    // Proxy cache for getComponent - avoids creating new proxies every call\n    // Map: componentType -> Map(entityId -> proxy)\n    this._proxyCache = new Map();\n\n    // Pre-allocated result array for queries (avoids allocation in hot path)\n    this._queryResultBuffer = new Uint32Array(this.MAX_ENTITIES);\n    this.lastTime = 0;\n    this.currentTime = 0;\n    this.deltaTime = 0;\n    this.tickCount = 0;\n\n    // Fixed timestep for deterministic simulation (20 TPS = 0.05s per tick)\n    this.FIXED_DELTA_TIME = 1 / 20;\n    this.isServer = false;\n    // Performance monitoring\n    if (typeof GUTS !== 'undefined' && typeof GUTS.PerformanceMonitor !== 'undefined') {\n      this.performanceMonitor = new GUTS.PerformanceMonitor();\n    }\n\n    // Call logging for debugging\n    if (typeof GUTS !== 'undefined' && typeof GUTS.CallLogger !== 'undefined') {\n      this.callLogger = new GUTS.CallLogger();\n    }\n\n    // Global seeded random instance - can be reseeded for deterministic simulation\n    if (typeof GUTS !== 'undefined' && typeof GUTS.SeededRandom !== 'undefined') {\n      this.rng = new GUTS.SeededRandom(Date.now());\n    }\n\n    // Initialize component type registry with common components\n    this._initComponentTypes();\n  }\n\n  /**\r\n   * Pre-register common component types and allocate their storage\r\n   */\n  _initComponentTypes() {\n    const collections = this.getCollections();\n    this.componentGenerator = new GUTS.ComponentGenerator(collections.components, collections);\n    this.register(\"getComponents\", this.getComponents.bind(this));\n    this.register(\"getComponentSchema\", this.getComponentSchema.bind(this));\n    this.register(\"getEnumMap\", this.getEnumMap.bind(this));\n    this.register(\"getEnums\", this.getEnums.bind(this));\n    this.register(\"getReverseEnums\", this.getReverseEnums.bind(this));\n    this.register(\"getUnitTypeDef\", this.getUnitTypeDef.bind(this));\n\n    // Pre-register all component types in alphabetical order for deterministic type IDs\n    // This ensures server and client have identical type ID mappings\n    const componentNames = Object.keys(collections.components).sort();\n    for (const componentName of componentNames) {\n      this._getComponentTypeId(componentName);\n    }\n  }\n\n  /**\r\n   * Get or create a numeric component type ID\r\n   */\n  _getComponentTypeId(componentType) {\n    let typeId = this._componentTypeId.get(componentType);\n    if (typeId === undefined) {\n      typeId = this._nextComponentTypeId++;\n      this._componentTypeId.set(componentType, typeId);\n      this._componentTypeNames[typeId] = componentType;\n    }\n    return typeId;\n  }\n\n  /**\r\n   * Set component bit in entity's bitmask\r\n   */\n  _setComponentBit(entityId, componentTypeId) {\n    const maskIndex = entityId * 2 + (componentTypeId >= 32 ? 1 : 0);\n    const bit = componentTypeId % 32;\n    this.entityComponentMask[maskIndex] |= 1 << bit;\n  }\n\n  /**\r\n   * Clear component bit in entity's bitmask\r\n   */\n  _clearComponentBit(entityId, componentTypeId) {\n    const maskIndex = entityId * 2 + (componentTypeId >= 32 ? 1 : 0);\n    const bit = componentTypeId % 32;\n    this.entityComponentMask[maskIndex] &= ~(1 << bit);\n  }\n\n  /**\r\n   * Check if entity has component via bitmask\r\n   */\n  _hasComponentBit(entityId, componentTypeId) {\n    const maskIndex = entityId * 2 + (componentTypeId >= 32 ? 1 : 0);\n    const bit = componentTypeId % 32;\n    return (this.entityComponentMask[maskIndex] & 1 << bit) !== 0;\n  }\n\n  /**\r\n   * Get or create Float32Array for a numeric field\r\n   */\n  _getNumericArray(key) {\n    let arr = this._numericArrays.get(key);\n    if (!arr) {\n      arr = new Float32Array(this.MAX_ENTITIES);\n      this._numericArrays.set(key, arr);\n    }\n    return arr;\n  }\n\n  /**\r\n   * Get or create object storage array for a component type\r\n   */\n  _getObjectStorage(componentType) {\n    let storage = this._objectComponents.get(componentType);\n    if (!storage) {\n      storage = new Array(this.MAX_ENTITIES);\n      this._objectComponents.set(componentType, storage);\n    }\n    return storage;\n  }\n\n  /**\r\n   * Analyze a component schema to determine if it's all-numeric\r\n   * Returns { isNumeric: true, fields: ['field1', 'nested.field2'] } or { isNumeric: false }\r\n   * Numbers, booleans (stored as 0/1), enum strings, and arrays of enum values (bitmasks) are all considered numeric.\r\n   * @param {Object} schema - The component schema\r\n   * @param {Object|null} enumMap - The enum map if this component has enums\r\n   * @param {string} prefix - Path prefix for nested fields\r\n   */\n  _analyzeComponentSchema(schema, enumMap = null, prefix = '') {\n    const fields = [];\n    let isNumeric = true;\n    for (const key in schema) {\n      const value = schema[key];\n      const fieldPath = prefix ? `${prefix}.${key}` : key;\n      if (typeof value === 'number') {\n        fields.push(fieldPath);\n      } else if (typeof value === 'boolean') {\n        // Booleans stored as 0/1 in TypedArrays\n        fields.push(fieldPath);\n      } else if (value === null) {\n        // null fields stored as -Infinity in TypedArrays\n        fields.push(fieldPath);\n      } else if (typeof value === 'string' && enumMap && enumMap.toIndex.hasOwnProperty(value)) {\n        // String that will be converted to enum index - treat as numeric\n        fields.push(fieldPath);\n      } else if (Array.isArray(value) && enumMap) {\n        // Arrays of enum values will be converted to bitmask - treat as numeric\n        // Check if array contains enum values or \"all\"\n        const isEnumArray = value.every(item => item === 'all' || enumMap.toIndex.hasOwnProperty(item));\n        if (isEnumArray) {\n          fields.push(fieldPath);\n        } else {\n          isNumeric = false;\n          break;\n        }\n      } else if (value && typeof value === 'object' && !Array.isArray(value)) {\n        // Recursively check nested objects\n        const nested = this._analyzeComponentSchema(value, enumMap, fieldPath);\n        if (nested.isNumeric) {\n          fields.push(...nested.fields);\n        } else {\n          isNumeric = false;\n          break;\n        }\n      } else {\n        // String (non-enum), non-enum array, null, etc. - not purely numeric\n        isNumeric = false;\n        break;\n      }\n    }\n    return {\n      isNumeric,\n      fields\n    };\n  }\n\n  /**\r\n   * Register a component type and set up storage (TypedArrays for numeric, object array otherwise)\r\n   * Called when a component is first added\r\n   */\n  _setupComponentStorage(componentId, schema, enumMap = null) {\n    if (this._numericComponentInfo.has(componentId)) {\n      return; // Already set up\n    }\n    const analysis = this._analyzeComponentSchema(schema, enumMap);\n    // Cache both schemas for getComponent:\n    // - schema: expanded schema (used for TypedArray field enumeration)\n    // - originalSchema: preserves $fixedArray directives for array proxy creation\n    analysis.schema = schema;\n    analysis.originalSchema = this.componentGenerator.getOriginalSchema(componentId);\n    this._numericComponentInfo.set(componentId, analysis);\n    if (analysis.isNumeric) {\n      // Create TypedArrays for each field\n      for (const fieldPath of analysis.fields) {\n        const key = `${componentId}.${fieldPath}`;\n        this._getNumericArray(key);\n      }\n    }\n  }\n\n  /**\r\n   * Set a value in a numeric component's TypedArray storage\r\n   * Note: Caller should use _toStorageValue() if passing user-provided values\r\n   */\n  _setNumericField(componentId, entityId, fieldPath, value) {\n    const key = `${componentId}.${fieldPath}`;\n    const arr = this._numericArrays.get(key);\n    if (arr) {\n      arr[entityId] = value;\n    }\n  }\n\n  /**\r\n   * Get a value from a numeric component's TypedArray storage (internal)\r\n   * Converts -Infinity (null sentinel) back to null for API consumers\r\n   */\n  _getNumericField(componentId, entityId, fieldPath) {\n    const key = `${componentId}.${fieldPath}`;\n    const arr = this._numericArrays.get(key);\n    if (!arr) return undefined;\n    return this._fromStorageValue(arr[entityId]);\n  }\n\n  /**\r\n   * Get raw value from TypedArray storage without null conversion (for internal use)\r\n   */\n  _getRawNumericField(componentId, entityId, fieldPath) {\n    const key = `${componentId}.${fieldPath}`;\n    const arr = this._numericArrays.get(key);\n    return arr ? arr[entityId] : undefined;\n  }\n\n  /**\r\n   * Direct field read - bypasses proxy for maximum performance in hot paths\r\n   * Use for tight loops where proxy overhead matters (collision, pathfinding)\r\n   * @param {number} entityId - Entity ID\r\n   * @param {string} componentType - Component name (e.g., 'transform')\r\n   * @param {string} fieldPath - Dot-separated path (e.g., 'position.x')\r\n   * @returns {number|null} - Raw value, or null if field was null\r\n   * @example\r\n   * // Instead of: game.getComponent(id, 'transform').position.x\r\n   * const x = game.getField(id, 'transform', 'position.x');\r\n   */\n  getField(entityId, componentType, fieldPath) {\n    return this._getNumericField(componentType, entityId, fieldPath);\n  }\n\n  /**\r\n   * Direct field write - bypasses proxy for maximum performance in hot paths\r\n   * @param {number} entityId - Entity ID\r\n   * @param {string} componentType - Component name (e.g., 'transform')\r\n   * @param {string} fieldPath - Dot-separated path (e.g., 'position.x')\r\n   * @param {number|null} value - Value to set\r\n   * @example\r\n   * // Instead of: game.getComponent(id, 'transform').position.x = 100\r\n   * game.setField(id, 'transform', 'position.x', 100);\r\n   */\n  setField(entityId, componentType, fieldPath, value) {\n    this._setNumericField(componentType, entityId, fieldPath, this._toStorageValue(value));\n  }\n\n  /**\r\n   * Get direct references to TypedArrays for a component's fields.\r\n   * Use this for maximum performance in tight loops - avoids all proxy/function overhead.\r\n   *\r\n   * @param {string} componentType - Component name (e.g., 'transform')\r\n   * @param {string[]} fieldPaths - Array of field paths (e.g., ['position.x', 'position.y', 'position.z'])\r\n   * @returns {Object} Map of fieldPath -> Float32Array (or undefined if not found)\r\n   * @example\r\n   * // Get direct array access for transform position fields\r\n   * const arrays = game.getFieldArrays('transform', ['position.x', 'position.y', 'position.z']);\r\n   * // Now access directly: arrays['position.x'][entityId]\r\n   * for (const entityId of entities) {\r\n   *     const x = arrays['position.x'][entityId];\r\n   *     const y = arrays['position.y'][entityId];\r\n   *     const z = arrays['position.z'][entityId];\r\n   * }\r\n   */\n  getFieldArrays(componentType, fieldPaths) {\n    const result = {};\n    for (const fieldPath of fieldPaths) {\n      const key = `${componentType}.${fieldPath}`;\n      result[fieldPath] = this._numericArrays.get(key);\n    }\n    return result;\n  }\n\n  /**\r\n   * Get a single TypedArray for direct field access.\r\n   * Use in hot loops where you need to read/write many entities.\r\n   *\r\n   * @param {string} componentType - Component name\r\n   * @param {string} fieldPath - Field path (e.g., 'position.x')\r\n   * @returns {Float32Array|undefined} Direct array reference\r\n   * @example\r\n   * const posX = game.getFieldArray('transform', 'position.x');\r\n   * const posZ = game.getFieldArray('transform', 'position.z');\r\n   * for (const id of nearbyUnits) {\r\n   *     const dx = myX - posX[id];\r\n   *     const dz = myZ - posZ[id];\r\n   * }\r\n   */\n  getFieldArray(componentType, fieldPath) {\n    const key = `${componentType}.${fieldPath}`;\n    return this._numericArrays.get(key);\n  }\n\n  /**\r\n   * Read multiple fields from a component in one call - more efficient than multiple getField calls.\r\n   * Returns plain values (not a proxy), so it's a snapshot that won't track changes.\r\n   *\r\n   * @param {number} entityId - Entity ID\r\n   * @param {string} componentType - Component name\r\n   * @param {string[]} fieldPaths - Array of field paths to read\r\n   * @returns {Object} Map of fieldPath -> value\r\n   * @example\r\n   * const { 'position.x': x, 'position.z': z } = game.getFields(id, 'transform', ['position.x', 'position.z']);\r\n   */\n  getFields(entityId, componentType, fieldPaths) {\n    const result = {};\n    for (const fieldPath of fieldPaths) {\n      result[fieldPath] = this._getNumericField(componentType, entityId, fieldPath);\n    }\n    return result;\n  }\n\n  /**\r\n   * Write multiple fields to a component in one call.\r\n   *\r\n   * @param {number} entityId - Entity ID\r\n   * @param {string} componentType - Component name\r\n   * @param {Object} fieldValues - Map of fieldPath -> value\r\n   * @example\r\n   * game.setFields(id, 'velocity', { vx: 10, vy: 0, vz: 5 });\r\n   */\n  setFields(entityId, componentType, fieldValues) {\n    for (const fieldPath in fieldValues) {\n      this._setNumericField(componentType, entityId, fieldPath, this._toStorageValue(fieldValues[fieldPath]));\n    }\n  }\n\n  /**\r\n   * Check if a field value represents null/unset\r\n   * @param {number} value - Value from getField or direct TypedArray read\r\n   * @returns {boolean} - True if value represents null\r\n   */\n  isNull(value) {\n    return value === -Infinity || value === null;\n  }\n\n  // ============================================\n  // NULL SENTINEL CONVERSION UTILITIES\n  // ============================================\n  // TypedArrays can't store null, so we use -Infinity as a sentinel value.\n  // These methods provide consistent conversion at all boundaries:\n  //   - _toStorageValue / _fromStorageValue: for TypedArray read/write\n  //   - _toSyncValue / _fromSyncValue: for JSON serialization (sync)\n  // ============================================\n\n  /**\r\n   * Convert API value to TypedArray storage format\r\n   * null -> -Infinity (null sentinel), other values pass through\r\n   */\n  _toStorageValue(value) {\n    return value === null ? -Infinity : value;\n  }\n\n  /**\r\n   * Convert TypedArray storage value to API format\r\n   * -Infinity (null sentinel) -> null, other values pass through\r\n   */\n  _fromStorageValue(value) {\n    return value === -Infinity ? null : value;\n  }\n\n  /**\r\n   * Convert TypedArray storage value to JSON-safe format for sync\r\n   * -Infinity (null sentinel) -> null (JSON null), other values pass through\r\n   * Note: This is the same as _fromStorageValue since JSON uses null\r\n   */\n  _toSyncValue(value) {\n    return value === -Infinity ? null : value;\n  }\n\n  /**\r\n   * Convert JSON sync value back to TypedArray storage format\r\n   * null (JSON null) -> -Infinity (null sentinel), other values pass through\r\n   * Note: This is the same as _toStorageValue since JSON uses null\r\n   */\n  _fromSyncValue(value) {\n    return value === null ? -Infinity : value;\n  }\n\n  /**\r\n   * Write component data to TypedArrays (for numeric components)\r\n   * Handles numbers, booleans (as 0/1), and enum values (already converted to indices)\r\n   */\n  _writeNumericComponent(componentId, entityId, data, schema, prefix = '') {\n    for (const key in schema) {\n      const fieldPath = prefix ? `${prefix}.${key}` : key;\n      const schemaValue = schema[key];\n      let dataValue = prefix ? this._getNestedValue(data, fieldPath) : data[key];\n      if (typeof schemaValue === 'number' || typeof schemaValue === 'boolean' || typeof schemaValue === 'string') {\n        // Convert booleans to 0/1 for storage\n        if (typeof dataValue === 'boolean') {\n          dataValue = dataValue ? 1 : 0;\n        }\n        // Use default from schema if data value is undefined\n        if (dataValue === undefined) {\n          dataValue = typeof schemaValue === 'boolean' ? schemaValue ? 1 : 0 : schemaValue;\n        }\n        this._setNumericField(componentId, entityId, fieldPath, dataValue);\n      } else if (schemaValue === null) {\n        // null schema fields: use null sentinel as default\n        if (dataValue === undefined) {\n          dataValue = null;\n        }\n        this._setNumericField(componentId, entityId, fieldPath, this._toStorageValue(dataValue));\n      } else if (schemaValue && typeof schemaValue === 'object' && !Array.isArray(schemaValue)) {\n        this._writeNumericComponent(componentId, entityId, data, schemaValue, fieldPath);\n      }\n    }\n  }\n\n  /**\r\n   * Read component data from TypedArrays and return as proxy object\r\n   * Proxy reads/writes directly from TypedArrays on every access (no stale data)\r\n   * Proxies are cached per entity+component to avoid GC churn\r\n   */\n  _readNumericComponent(componentId, entityId, schema, prefix = '') {\n    // For top-level calls (no prefix), check proxy cache first\n    if (!prefix) {\n      let componentCache = this._proxyCache.get(componentId);\n      if (!componentCache) {\n        componentCache = new Map();\n        this._proxyCache.set(componentId, componentCache);\n      }\n      const cached = componentCache.get(entityId);\n      if (cached) {\n        return cached;\n      }\n      // Create and cache the proxy\n      const proxy = this._createComponentProxy(componentId, entityId, schema, '');\n      componentCache.set(entityId, proxy);\n      return proxy;\n    }\n    // Nested objects (with prefix) still create proxies but aren't cached separately\n    return this._createComponentProxy(componentId, entityId, schema, prefix);\n  }\n\n  /**\r\n   * Create a proxy that reads/writes directly from TypedArrays\r\n   * Every property access goes through the proxy traps for live data\r\n   */\n  _createComponentProxy(componentId, entityId, schema, prefix) {\n    const game = this;\n\n    // Build schema info for fast lookups\n    const schemaInfo = {};\n    for (const key in schema) {\n      const schemaValue = schema[key];\n      schemaInfo[key] = {\n        fieldPath: prefix ? `${prefix}.${key}` : key,\n        type: schemaValue === null ? 'null' : typeof schemaValue === 'boolean' ? 'boolean' : typeof schemaValue === 'number' || typeof schemaValue === 'string' ? 'number' : schemaValue && schemaValue.$fixedArray ? 'fixedArray' : schemaValue && schemaValue.$bitmask ? 'bitmask' : schemaValue && schemaValue.$enum ? 'enum' : schemaValue && typeof schemaValue === 'object' ? 'nested' : 'unknown',\n        schemaValue\n      };\n    }\n\n    // Cache for nested proxies (fixedArray, bitmask, nested objects)\n    const nestedCache = {};\n    return new Proxy({}, {\n      get(target, prop) {\n        // Support JSON.stringify\n        if (prop === 'toJSON') {\n          return () => {\n            const result = {};\n            for (const key in schemaInfo) {\n              const info = schemaInfo[key];\n              if (info.type === 'number' || info.type === 'enum') {\n                result[key] = game._getNumericField(componentId, entityId, info.fieldPath);\n              } else if (info.type === 'boolean') {\n                result[key] = game._getNumericField(componentId, entityId, info.fieldPath) !== 0;\n              } else if (info.type === 'null') {\n                result[key] = game._getNumericField(componentId, entityId, info.fieldPath);\n              } else if (info.type === 'fixedArray' || info.type === 'bitmask' || info.type === 'nested') {\n                // Trigger the getter to get the nested proxy, then toJSON it\n                const nested = nestedCache[key] || game._createNestedProxy(componentId, entityId, key, info, prefix);\n                result[key] = nested.toJSON ? nested.toJSON() : nested;\n              }\n            }\n            return result;\n          };\n        }\n        const info = schemaInfo[prop];\n        if (!info) return undefined;\n        if (info.type === 'number' || info.type === 'enum') {\n          return game._getNumericField(componentId, entityId, info.fieldPath);\n        } else if (info.type === 'boolean') {\n          return game._getNumericField(componentId, entityId, info.fieldPath) !== 0;\n        } else if (info.type === 'null') {\n          return game._getNumericField(componentId, entityId, info.fieldPath);\n        } else if (info.type === 'fixedArray' || info.type === 'bitmask' || info.type === 'nested') {\n          // Cache nested proxies to avoid recreation\n          if (!nestedCache[prop]) {\n            nestedCache[prop] = game._createNestedProxy(componentId, entityId, prop, info, prefix);\n          }\n          return nestedCache[prop];\n        }\n        return undefined;\n      },\n      set(target, prop, value) {\n        const info = schemaInfo[prop];\n        if (!info) return false;\n        let storedValue = value;\n        if (info.type === 'boolean') {\n          storedValue = value ? 1 : 0;\n        } else if (info.type === 'null') {\n          storedValue = game._toStorageValue(value);\n        }\n        if (info.type === 'number' || info.type === 'boolean' || info.type === 'null' || info.type === 'enum') {\n          game._setNumericField(componentId, entityId, info.fieldPath, storedValue);\n          return true;\n        }\n        return false;\n      },\n      ownKeys() {\n        return Object.keys(schemaInfo);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        if (prop in schemaInfo) {\n          return {\n            configurable: true,\n            enumerable: true\n          };\n        }\n        return undefined;\n      }\n    });\n  }\n\n  /**\r\n   * Create nested proxy for fixedArray, bitmask, or nested object\r\n   */\n  _createNestedProxy(componentId, entityId, key, info, prefix) {\n    if (info.type === 'fixedArray') {\n      return this._createFixedArrayProxy(componentId, entityId, key, info.schemaValue.$fixedArray, prefix);\n    } else if (info.type === 'bitmask') {\n      return this._createBitmaskProxy(componentId, entityId, key, info.schemaValue.$bitmask, prefix);\n    } else if (info.type === 'nested') {\n      return this._createComponentProxy(componentId, entityId, info.schemaValue, info.fieldPath);\n    }\n    return undefined;\n  }\n\n  /**\r\n   * Create an array-like proxy for $fixedArray fields\r\n   * Allows array[index] access that maps to individual TypedArray fields\r\n   */\n  _createFixedArrayProxy(componentId, entityId, baseName, config, prefix = '') {\n    const game = this;\n    // Support both static size and dynamic sizeFrom (enum-based)\n    let size = config.size || 0;\n    if (config.sizeFrom) {\n      const enumMap = this.componentGenerator.getEnumMap(config.sizeFrom);\n      size = enumMap?.toValue?.length || 0;\n    }\n    const fields = config.fields;\n    const fieldPrefix = prefix ? `${prefix}.${baseName}` : baseName;\n    if (fields && Array.isArray(fields)) {\n      // Multi-field array: each element is an object with the specified fields\n      // Fields stored as: baseName_field0, baseName_field1, etc.\n      return new Proxy({}, {\n        get(target, prop) {\n          if (prop === 'length') return size;\n          // Support JSON.stringify via toJSON\n          if (prop === 'toJSON') {\n            return () => {\n              const arr = [];\n              for (let i = 0; i < size; i++) {\n                const element = {};\n                for (const field of fields) {\n                  element[field] = game._getNumericField(componentId, entityId, `${fieldPrefix}_${field}${i}`);\n                }\n                arr[i] = element;\n              }\n              return arr;\n            };\n          }\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size) {\n            // Return object with all fields for this index\n            const element = {};\n            for (const field of fields) {\n              element[field] = game._getNumericField(componentId, entityId, `${fieldPrefix}_${field}${index}`);\n            }\n            // Return proxy for field writes\n            return new Proxy(element, {\n              set(t, f, v) {\n                t[f] = v;\n                game._setNumericField(componentId, entityId, `${fieldPrefix}_${f}${index}`, game._toStorageValue(v));\n                return true;\n              }\n            });\n          }\n          return undefined;\n        },\n        set(target, prop, value) {\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size && typeof value === 'object') {\n            for (const field of fields) {\n              if (value[field] !== undefined) {\n                game._setNumericField(componentId, entityId, `${fieldPrefix}_${field}${index}`, game._toStorageValue(value[field]));\n              }\n            }\n            return true;\n          }\n          return false;\n        },\n        ownKeys(target) {\n          const keys = [];\n          for (let i = 0; i < size; i++) {\n            keys.push(String(i));\n          }\n          return keys;\n        },\n        getOwnPropertyDescriptor(target, prop) {\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size) {\n            const element = {};\n            for (const field of fields) {\n              element[field] = game._getNumericField(componentId, entityId, `${fieldPrefix}_${field}${index}`);\n            }\n            return {\n              value: element,\n              writable: true,\n              enumerable: true,\n              configurable: true\n            };\n          }\n          return undefined;\n        }\n      });\n    } else {\n      // Simple array: baseName0, baseName1, etc.\n      return new Proxy({}, {\n        get(target, prop) {\n          if (prop === 'length') return size;\n          // Support JSON.stringify via toJSON\n          if (prop === 'toJSON') {\n            return () => {\n              const arr = [];\n              for (let i = 0; i < size; i++) {\n                arr[i] = game._getNumericField(componentId, entityId, `${fieldPrefix}${i}`);\n              }\n              return arr;\n            };\n          }\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size) {\n            return game._getNumericField(componentId, entityId, `${fieldPrefix}${index}`);\n          }\n          return undefined;\n        },\n        set(target, prop, value) {\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size) {\n            game._setNumericField(componentId, entityId, `${fieldPrefix}${index}`, game._toStorageValue(value));\n            return true;\n          }\n          return false;\n        },\n        ownKeys(target) {\n          // Return numeric indices as strings for JSON.stringify enumeration\n          const keys = [];\n          for (let i = 0; i < size; i++) {\n            keys.push(String(i));\n          }\n          return keys;\n        },\n        getOwnPropertyDescriptor(target, prop) {\n          const index = parseInt(prop, 10);\n          if (!isNaN(index) && index >= 0 && index < size) {\n            return {\n              value: game._getNumericField(componentId, entityId, `${fieldPrefix}${index}`),\n              writable: true,\n              enumerable: true,\n              configurable: true\n            };\n          }\n          return undefined;\n        }\n      });\n    }\n  }\n\n  /**\r\n   * Create a proxy for $bitmask fields\r\n   * Bitmask is stored as individual 32-bit fields (baseName0, baseName1, etc.)\r\n   * Returns a proxy object with helper methods: has(id), add(id), remove(id), toArray()\r\n   * Also supports direct numeric operations for backwards compatibility\r\n   */\n  _createBitmaskProxy(componentId, entityId, baseName, config, prefix = '') {\n    const game = this;\n    let bitCount;\n    let enumMap = null;\n    if (config.sizeFrom) {\n      enumMap = this.componentGenerator.getEnumMap(config.sizeFrom);\n      bitCount = enumMap?.toValue?.length || 32;\n    } else {\n      bitCount = config.size || 32;\n    }\n    const fieldCount = Math.ceil(bitCount / 32);\n    const fieldPrefix = prefix ? `${prefix}.${baseName}` : baseName;\n\n    // Helper to get index from string ID or number\n    const getIndex = id => {\n      if (typeof id === 'number') return id;\n      if (typeof id === 'string' && enumMap) {\n        return enumMap.toIndex[id];\n      }\n      return undefined;\n    };\n\n    // Helper functions for reading/writing individual 32-bit fields\n    const getFieldValue = fieldIdx => game._getNumericField(componentId, entityId, `${fieldPrefix}${fieldIdx}`) || 0;\n    const setFieldValue = (fieldIdx, val) => game._setNumericField(componentId, entityId, `${fieldPrefix}${fieldIdx}`, val);\n\n    // Create bitmask object with helper methods (works for both single and multi-field)\n    return {\n      // Check if bitmask has a specific bit set\n      has(id) {\n        const index = getIndex(id);\n        if (index === undefined) return false;\n        const fieldIdx = Math.floor(index / 32);\n        const bitIdx = index % 32;\n        return (getFieldValue(fieldIdx) & 1 << bitIdx) !== 0;\n      },\n      // Add a bit to the bitmask\n      add(id) {\n        const index = getIndex(id);\n        if (index === undefined) return false;\n        const fieldIdx = Math.floor(index / 32);\n        const bitIdx = index % 32;\n        setFieldValue(fieldIdx, getFieldValue(fieldIdx) | 1 << bitIdx);\n        return true;\n      },\n      // Remove a bit from the bitmask\n      remove(id) {\n        const index = getIndex(id);\n        if (index === undefined) return false;\n        const fieldIdx = Math.floor(index / 32);\n        const bitIdx = index % 32;\n        setFieldValue(fieldIdx, getFieldValue(fieldIdx) & ~(1 << bitIdx));\n        return true;\n      },\n      // Toggle a bit in the bitmask\n      toggle(id) {\n        const index = getIndex(id);\n        if (index === undefined) return false;\n        const fieldIdx = Math.floor(index / 32);\n        const bitIdx = index % 32;\n        setFieldValue(fieldIdx, getFieldValue(fieldIdx) ^ 1 << bitIdx);\n        return true;\n      },\n      // Get array of all set IDs (strings if enumMap exists, otherwise indices)\n      toArray() {\n        const result = [];\n        for (let i = 0; i < bitCount; i++) {\n          const fieldIdx = Math.floor(i / 32);\n          const bitIdx = i % 32;\n          if ((getFieldValue(fieldIdx) & 1 << bitIdx) !== 0) {\n            result.push(enumMap ? enumMap.toValue[i] : i);\n          }\n        }\n        return result;\n      },\n      // Clear all bits\n      clear() {\n        for (let i = 0; i < fieldCount; i++) {\n          setFieldValue(i, 0);\n        }\n      },\n      // For JSON serialization - returns raw numeric value(s)\n      toJSON() {\n        if (fieldCount === 1) {\n          return getFieldValue(0);\n        }\n        const arr = [];\n        for (let i = 0; i < fieldCount; i++) {\n          arr[i] = getFieldValue(i);\n        }\n        return arr;\n      }\n    };\n  }\n\n  /**\r\n   * Get a nested value from an object using dot notation path\r\n   */\n  _getNestedValue(obj, path) {\n    const parts = path.split('.');\n    let current = obj;\n    for (const part of parts) {\n      if (current === undefined || current === null) return undefined;\n      current = current[part];\n    }\n    return current;\n  }\n\n  // Service registry methods (delegated to GameServices)\n  register(key, method) {\n    this._services.register(key, method);\n  }\n  hasService(key) {\n    return this._services.has(key);\n  }\n  call(key, ...args) {\n    const result = this._services.call(key, ...args);\n    if (this.callLogger) {\n      this.callLogger.log(key, args, result, this.state.now);\n    }\n    return result;\n  }\n  listServices() {\n    return this._services.listServices();\n  }\n  async init(isServer = false, config) {\n    this.isServer = isServer;\n    if (!this.isServer) {\n      document.addEventListener('keydown', e => {\n        this.triggerEvent('onKeyDown', e.key);\n      });\n    }\n    await this.loadGameScripts(config);\n  }\n  async loadGameScripts(config, options = {}) {\n    this.collections = this.getCollections();\n    this.gameConfig = config ? config : this.isServer ? this.collections.configs.server : this.collections.configs.game;\n\n    // Initialize SceneManager (handles lazy system instantiation)\n    this.sceneManager = new GUTS.SceneManager(this);\n\n    // Store available system types for lazy instantiation\n    this.availableSystemTypes = this.gameConfig.systems || [];\n    // Map to track instantiated systems by name\n    this.systemsByName = new Map();\n\n    // Load initial scene if configured (skip for editors that manage scene loading explicitly)\n    if (!options.skipInitialScene) {\n      await this.loadInitialScene();\n    }\n  }\n\n  /**\r\n   * Load the initial scene from game config\r\n   * @returns {Promise<void>}\r\n   */\n  async loadInitialScene() {\n    const initialScene = this.gameConfig.initialScene;\n    if (initialScene && this.sceneManager) {\n      await this.sceneManager.loadScene(initialScene);\n    } else {\n      console.warn('[BaseECSGame] No initialScene configured in game config');\n    }\n  }\n\n  /**\r\n   * Get or create a system by name (lazy instantiation)\r\n   * @param {string} systemName - The system class name\r\n   * @returns {Object|null} The system instance or null if not available\r\n   */\n  getOrCreateSystem(systemName) {\n    // Check if already instantiated\n    if (this.systemsByName.has(systemName)) {\n      return this.systemsByName.get(systemName);\n    }\n\n    // Check if this system type is available (skip check if no whitelist defined)\n    if (this.availableSystemTypes.length > 0 && !this.availableSystemTypes.includes(systemName)) {\n      console.warn(`[BaseECSGame] System '${systemName}' not in available systems list`);\n      return null;\n    }\n\n    // Check if the class exists\n    if (!GUTS[systemName]) {\n      console.error(`[BaseECSGame] System class '${systemName}' not found in GUTS`);\n      return null;\n    }\n\n    // Create the system\n    const params = {\n      canvas: this.canvas\n    };\n    const systemInst = new GUTS[systemName](this);\n    systemInst.enabled = false;\n\n    // Auto-register services from static services array\n    const SystemClass = GUTS[systemName];\n    if (SystemClass.services && Array.isArray(SystemClass.services)) {\n      for (const serviceName of SystemClass.services) {\n        if (typeof systemInst[serviceName] === 'function') {\n          this.register(serviceName, systemInst[serviceName].bind(systemInst));\n        } else {\n          console.warn(`[BaseECSGame] Service '${serviceName}' not found on ${systemName}`);\n        }\n      }\n    }\n    if (systemInst.init) {\n      systemInst.init(params);\n    }\n\n    // Add to tracking\n    this.systems.push(systemInst);\n    this.systemsByName.set(systemName, systemInst);\n    return systemInst;\n  }\n\n  /**\r\n   * Check if a system is available (defined in config)\r\n   * @param {string} systemName - The system class name\r\n   * @returns {boolean}\r\n   */\n  isSystemAvailable(systemName) {\n    return this.availableSystemTypes.includes(systemName);\n  }\n\n  /**\r\n   * Switch to a different scene\r\n   * @param {string} sceneName - Name of the scene to load\r\n   * @returns {Promise<void>}\r\n   */\n  async switchScene(sceneName) {\n    if (this.sceneManager) {\n      await this.sceneManager.switchScene(sceneName);\n    }\n  }\n  getEntityId() {\n    // Never recycle entity IDs - always use fresh IDs\n    // This prevents bugs where cached entity references (lastAttacker, target, etc.)\n    // accidentally point to completely different entities after ID reuse\n    // Memory cost is negligible - typed arrays grow as needed\n    if (this.nextEntityId >= this.MAX_ENTITIES) {\n      throw new Error(`Maximum entity limit (${this.MAX_ENTITIES}) reached`);\n    }\n    return this.nextEntityId++;\n  }\n  getCollections() {\n    return this.app.getCollections();\n  }\n  async update(deltaTime) {\n    // Memory leak debug logging - logs cache sizes every 5 seconds\n    if (!this._memoryDebugLastLog) this._memoryDebugLastLog = 0;\n    if (this.currentTime - this._memoryDebugLastLog >= 5) {\n      this._memoryDebugLastLog = this.currentTime;\n      const stats = {\n        queryCache: this._queryCache?.size || 0,\n        proxyCache: this._proxyCache?.size || 0,\n        entityCount: this.entityCount || 0\n      };\n      // Collect stats from systems\n      for (const system of this.systems) {\n        if (system._entityPositionCache) stats.renderPosCache = system._entityPositionCache.size;\n        if (system._unitPositions) stats.fowUnitPos = system._unitPositions.size;\n        if (system._losCache) stats.losCache = system._losCache.size;\n        if (system.spawnedEntities) stats.spawned = system.spawnedEntities.size;\n        if (system.projectileTrails) stats.trails = system.projectileTrails.size;\n        if (system.healthBars) stats.healthBars = system.healthBars.size;\n        if (system.damageNumbers) stats.dmgNums = system.damageNumbers.length;\n        if (system.activeEffects) stats.effects = system.activeEffects.length;\n        if (system.entityBehaviorState) stats.behaviors = system.entityBehaviorState.size;\n        if (system._unitDataPool) stats.mvmtPool = system._unitDataPool.length;\n      }\n      console.log('[Memory]', Object.entries(stats).map(([k, v]) => `${k}: ${v}`).join(', '));\n    }\n    if (!this.state.isPaused) {\n      // Start performance frame tracking\n      if (this.performanceMonitor) {\n        this.performanceMonitor.startFrame();\n      }\n\n      // Use tick count based timing to avoid floating-point accumulation errors\n      this.tickCount++;\n      // Use deltaTime from Engine (respects tickRate config)\n      // Round to 2 decimal places to avoid floating-point precision issues\n      // (e.g., 3 * 0.05 = 0.15000000000000002 in JavaScript)\n      this.currentTime = Math.round(this.tickCount * deltaTime * 100) / 100;\n\n      // Only update if a reasonable amount of time has passed\n      // const timeSinceLastUpdate = this.currentTime - this.lastTime;\n\n      // // Skip update if more than 1 second has passed (tab was inactive)\n      // if (timeSinceLastUpdate > 1000) {\n      //     this.lastTime = this.currentTime; // Reset timer without updating\n      //     return;\n      // }\n      this.state.now = this.currentTime;\n      // Use deltaTime from Engine (which respects tickRate config)\n      this.state.deltaTime = deltaTime;\n      this.deltaTime = deltaTime;\n      for (const system of this.systems) {\n        // Skip disabled systems\n        if (!system.enabled) continue;\n        const systemName = system.constructor.name;\n\n        // Start tracking this system\n        if (this.performanceMonitor) {\n          this.performanceMonitor.startSystem(systemName);\n        }\n        if (system.update) {\n          await system.update();\n        }\n\n        // End update tracking\n        if (this.performanceMonitor) {\n          this.performanceMonitor.endSystemUpdate(systemName);\n        }\n        if (system.render && !this.isServer) {\n          // Start render tracking\n          if (this.performanceMonitor) {\n            this.performanceMonitor.startSystemRender(systemName);\n          }\n          await system.render();\n\n          // End render tracking\n          if (this.performanceMonitor) {\n            this.performanceMonitor.endSystemRender(systemName);\n          }\n        } else if (this.performanceMonitor) {\n          // If no render, still need to end the system tracking\n          this.performanceMonitor.startSystemRender(systemName);\n          this.performanceMonitor.endSystemRender(systemName);\n        }\n      }\n\n      // Update performance overlay\n      if (this.performanceMonitor) {\n        this.performanceMonitor.updateOverlay();\n      }\n      this.postUpdate();\n    }\n  }\n  postUpdate() {\n    // this.desyncDebugger?.displaySync(false); \n\n    this.lastTime = this.currentTime;\n    this.entitiesToAdd.forEach(entity => this.addEntity(entity));\n    this.entitiesToAdd = [];\n  }\n  createEntity(setId) {\n    const id = setId !== undefined && setId !== null ? setId : this.getEntityId();\n    // Log if overwriting existing entity - this is a bug!\n    if (this.entityAlive[id]) {\n      console.error(`[BaseECSGame] createEntity called for existing entity ${id}!`);\n      console.trace('createEntity called from:');\n    }\n    // Mark entity as alive\n    this.entityAlive[id] = 1;\n    // Clear component bitmask\n    this.entityComponentMask[id * 2] = 0;\n    this.entityComponentMask[id * 2 + 1] = 0;\n    this.entityCount++;\n    // When using a specific ID, ensure nextEntityId is always higher\n    // This is critical for getEntitiesWith() which iterates up to nextEntityId\n    if (id >= this.nextEntityId) {\n      this.nextEntityId = id + 1;\n    }\n    return id;\n  }\n  destroyEntity(entityId) {\n    if (!this.entityAlive[entityId]) return;\n\n    // Notify systems\n    for (let i = 0; i < this.systems.length; i++) {\n      const system = this.systems[i];\n      if (system.entityDestroyed) {\n        system.entityDestroyed(entityId);\n      }\n    }\n\n    // Clear component data from object storage\n    for (const [componentType, storage] of this._objectComponents) {\n      if (storage[entityId] !== undefined) {\n        storage[entityId] = undefined;\n      }\n    }\n\n    // Clear cached proxies for this entity\n    for (const [, componentCache] of this._proxyCache) {\n      componentCache.delete(entityId);\n    }\n\n    // Note: TypedArray numeric data doesn't need clearing -\n    // the bitmask ensures it won't be read\n\n    // Mark entity as dead (no ID recycling - IDs are never reused)\n    this.entityAlive[entityId] = 0;\n    this.entityComponentMask[entityId * 2] = 0;\n    this.entityComponentMask[entityId * 2 + 1] = 0;\n    this.entityCount--;\n\n    // Invalidate query cache - entity was destroyed, cached query results are stale\n    this._queryCache.clear();\n  }\n  addComponent(entityId, componentId, data) {\n    if (!this.entityAlive[entityId]) {\n      throw new Error(`Entity ${entityId} does not exist`);\n    }\n    const componentMethods = this.call('getComponents');\n    if (!componentMethods[componentId]) {\n      console.warn(`[BaseECSGame] No component factory for '${componentId}'. Add it to the components collection.`);\n    }\n\n    // Use factory function if available, otherwise use data directly as fallback\n    const componentData = componentMethods[componentId] ? componentMethods[componentId](data) : {\n      ...data\n    };\n\n    // Get component type ID and set bitmask\n    const typeId = this._getComponentTypeId(componentId);\n    this._setComponentBit(entityId, typeId);\n\n    // Set up storage on first encounter (analyzes schema for numeric optimization)\n    const schema = this.call('getComponentSchema', componentId);\n    const enumMap = this.hasService('getEnumMap') ? this.call('getEnumMap', componentId) : null;\n    if (schema) {\n      this._setupComponentStorage(componentId, schema, enumMap);\n    }\n\n    // Check if this is a numeric component (use TypedArrays) or object component\n    const componentInfo = this._numericComponentInfo.get(componentId);\n    if (componentInfo && componentInfo.isNumeric && schema) {\n      // Store in TypedArrays\n      this._writeNumericComponent(componentId, entityId, componentData, schema);\n    } else {\n      // Store in object storage (indexed by entity ID)\n      const storage = this._getObjectStorage(componentId);\n      storage[entityId] = componentData;\n    }\n\n    // Invalidate query cache - component was added, cached query results are stale\n    this._queryCache.clear();\n  }\n\n  /**\r\n   * OPTIMIZATION: Add multiple components at once with single cache invalidation\r\n   * @param {*} entityId - Entity ID\r\n   * @param {Object} componentsData - Object mapping componentId -> data\r\n   */\n  addComponents(entityId, componentsData) {\n    if (!this.entityAlive[entityId]) {\n      throw new Error(`Entity ${entityId} does not exist`);\n    }\n    const componentMethods = this.call('getComponents');\n    const hasEnumService = this.hasService('getEnumMap');\n    for (const [componentId, data] of Object.entries(componentsData)) {\n      // Use factory function if available, otherwise use data directly\n      const componentData = componentMethods[componentId] ? componentMethods[componentId](data) : {\n        ...data\n      };\n\n      // Get component type ID and set bitmask\n      const typeId = this._getComponentTypeId(componentId);\n      this._setComponentBit(entityId, typeId);\n\n      // Set up storage on first encounter (analyzes schema for numeric optimization)\n      const schema = this.call('getComponentSchema', componentId);\n      const enumMap = hasEnumService ? this.call('getEnumMap', componentId) : null;\n      if (schema) {\n        this._setupComponentStorage(componentId, schema, enumMap);\n      }\n\n      // Check if this is a numeric component (use TypedArrays) or object component\n      const componentInfo = this._numericComponentInfo.get(componentId);\n      if (componentInfo && componentInfo.isNumeric && schema) {\n        // Store in TypedArrays\n        this._writeNumericComponent(componentId, entityId, componentData, schema);\n      } else {\n        // Store in object storage\n        const storage = this._getObjectStorage(componentId);\n        storage[entityId] = componentData;\n      }\n    }\n\n    // Single cache invalidation for all components\n    this._queryCache.clear();\n  }\n  removeComponent(entityId, componentType) {\n    if (!this.entityAlive[entityId]) return null;\n    const component = this.getComponent(entityId, componentType);\n    if (component === undefined) return null;\n\n    // Clear bitmask\n    const typeId = this._componentTypeId.get(componentType);\n    if (typeId !== undefined) {\n      this._clearComponentBit(entityId, typeId);\n    }\n\n    // Clear object storage\n    const storage = this._objectComponents.get(componentType);\n    if (storage) {\n      storage[entityId] = undefined;\n    }\n\n    // Clear cached proxy for this entity+component\n    const componentCache = this._proxyCache.get(componentType);\n    if (componentCache) {\n      componentCache.delete(entityId);\n    }\n\n    // Invalidate query cache - component was removed, cached query results are stale\n    this._queryCache.clear();\n    return component;\n  }\n  getComponent(entityId, componentType) {\n    // Fast path: check bitmask first\n    const typeId = this._componentTypeId.get(componentType);\n    if (typeId === undefined) return undefined;\n    if (!this._hasComponentBit(entityId, typeId)) return undefined;\n\n    // Check if this is a numeric component (stored in TypedArrays)\n    const componentInfo = this._numericComponentInfo.get(componentType);\n    if (componentInfo && componentInfo.isNumeric && componentInfo.schema) {\n      // Use original schema to preserve $fixedArray info for array proxy creation\n      const schema = componentInfo.originalSchema || componentInfo.schema;\n      return this._readNumericComponent(componentType, entityId, schema);\n    }\n\n    // Get from object storage\n    const storage = this._objectComponents.get(componentType);\n    return storage ? storage[entityId] : undefined;\n  }\n\n  /**\r\n   * Serialize a component for network sync\r\n   * Uses getComponent (which returns proxies with toJSON support)\r\n   * Returns a plain object suitable for JSON serialization\r\n   */\n  serializeComponent(entityId, componentType) {\n    const component = this.getComponent(entityId, componentType);\n    if (!component) return null;\n    // JSON.parse(JSON.stringify) converts proxy to plain object\n    // The proxy's toJSON methods handle $fixedArray serialization\n    return JSON.parse(JSON.stringify(component));\n  }\n\n  /**\r\n   * Get ECS data for network sync\r\n   * @param {boolean} fullSync - If true, sends full state and resets delta tracking.\r\n   *                             If false, sends only changes since last sync.\r\n   * Returns sparse format to minimize payload size\r\n   * Format: {\r\n   *   fullSync: boolean,  // true if this is a full state sync\r\n   *   entityAlive: { entityId: 1, ... },  // sparse: only alive entities (or changed)\r\n   *   entityDead: [entityId, ...],  // only in delta: entities that died since last sync\r\n   *   entityComponentMask: { entityId: [low, high], ... },  // sparse: only entities with components (or changed)\r\n   *   numericArrays: { key: { entityId: value, ... } },  // sparse: only non-zero/non-null values (or changed)\r\n   *   objectComponents: { componentType: { entityId: data } },\r\n   *   nextEntityId: number\r\n   * }\r\n   */\n  getECSData(fullSync = true) {\n    const maxEntity = this.nextEntityId;\n    const lastState = this._lastSyncedState;\n\n    // If fullSync or no previous state, send everything\n    if (fullSync || !lastState) {\n      const result = this._getFullECSData(maxEntity);\n      result.fullSync = true;\n      // Store current state for future delta calculations\n      this._lastSyncedState = this._captureStateSnapshot(maxEntity);\n      return result;\n    }\n\n    // Delta sync - only send what changed\n    return this._getDeltaECSData(maxEntity, lastState);\n  }\n\n  /**\r\n   * Get full ECS state (sparse format)\r\n   */\n  _getFullECSData(maxEntity) {\n    const result = {\n      nextEntityId: this.nextEntityId,\n      entityAlive: {},\n      entityComponentMask: {},\n      numericArrays: {},\n      objectComponents: {}\n    };\n\n    // Sparse entityAlive - only include alive entities (value = 1)\n    for (let i = 0; i < maxEntity; i++) {\n      if (this.entityAlive[i] === 1) {\n        result.entityAlive[i] = 1;\n      }\n    }\n\n    // Sparse entityComponentMask - only include entities with components\n    // Stored as [low, high] pairs for the two 32-bit parts\n    for (let i = 0; i < maxEntity; i++) {\n      const low = this.entityComponentMask[i * 2];\n      const high = this.entityComponentMask[i * 2 + 1];\n      if (low !== 0 || high !== 0) {\n        result.entityComponentMask[i] = [low, high];\n      }\n    }\n\n    // Include numeric arrays in sparse format (only non-zero, non-null values)\n    // ALSO include zeros that changed FROM non-zero (to ensure clients reset them)\n    // Skip client-only components\n    const lastState = this._lastSyncedState;\n    for (const [key, arr] of this._numericArrays) {\n      // key format is \"componentType.fieldPath\" - extract component type\n      const componentType = key.split('.')[0];\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue; // Skip client-only components\n      }\n      const lastArr = lastState?.numericArrays?.get(key);\n      const lastMaxEntity = lastState?.nextEntityId || 0;\n      const sparse = {};\n      for (let i = 0; i < maxEntity; i++) {\n        const val = arr[i];\n        // Only check lastArr within its bounds\n        const lastVal = lastArr && i < lastMaxEntity ? lastArr[i] : 0;\n        // Include non-zero values\n        // Also include zeros if they were previously non-zero (value changed to 0)\n        if (val !== 0 || lastVal !== 0 && val === 0) {\n          sparse[i] = this._toSyncValue(val);\n        }\n      }\n      // Only include if there are any values\n      if (Object.keys(sparse).length > 0) {\n        result.numericArrays[key] = sparse;\n      }\n    }\n\n    // Include object components - skip client-only\n    for (const [componentType, storage] of this._objectComponents) {\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      const componentData = {};\n      for (let i = 0; i < maxEntity; i++) {\n        if (storage[i] !== undefined) {\n          componentData[i] = storage[i];\n        }\n      }\n      if (Object.keys(componentData).length > 0) {\n        result.objectComponents[componentType] = componentData;\n      }\n    }\n    return result;\n  }\n\n  /**\r\n   * Capture a snapshot of current state for delta comparison\r\n   */\n  _captureStateSnapshot(maxEntity) {\n    const snapshot = {\n      nextEntityId: this.nextEntityId,\n      entityAlive: new Uint8Array(maxEntity),\n      entityComponentMask: new Uint32Array(maxEntity * 2),\n      numericArrays: new Map(),\n      objectComponents: new Map()\n    };\n\n    // Copy entityAlive\n    snapshot.entityAlive.set(this.entityAlive.subarray(0, maxEntity));\n\n    // Copy entityComponentMask\n    snapshot.entityComponentMask.set(this.entityComponentMask.subarray(0, maxEntity * 2));\n\n    // Copy numeric arrays\n    for (const [key, arr] of this._numericArrays) {\n      snapshot.numericArrays.set(key, new Float32Array(arr.subarray(0, maxEntity)));\n    }\n\n    // Deep copy object components\n    for (const [componentType, storage] of this._objectComponents) {\n      const copy = new Array(maxEntity);\n      for (let i = 0; i < maxEntity; i++) {\n        if (storage[i] !== undefined) {\n          copy[i] = JSON.parse(JSON.stringify(storage[i]));\n        }\n      }\n      snapshot.objectComponents.set(componentType, copy);\n    }\n    return snapshot;\n  }\n\n  /**\r\n   * Get delta ECS data - only changes since last sync\r\n   */\n  _getDeltaECSData(maxEntity, lastState) {\n    const result = {\n      fullSync: false,\n      nextEntityId: this.nextEntityId,\n      entityAlive: {},\n      entityDead: [],\n      entityComponentMask: {},\n      numericArrays: {},\n      objectComponents: {}\n    };\n    const lastMaxEntity = lastState.nextEntityId;\n\n    // Check entityAlive changes\n    for (let i = 0; i < maxEntity; i++) {\n      const current = this.entityAlive[i];\n      const previous = i < lastMaxEntity ? lastState.entityAlive[i] : 0;\n      if (current !== previous) {\n        if (current === 1) {\n          result.entityAlive[i] = 1; // Entity became alive\n        } else {\n          result.entityDead.push(i); // Entity died\n        }\n      }\n    }\n\n    // Check entityComponentMask changes\n    for (let i = 0; i < maxEntity; i++) {\n      const lowCurrent = this.entityComponentMask[i * 2];\n      const highCurrent = this.entityComponentMask[i * 2 + 1];\n      const lowPrev = i < lastMaxEntity ? lastState.entityComponentMask[i * 2] : 0;\n      const highPrev = i < lastMaxEntity ? lastState.entityComponentMask[i * 2 + 1] : 0;\n      if (lowCurrent !== lowPrev || highCurrent !== highPrev) {\n        result.entityComponentMask[i] = [lowCurrent, highCurrent];\n      }\n    }\n\n    // Check numeric array changes - skip client-only components\n    for (const [key, arr] of this._numericArrays) {\n      const componentType = key.split('.')[0];\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      const lastArr = lastState.numericArrays.get(key);\n      const sparse = {};\n      for (let i = 0; i < maxEntity; i++) {\n        const current = arr[i];\n        const previous = lastArr && i < lastMaxEntity ? lastArr[i] : 0;\n        if (current !== previous) {\n          // Include the new value (even if 0 or -Infinity, since it changed)\n          sparse[i] = this._toSyncValue(current);\n        }\n      }\n      if (Object.keys(sparse).length > 0) {\n        result.numericArrays[key] = sparse;\n      }\n    }\n\n    // Check object component changes - skip client-only\n    for (const [componentType, storage] of this._objectComponents) {\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      const lastStorage = lastState.objectComponents.get(componentType);\n      const componentData = {};\n      for (let i = 0; i < maxEntity; i++) {\n        const current = storage[i];\n        const previous = lastStorage ? lastStorage[i] : undefined;\n\n        // Check if changed (simple JSON comparison)\n        const currentStr = current !== undefined ? JSON.stringify(current) : undefined;\n        const previousStr = previous !== undefined ? JSON.stringify(previous) : undefined;\n        if (currentStr !== previousStr) {\n          if (current !== undefined) {\n            componentData[i] = current;\n          } else {\n            // Mark as removed with null\n            componentData[i] = null;\n          }\n        }\n      }\n      if (Object.keys(componentData).length > 0) {\n        result.objectComponents[componentType] = componentData;\n      }\n    }\n\n    // Remove empty arrays/objects from result\n    if (result.entityDead.length === 0) delete result.entityDead;\n    if (Object.keys(result.entityAlive).length === 0) delete result.entityAlive;\n    if (Object.keys(result.entityComponentMask).length === 0) delete result.entityComponentMask;\n    if (Object.keys(result.numericArrays).length === 0) delete result.numericArrays;\n    if (Object.keys(result.objectComponents).length === 0) delete result.objectComponents;\n\n    // Update snapshot for next delta\n    this._lastSyncedState = this._captureStateSnapshot(maxEntity);\n    return result;\n  }\n\n  /**\r\n   * Reset delta tracking - call this when you want the next sync to be a full sync\r\n   */\n  resetSyncState() {\n    this._lastSyncedState = null;\n  }\n\n  /**\r\n   * Capture a checksum of the current ECS state for determinism validation.\r\n   * Used to verify that client and server simulations are in sync.\r\n   *\r\n   * The checksum includes:\r\n   * - All alive entity IDs\r\n   * - All component bitmasks\r\n   * - All numeric component data (TypedArrays)\r\n   * - Current tick count\r\n   *\r\n   * @returns {Object} { checksum: number, tickCount: number, entityCount: number }\r\n   */\n  captureStateChecksum() {\n    // Simple but effective hash function (djb2 variant)\n    let hash = 5381;\n    const addToHash = value => {\n      // Handle different value types\n      if (typeof value === 'number') {\n        // Convert to integer bits for consistent hashing\n        // Use DataView for proper float-to-int conversion\n        if (!this._checksumBuffer) {\n          this._checksumBuffer = new ArrayBuffer(8);\n          this._checksumView = new DataView(this._checksumBuffer);\n        }\n        this._checksumView.setFloat64(0, value, true);\n        const low = this._checksumView.getUint32(0, true);\n        const high = this._checksumView.getUint32(4, true);\n        hash = (hash << 5) + hash + low >>> 0;\n        hash = (hash << 5) + hash + high >>> 0;\n      } else {\n        hash = (hash << 5) + hash + (value | 0) >>> 0;\n      }\n    };\n    const maxEntity = this.nextEntityId;\n\n    // Hash tick count for temporal sync verification\n    addToHash(this.tickCount);\n\n    // Hash all alive entities and their component masks\n    for (let entityId = 1; entityId < maxEntity; entityId++) {\n      if (!this.entityAlive[entityId]) continue;\n      addToHash(entityId);\n      addToHash(this.entityComponentMask[entityId * 2]);\n      addToHash(this.entityComponentMask[entityId * 2 + 1]);\n    }\n\n    // Hash all numeric component data (deterministic order via sorted keys)\n    const sortedKeys = Array.from(this._numericArrays.keys()).sort();\n    for (const key of sortedKeys) {\n      // Skip client-only components\n      const componentType = key.split('.')[0];\n      if (this._clientOnlyComponents.has(componentType)) continue;\n      const arr = this._numericArrays.get(key);\n      for (let entityId = 1; entityId < maxEntity; entityId++) {\n        if (!this.entityAlive[entityId]) continue;\n        // Only hash if entity has this component\n        const typeId = this._componentTypeId.get(componentType);\n        if (typeId !== undefined && this._hasComponentBit(entityId, typeId)) {\n          addToHash(arr[entityId]);\n        }\n      }\n    }\n    return {\n      checksum: hash,\n      tickCount: this.tickCount,\n      entityCount: this.entityCount\n    };\n  }\n\n  /**\r\n   * Compare two state checksums for determinism validation.\r\n   * Logs detailed info if mismatch detected.\r\n   *\r\n   * @param {Object} localState - Local checksum from captureStateChecksum()\r\n   * @param {Object} remoteState - Remote checksum from captureStateChecksum()\r\n   * @returns {boolean} True if states match, false if desync detected\r\n   */\n  validateStateSync(localState, remoteState) {\n    if (localState.tickCount !== remoteState.tickCount) {\n      console.warn(`[Desync] Tick mismatch: local=${localState.tickCount}, remote=${remoteState.tickCount}`);\n      return false;\n    }\n    if (localState.entityCount !== remoteState.entityCount) {\n      console.warn(`[Desync] Entity count mismatch at tick ${localState.tickCount}: local=${localState.entityCount}, remote=${remoteState.entityCount}`);\n      return false;\n    }\n    if (localState.checksum !== remoteState.checksum) {\n      console.warn(`[Desync] State checksum mismatch at tick ${localState.tickCount}: local=${localState.checksum}, remote=${remoteState.checksum}`);\n      return false;\n    }\n    return true;\n  }\n\n  /**\r\n   * Apply ECS data from server (handles both full sync and delta sync)\r\n   */\n  applyECSData(data) {\n    // Check if this is a full sync or delta sync\n    if (data.fullSync !== false) {\n      this._applyFullECSData(data);\n    } else {\n      this._applyDeltaECSData(data);\n    }\n\n    // Common cleanup for both sync types\n    this._finalizeECSSync(data);\n  }\n\n  /**\r\n   * Apply full ECS sync - replaces all state\r\n   */\n  _applyFullECSData(data) {\n    const maxEntity = data.nextEntityId || this.nextEntityId;\n\n    // Clear and apply entity alive flags from sparse format\n    this.entityAlive.fill(0, 0, maxEntity);\n    if (data.entityAlive) {\n      for (const entityIdStr of Object.keys(data.entityAlive)) {\n        this.entityAlive[parseInt(entityIdStr, 10)] = 1;\n      }\n    }\n\n    // Build bitmask for client-only components to preserve\n    let clientOnlyMaskLow = 0;\n    let clientOnlyMaskHigh = 0;\n    for (const componentType of this._clientOnlyComponents) {\n      const typeId = this._componentTypeId.get(componentType);\n      if (typeId !== undefined) {\n        if (typeId < 32) {\n          clientOnlyMaskLow |= 1 << typeId;\n        } else {\n          clientOnlyMaskHigh |= 1 << typeId - 32;\n        }\n      }\n    }\n\n    // Apply component masks from sparse format, preserving client-only component bits\n    for (let i = 0; i < maxEntity; i++) {\n      // Preserve client-only bits from current mask\n      const preservedLow = this.entityComponentMask[i * 2] & clientOnlyMaskLow;\n      const preservedHigh = this.entityComponentMask[i * 2 + 1] & clientOnlyMaskHigh;\n      // Clear the mask\n      this.entityComponentMask[i * 2] = preservedLow;\n      this.entityComponentMask[i * 2 + 1] = preservedHigh;\n    }\n    if (data.entityComponentMask) {\n      for (const [entityIdStr, mask] of Object.entries(data.entityComponentMask)) {\n        const entityId = parseInt(entityIdStr, 10);\n        // Merge server mask with preserved client-only bits\n        this.entityComponentMask[entityId * 2] |= mask[0];\n        this.entityComponentMask[entityId * 2 + 1] |= mask[1];\n      }\n    }\n\n    // Apply numeric arrays - only clear/replace arrays that server sends\n    // Skip client-only components even if server sends them (backwards compatibility)\n    for (const [key, sparse] of Object.entries(data.numericArrays || {})) {\n      const componentType = key.split('.')[0];\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue; // Don't apply client-only components from server\n      }\n      let arr = this._numericArrays.get(key);\n      if (!arr) {\n        arr = new Float32Array(this.MAX_ENTITIES);\n        this._numericArrays.set(key, arr);\n      }\n      // Clear this specific array before applying server data\n      arr.fill(0, 0, maxEntity);\n      // Apply server values\n      for (const [entityIdStr, value] of Object.entries(sparse)) {\n        arr[parseInt(entityIdStr, 10)] = this._fromSyncValue(value);\n      }\n    }\n\n    // Apply object components - only clear/replace components that server sends\n    // Skip client-only components\n    for (const [componentType, componentData] of Object.entries(data.objectComponents || {})) {\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      const storage = this._getObjectStorage(componentType);\n      // Clear this specific component type before applying server data\n      for (let i = 0; i < maxEntity; i++) {\n        storage[i] = undefined;\n      }\n      // Apply server values\n      for (const [entityIdStr, value] of Object.entries(componentData)) {\n        storage[parseInt(entityIdStr, 10)] = value;\n      }\n    }\n  }\n\n  /**\r\n   * Apply delta ECS sync - only applies changes\r\n   */\n  _applyDeltaECSData(data) {\n    // Apply entity deaths\n    if (data.entityDead) {\n      for (const entityId of data.entityDead) {\n        this.entityAlive[entityId] = 0;\n        // Clear component mask for dead entities\n        this.entityComponentMask[entityId * 2] = 0;\n        this.entityComponentMask[entityId * 2 + 1] = 0;\n      }\n    }\n\n    // Apply new/changed alive entities\n    if (data.entityAlive) {\n      for (const entityIdStr of Object.keys(data.entityAlive)) {\n        this.entityAlive[parseInt(entityIdStr, 10)] = 1;\n      }\n    }\n\n    // Apply component mask changes, preserving client-only component bits\n    if (data.entityComponentMask) {\n      // Build bitmask for client-only components to preserve\n      let clientOnlyMaskLow = 0;\n      let clientOnlyMaskHigh = 0;\n      for (const componentType of this._clientOnlyComponents) {\n        const typeId = this._componentTypeId.get(componentType);\n        if (typeId !== undefined) {\n          if (typeId < 32) {\n            clientOnlyMaskLow |= 1 << typeId;\n          } else {\n            clientOnlyMaskHigh |= 1 << typeId - 32;\n          }\n        }\n      }\n      for (const [entityIdStr, mask] of Object.entries(data.entityComponentMask)) {\n        const entityId = parseInt(entityIdStr, 10);\n        // Preserve client-only bits, apply server bits\n        const preservedLow = this.entityComponentMask[entityId * 2] & clientOnlyMaskLow;\n        const preservedHigh = this.entityComponentMask[entityId * 2 + 1] & clientOnlyMaskHigh;\n        this.entityComponentMask[entityId * 2] = mask[0] | preservedLow;\n        this.entityComponentMask[entityId * 2 + 1] = mask[1] | preservedHigh;\n      }\n    }\n\n    // Apply numeric array changes (only changed values)\n    // Skip client-only components\n    for (const [key, sparse] of Object.entries(data.numericArrays || {})) {\n      const componentType = key.split('.')[0];\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      let arr = this._numericArrays.get(key);\n      if (!arr) {\n        arr = new Float32Array(this.MAX_ENTITIES);\n        this._numericArrays.set(key, arr);\n      }\n      for (const [entityIdStr, value] of Object.entries(sparse)) {\n        arr[parseInt(entityIdStr, 10)] = this._fromSyncValue(value);\n      }\n    }\n\n    // Apply object component changes - skip client-only\n    for (const [componentType, componentData] of Object.entries(data.objectComponents || {})) {\n      if (this._clientOnlyComponents.has(componentType)) {\n        continue;\n      }\n      const storage = this._getObjectStorage(componentType);\n      for (const [entityIdStr, value] of Object.entries(componentData)) {\n        const entityId = parseInt(entityIdStr, 10);\n        if (value === null) {\n          // null means removed\n          storage[entityId] = undefined;\n        } else {\n          storage[entityId] = value;\n        }\n      }\n    }\n  }\n\n  /**\r\n   * Finalize ECS sync - common cleanup for both full and delta\r\n   */\n  _finalizeECSSync(data) {\n    // Sync entity ID counter\n    if (data.nextEntityId !== undefined) {\n      this.nextEntityId = data.nextEntityId;\n    }\n\n    // Clear all cached proxies since data has been overwritten\n    for (const [, componentCache] of this._proxyCache) {\n      componentCache.clear();\n    }\n  }\n\n  /**\r\n   * Update specific fields of a component\r\n   * For numeric components (TypedArray storage), this is the only way to persist changes\r\n   * For object components, this also works (direct mutation still works for those)\r\n   * @param {number} entityId\r\n   * @param {string} componentType\r\n   * @param {Object} updates - Object with field updates, e.g. { current: 50 } or { 'nested.field': 10 }\r\n   */\n  updateComponent(entityId, componentType, updates) {\n    const typeId = this._componentTypeId.get(componentType);\n    if (typeId === undefined) return;\n    if (!this._hasComponentBit(entityId, typeId)) return;\n    const componentInfo = this._numericComponentInfo.get(componentType);\n    if (componentInfo && componentInfo.isNumeric) {\n      // Write to TypedArrays (convert null to storage sentinel)\n      for (const fieldPath in updates) {\n        this._setNumericField(componentType, entityId, fieldPath, this._toStorageValue(updates[fieldPath]));\n      }\n    } else {\n      // Update object storage\n      const storage = this._objectComponents.get(componentType);\n      if (storage && storage[entityId]) {\n        for (const fieldPath in updates) {\n          if (fieldPath.includes('.')) {\n            // Handle nested paths\n            this._setNestedValue(storage[entityId], fieldPath, updates[fieldPath]);\n          } else {\n            storage[entityId][fieldPath] = updates[fieldPath];\n          }\n        }\n      }\n    }\n  }\n\n  /**\r\n   * Set a nested value in an object using dot notation path\r\n   */\n  _setNestedValue(obj, path, value) {\n    const parts = path.split('.');\n    let current = obj;\n    for (let i = 0; i < parts.length - 1; i++) {\n      if (current[parts[i]] === undefined) {\n        current[parts[i]] = {};\n      }\n      current = current[parts[i]];\n    }\n    current[parts[parts.length - 1]] = value;\n  }\n  hasComponent(entityId, componentType) {\n    const typeId = this._componentTypeId.get(componentType);\n    if (typeId === undefined) return false;\n    return this._hasComponentBit(entityId, typeId);\n  }\n  getEntitiesWith(...componentTypes) {\n    // Create cache key from component types\n    const queryKey = componentTypes.join(',');\n\n    // Get or create reusable result array for this query\n    // This avoids allocations - each unique query gets one array that's reused forever\n    let result = this._queryCache.get(queryKey);\n    if (!result) {\n      result = [];\n      this._queryCache.set(queryKey, result);\n    }\n    result.length = 0; // Clear without deallocating (keeps underlying buffer)\n\n    // Build query bitmask from component types\n    let queryMask0 = 0;\n    let queryMask1 = 0;\n    for (const componentType of componentTypes) {\n      const typeId = this._componentTypeId.get(componentType);\n      if (typeId === undefined) {\n        // Component type doesn't exist yet, no entities can have it\n        return result; // Return empty reusable array\n      }\n      if (typeId < 32) {\n        queryMask0 |= 1 << typeId;\n      } else {\n        queryMask1 |= 1 << typeId - 32;\n      }\n    }\n\n    // Scan all entities using bitmask matching\n    // This is cache-friendly because we iterate contiguously through TypedArrays\n    const alive = this.entityAlive;\n    const masks = this.entityComponentMask;\n    const maxId = this.nextEntityId;\n    for (let entityId = 1; entityId < maxId; entityId++) {\n      // Skip dead entities\n      if (!alive[entityId]) continue;\n\n      // Check if entity has all required components via bitmask\n      const mask0 = masks[entityId * 2];\n      const mask1 = masks[entityId * 2 + 1];\n      if ((mask0 & queryMask0) === queryMask0 && (mask1 & queryMask1) === queryMask1) {\n        result.push(entityId);\n      }\n    }\n    return result;\n  }\n\n  /**\r\n   * Get all alive entity IDs\r\n   * @returns {number[]} Array of alive entity IDs\r\n   */\n  getAllEntities() {\n    const result = [];\n    const alive = this.entityAlive;\n    const maxId = this.nextEntityId;\n    for (let entityId = 1; entityId < maxId; entityId++) {\n      if (alive[entityId]) {\n        result.push(entityId);\n      }\n    }\n    return result;\n  }\n\n  /**\r\n   * Check if an entity exists\r\n   * @param {number} entityId\r\n   * @returns {boolean}\r\n   */\n  entityExists(entityId) {\n    return entityId > 0 && entityId < this.MAX_ENTITIES && this.entityAlive[entityId] === 1;\n  }\n\n  // ============================================\n  // HIGH-PERFORMANCE ITERATION API\n  // ============================================\n\n  /**\r\n   * Get the contiguous entity ID range for entities with a specific component.\r\n   * This is optimal when entities are created sequentially and not destroyed.\r\n   *\r\n   * @param {string} componentType - The component type to query\r\n   * @returns {{start: number, end: number, count: number, contiguous: boolean}}\r\n   *          start: first entity ID with component\r\n   *          end: last entity ID + 1 (exclusive, for loop compatibility)\r\n   *          count: number of entities with this component\r\n   *          contiguous: true if all entities in range have the component (no gaps)\r\n   *\r\n   * @example\r\n   * // Fast iteration when entities are contiguous:\r\n   * const range = game.getEntityRange('boidTag');\r\n   * const posX = game.getFieldArray('position', 'x');\r\n   * if (range.contiguous) {\r\n   *     for (let eid = range.start; eid < range.end; eid++) {\r\n   *         posX[eid] += 1; // Direct array access, no indirection\r\n   *     }\r\n   * }\r\n   */\n  getEntityRange(componentType) {\n    const typeId = this._componentTypeId.get(componentType);\n    if (typeId === undefined) {\n      return {\n        start: 0,\n        end: 0,\n        count: 0,\n        contiguous: true\n      };\n    }\n    const alive = this.entityAlive;\n    const masks = this.entityComponentMask;\n    const maxId = this.nextEntityId;\n    const maskIndex = typeId < 32 ? 0 : 1;\n    const bit = 1 << (typeId < 32 ? typeId : typeId - 32);\n    let start = 0;\n    let end = 0;\n    let count = 0;\n\n    // Find first and last entity with this component\n    for (let entityId = 1; entityId < maxId; entityId++) {\n      if (alive[entityId] && masks[entityId * 2 + maskIndex] & bit) {\n        if (start === 0) start = entityId;\n        end = entityId + 1;\n        count++;\n      }\n    }\n\n    // Check if contiguous (no gaps)\n    const contiguous = end - start === count;\n    return {\n      start,\n      end,\n      count,\n      contiguous\n    };\n  }\n\n  /**\r\n   * High-performance entity iteration without array allocation.\r\n   * Calls the callback for each entity with the specified components.\r\n   *\r\n   * @param {string|string[]} componentTypes - Component type(s) to query\r\n   * @param {function(entityId: number): void} callback - Called for each matching entity\r\n   *\r\n   * @example\r\n   * game.forEachEntity('boidTag', (eid) => {\r\n   *     posX[eid] += headX[eid] * speed;\r\n   * });\r\n   */\n  forEachEntity(componentTypes, callback) {\n    const types = Array.isArray(componentTypes) ? componentTypes : [componentTypes];\n\n    // Build query bitmask\n    let queryMask0 = 0;\n    let queryMask1 = 0;\n    for (const componentType of types) {\n      const typeId = this._componentTypeId.get(componentType);\n      if (typeId === undefined) return; // No entities can match\n      if (typeId < 32) {\n        queryMask0 |= 1 << typeId;\n      } else {\n        queryMask1 |= 1 << typeId - 32;\n      }\n    }\n    const alive = this.entityAlive;\n    const masks = this.entityComponentMask;\n    const maxId = this.nextEntityId;\n    for (let entityId = 1; entityId < maxId; entityId++) {\n      if (!alive[entityId]) continue;\n      const mask0 = masks[entityId * 2];\n      const mask1 = masks[entityId * 2 + 1];\n      if ((mask0 & queryMask0) === queryMask0 && (mask1 & queryMask1) === queryMask1) {\n        callback(entityId);\n      }\n    }\n  }\n\n  /**\r\n   * Iterate over a contiguous range of entities.\r\n   * Use this when you know entities were created sequentially and not destroyed.\r\n   * This is the fastest iteration method - no component checks, pure array access.\r\n   *\r\n   * @param {number} start - First entity ID (inclusive)\r\n   * @param {number} end - Last entity ID (exclusive)\r\n   * @param {function(entityId: number): void} callback\r\n   *\r\n   * @example\r\n   * const range = game.getEntityRange('boidTag');\r\n   * if (range.contiguous) {\r\n   *     game.forEachInRange(range.start, range.end, (eid) => {\r\n   *         posX[eid] += headX[eid] * speed;\r\n   *     });\r\n   * }\r\n   */\n  forEachInRange(start, end, callback) {\n    for (let entityId = start; entityId < end; entityId++) {\n      callback(entityId);\n    }\n  }\n\n  /**\r\n   * Get multiple field arrays at once for a component.\r\n   * More efficient than multiple getFieldArray calls.\r\n   *\r\n   * @param {string} componentType\r\n   * @param {...string} fieldPaths - Field paths to retrieve\r\n   * @returns {Float32Array[]} Array of TypedArrays in the same order as fieldPaths\r\n   *\r\n   * @example\r\n   * const [posX, posY, posZ] = game.getFields('position', 'x', 'y', 'z');\r\n   */\n  getFields(componentType, ...fieldPaths) {\n    return fieldPaths.map(fieldPath => {\n      const key = `${componentType}.${fieldPath}`;\n      return this._numericArrays.get(key);\n    });\n  }\n\n  /**\r\n   * Get count of alive entities\r\n   * @returns {number}\r\n   */\n  getEntityCount() {\n    return this.entityCount;\n  }\n\n  /**\r\n   * Get all component types for an entity\r\n   * @param {number} entityId\r\n   * @returns {string[]} Array of component type names\r\n   */\n  getEntityComponentTypes(entityId) {\n    if (!this.entityAlive[entityId]) return [];\n    const result = [];\n    const mask0 = this.entityComponentMask[entityId * 2];\n    const mask1 = this.entityComponentMask[entityId * 2 + 1];\n\n    // Check first 32 component types\n    for (let bit = 0; bit < 32; bit++) {\n      if (mask0 & 1 << bit) {\n        const name = this._componentTypeNames[bit];\n        if (name) result.push(name);\n      }\n    }\n\n    // Check next 32 component types\n    for (let bit = 0; bit < 32; bit++) {\n      if (mask1 & 1 << bit) {\n        const name = this._componentTypeNames[bit + 32];\n        if (name) result.push(name);\n      }\n    }\n    return result;\n  }\n\n  /**\r\n   * Iterate over entities with specific components without allocating arrays\r\n   * Calls callback(entityId) for each matching entity\r\n   * @param {string[]} componentTypes - Component types to match\r\n   * @param {function} callback - Called with each matching entityId\r\n   */\n  forEachEntityWith(componentTypes, callback) {\n    // Build query bitmask\n    let queryMask0 = 0;\n    let queryMask1 = 0;\n    for (const componentType of componentTypes) {\n      const typeId = this._componentTypeId.get(componentType);\n      if (typeId === undefined) return; // No entities can match\n      if (typeId < 32) {\n        queryMask0 |= 1 << typeId;\n      } else {\n        queryMask1 |= 1 << typeId - 32;\n      }\n    }\n    const alive = this.entityAlive;\n    const masks = this.entityComponentMask;\n    const maxId = this.nextEntityId;\n    for (let entityId = 1; entityId < maxId; entityId++) {\n      if (!alive[entityId]) continue;\n      const mask0 = masks[entityId * 2];\n      const mask1 = masks[entityId * 2 + 1];\n      if ((mask0 & queryMask0) === queryMask0 && (mask1 & queryMask1) === queryMask1) {\n        callback(entityId);\n      }\n    }\n  }\n\n  /**\r\n   * Clear all entities and reset the ECS state\r\n   */\n  clearAllEntities() {\n    // Clear all object storage\n    for (const storage of this._objectComponents.values()) {\n      storage.fill(undefined);\n    }\n\n    // Reset TypedArrays\n    this.entityAlive.fill(0);\n    this.entityComponentMask.fill(0);\n\n    // Reset entity management\n    this.nextEntityId = 1;\n    this.entityCount = 0;\n\n    // Invalidate query cache\n    this._queryCache.clear();\n  }\n  triggerEvent(eventName, data) {\n    for (let i = 0; i < this.systems.length; i++) {\n      const system = this.systems[i];\n      if (system[eventName]) {\n        system[eventName](data);\n      }\n    }\n  }\n  gameOver() {\n    this.state.gameOver = true;\n  }\n  gameVictory() {\n    this.state.victory = true;\n  }\n  resetCurrentTime() {\n    this.state.now = 0;\n    this.lastTime = 0;\n    this.currentTime = 0;\n    this.tickCount = 0;\n  }\n  getComponents() {\n    if (!this.components) {\n      this.components = this.componentGenerator.getComponents();\n    }\n    return this.components;\n  }\n  getComponentSchema(componentId) {\n    return this.componentGenerator.getSchema(componentId);\n  }\n\n  /**\r\n   * Get enum map with toIndex and toValue\r\n   * @param {string} enumName - The enum name (e.g., 'team', 'element', 'projectiles')\r\n   * @returns {Object} { toIndex: {string->number}, toValue: [number->string] }\r\n   */\n  getEnumMap(enumName) {\n    return this.componentGenerator.getEnumMap(enumName);\n  }\n\n  /**\r\n   * Get a collection item by numeric index\r\n   * @param {string} collectionName - The collection name (e.g., 'levels', 'units')\r\n   * @param {number} index - The numeric index\r\n   * @returns {Object|undefined} The collection item, or undefined if not found\r\n   */\n  getCollectionItem(collectionName, index) {\n    const enumMap = this.componentGenerator.getEnumMap(collectionName);\n    if (!enumMap?.toValue?.[index]) return undefined;\n    const key = enumMap.toValue[index];\n    return this.getCollections()[collectionName]?.[key];\n  }\n\n  /**\r\n   * Get a collection item key (string name) by numeric index\r\n   * @param {string} collectionName - The collection name (e.g., 'levels', 'units')\r\n   * @param {number} index - The numeric index\r\n   * @returns {string|undefined} The collection key, or undefined if not found\r\n   */\n  getCollectionKey(collectionName, index) {\n    const enumMap = this.componentGenerator.getEnumMap(collectionName);\n    return enumMap?.toValue?.[index];\n  }\n\n  /**\r\n   * Get all enums as a convenient lookup object\r\n   * Usage: const enums = game.getEnums();\r\n   *        components.team({ team: enums.team.left })\r\n   * @returns {Object} { team: { neutral: 0, hostile: 1, ... }, element: { ... }, ... }\r\n   */\n  getEnums() {\n    if (!this._enums) {\n      this._enums = this.componentGenerator.getEnums();\n    }\n    return this._enums;\n  }\n\n  /**\r\n   * Get reverse enum lookup (index â†’ key)\r\n   * Usage: const reverseEnums = game.getReverseEnums();\r\n   *        const levelName = reverseEnums.levels[levelIndex];\r\n   * @returns {Object} { levels: { 0: 'level_1', 1: 'level_2' }, ... }\r\n   */\n  getReverseEnums() {\n    if (!this._reverseEnums) {\n      this._reverseEnums = this.componentGenerator.getReverseEnums();\n    }\n    return this._reverseEnums;\n  }\n  getUnitTypeDef(unitTypeComponent) {\n    if (!unitTypeComponent || unitTypeComponent.collection === -1 || unitTypeComponent.type === -1) {\n      return null;\n    }\n    const collections = this.getCollections();\n    const collectionEnumMap = this.getEnumMap('objectTypeDefinitions');\n    const collectionName = collectionEnumMap?.toValue?.[unitTypeComponent.collection];\n    if (!collectionName || !collections[collectionName]) {\n      return null;\n    }\n    const typeEnumMap = this.getEnumMap(collectionName);\n    const typeName = typeEnumMap?.toValue?.[unitTypeComponent.type];\n    if (!typeName) {\n      return null;\n    }\n    const def = collections[collectionName][typeName];\n    // Include resolved names for convenience\n    if (def) {\n      return {\n        ...def,\n        id: typeName,\n        collection: collectionName\n      };\n    }\n    return null;\n  }\n}\n\n// Assign to global.GUTS for server\nif (typeof __webpack_require__.g !== 'undefined' && __webpack_require__.g.GUTS) {\n  __webpack_require__.g.GUTS.BaseECSGame = BaseECSGame;\n}\n\n// ES6 exports for webpack bundling\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BaseECSGame);\n\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.BaseECSGame = BaseECSGame;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZUVDU0dhbWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxNQUFNQSxXQUFXLENBQUM7RUFDZEMsV0FBV0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsSUFBSSxDQUFDQSxHQUFHLEdBQUdBLEdBQUc7SUFDZCxJQUFJLENBQUNDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFFZixJQUFJLENBQUNDLGFBQWEsR0FBRyxFQUFFO0lBQ3ZCLElBQUksQ0FBQ0MsT0FBTyxHQUFHLEVBQUU7SUFDakIsSUFBSSxDQUFDQyxPQUFPLEdBQUcsRUFBRTs7SUFFakI7SUFDQSxJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJOztJQUV4QjtJQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUlDLElBQUksQ0FBQ0MsWUFBWSxDQUFDLENBQUM7O0lBR3hDO0lBQ0E7SUFDQTs7SUFFQTtJQUNBO0lBQ0EsTUFBTUMsVUFBVSxHQUFHVCxHQUFHLEVBQUVVLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxJQUFJO0lBQ2xELElBQUksQ0FBQ0MsWUFBWSxHQUFHSixVQUFVLEVBQUVLLFdBQVcsSUFBSSxLQUFLLENBQUMsQ0FBQzs7SUFFdEQ7SUFDQTtJQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUFHLElBQUlDLFVBQVUsQ0FBQyxJQUFJLENBQUNILFlBQVksQ0FBQztJQUNwRDtJQUNBO0lBQ0EsSUFBSSxDQUFDSSxtQkFBbUIsR0FBRyxJQUFJQyxXQUFXLENBQUMsSUFBSSxDQUFDTCxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFbkU7SUFDQSxJQUFJLENBQUNNLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2QixJQUFJLENBQUNDLFdBQVcsR0FBRyxDQUFDOztJQUVwQjtJQUNBLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsSUFBSUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ25DLElBQUksQ0FBQ0MsbUJB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QUVBLE1BQU1DLEdBQUcsR0FBR3JZLFdBQVcsQ0FBQzRYLGNBQWMsQ0FBQyxDQUFDUSxRQUFRLENBQUM7SUFDakQ7SUFDQSxJQUFJQyxHQUFHLEVBQUU7TUFDTCxPQUFPO1FBQ0gsR0FBR0EsR0FBRztRQUNON04sRUFBRSxFQUFFNE4sUUFBUTtRQUNaSCxVQUFVLEVBQUVMO01BQ2hCLENBQUM7SUFDTDtJQUNBLE9BQU8sSUFBSTtFQUNmO0FBQ0o7O0FBR0E7QUFDQSxJQUFJLE9BQU9VLHFCQUFNLEtBQUssV0FBVyxJQUFJQSxxQkFBTSxDQUFDelksSUFBSSxFQUFFO0VBQzlDeVkscUJBQU0sQ0FBQ3pZLElBQUksQ0FBQ1QsV0FBVyxHQUFHQSxXQUFXO0FBQ3pDOztBQUVBO0FBQ0EsaUVBQWVBLFdBQVcsRUFBQztBQUNKOztBQUd2QjtBQUNBLElBQUksT0FBT21aLE1BQU0sS0FBSyxXQUFXLElBQUlBLE1BQU0sQ0FBQzFZLElBQUksRUFBRTtFQUNoRDBZLE1BQU0sQ0FBQzFZLElBQUksQ0FBQ1QsV0FBVyxHQUFHQSxXQUFXO0FBQ3ZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG93ZXJkZWZlbnNlLy4vZ2xvYmFsL2NvbGxlY3Rpb25zL3NjcmlwdHMvbGlicmFyaWVzL2pzL0Jhc2VFQ1NHYW1lLmpzP2FkYTgiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmFzZUVDU0dhbWUge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLmVudGl0aWVzVG9BZGQgPSBbXTtcclxuICAgICAgICB0aGlzLmNsYXNzZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN5c3RlbXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gU2NlbmUgbWFuYWdlbWVudFxyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gU2VydmljZSByZWdpc3RyeVxyXG4gICAgICAgIHRoaXMuX3NlcnZpY2VzID0gbmV3IEdVVFMuR2FtZVNlcnZpY2VzKCk7XHJcblxyXG5cclxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICAgIC8vIEhJR0gtUEVSRk9STUFOQ0UgRUNTIFNUT1JBR0UgKDEwaysgZW50aXRpZXMpXHJcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAgICAgLy8gTWF4aW11bSBlbnRpdGllcyAtIHByZS1hbGxvY2F0ZSBmb3IgcGVyZm9ybWFuY2VcclxuICAgICAgICAvLyBDYW4gYmUgY29uZmlndXJlZCB2aWEgZ2FtZS5qc29uIG1heEVudGl0aWVzIChkZWZhdWx0IDY1NTM2KVxyXG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBhcHA/LmNvbGxlY3Rpb25zPy5jb25maWdzPy5nYW1lO1xyXG4gICAgICAgIHRoaXMuTUFYX0VOVElUSUVTID0gZ2FtZUNvbmZpZz8ubWF4RW50aXRpZXMgfHwgNjU1MzY7IC8vIFBvd2VyIG9mIDIgcmVjb21tZW5kZWQgZm9yIHBlcmZvcm1hbmNlXHJcblxyXG4gICAgICAgIC8vIEVudGl0eSBtYW5hZ2VtZW50IHdpdGggVHlwZWRBcnJheXNcclxuICAgICAgICAvLyBlbnRpdHlBbGl2ZVtpXSA9IDEgaWYgZW50aXR5IGkgZXhpc3RzLCAwIGlmIGZyZWUgc2xvdFxyXG4gICAgICAgIHRoaXMuZW50aXR5QWxpdmUgPSBuZXcgVWludDhBcnJheSh0aGlzLk1BWF9FTlRJVElFUyk7XHJcbiAgICAgICAgLy8gQ29tcG9uZW50IGJpdG1hc2sgcGVyIGVudGl0eSAodXAgdG8gMzIgY29tcG9uZW50IHR5cGVzIHdpdGggc2luZ2xlIFVpbnQzMilcclxuICAgICAgICAvLyBGb3IgbW9yZSBjb21wb25lbnRzLCB3ZSB1c2UgbXVsdGlwbGUgVWludDMyc1xyXG4gICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFzayA9IG5ldyBVaW50MzJBcnJheSh0aGlzLk1BWF9FTlRJVElFUyAqIDIpOyAvLyA2NCBjb21wb25lbnQgdHlwZXMgbWF4XHJcblxyXG4gICAgICAgIC8vIEVudGl0eSBJRCBjb3VudGVyIChubyByZWN5Y2xpbmcgLSBJRHMgZ3JvdyBtb25vdG9uaWNhbGx5IHRvIHByZXZlbnQgcmVmZXJlbmNlIGJ1Z3MpXHJcbiAgICAgICAgdGhpcy5uZXh0RW50aXR5SWQgPSAxOyAvLyBTdGFydCBhdCAxLCByZXNlcnZlIDAgYXMgXCJubyBlbnRpdHlcIlxyXG4gICAgICAgIHRoaXMuZW50aXR5Q291bnQgPSAwO1xyXG5cclxuICAgICAgICAvLyBDb21wb25lbnQgdHlwZSByZWdpc3RyeSAtIG1hcHMgY29tcG9uZW50IG5hbWUgdG8gbnVtZXJpYyBJRCAoMC02MylcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlSWQgPSBuZXcgTWFwKCk7IC8vIGNvbXBvbmVudE5hbWUgLT4gdHlwZUlkXHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZU5hbWVzID0gW107IC8vIHR5cGVJZCAtPiBjb21wb25lbnROYW1lXHJcbiAgICAgICAgdGhpcy5fbmV4dENvbXBvbmVudFR5cGVJZCA9IDA7XHJcblxyXG4gICAgICAgIC8vIFNvQSAoU3RydWN0dXJlIG9mIEFycmF5cykgc3RvcmFnZSBmb3IgbnVtZXJpYyBjb21wb25lbnRzXHJcbiAgICAgICAgLy8gRWFjaCBudW1lcmljIGZpZWxkIGdldHMgaXRzIG93biBGbG9hdDMyQXJyYXkgZm9yIGNhY2hlLWZyaWVuZGx5IGl0ZXJhdGlvblxyXG4gICAgICAgIHRoaXMuX251bWVyaWNBcnJheXMgPSBuZXcgTWFwKCk7IC8vIFwiY29tcG9uZW50VHlwZS5maWVsZC5wYXRoXCIgLT4gRmxvYXQzMkFycmF5XHJcblxyXG4gICAgICAgIC8vIFRyYWNrIHdoaWNoIGNvbXBvbmVudHMgYXJlIG51bWVyaWMtb25seSAodXNlIFR5cGVkQXJyYXlzKVxyXG4gICAgICAgIC8vIE1hcHMgY29tcG9uZW50SWQgLT4geyBmaWVsZHM6IFsnZmllbGQxJywgJ25lc3RlZC5maWVsZDInXSwgaXNOdW1lcmljOiB0cnVlIH1cclxuICAgICAgICB0aGlzLl9udW1lcmljQ29tcG9uZW50SW5mbyA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLy8gT2JqZWN0IHN0b3JhZ2UgZm9yIG5vbi1udW1lcmljL2NvbXBsZXggY29tcG9uZW50IGRhdGFcclxuICAgICAgICAvLyBQcmUtYWxsb2NhdGVkIGFycmF5IG9mIG9iamVjdHMsIGluZGV4ZWQgYnkgZW50aXR5IElEXHJcbiAgICAgICAgdGhpcy5fb2JqZWN0Q29tcG9uZW50cyA9IG5ldyBNYXAoKTsgLy8gY29tcG9uZW50VHlwZSAtPiBBcnJheVtNQVhfRU5USVRJRVNdXHJcblxyXG4gICAgICAgIC8vIFF1ZXJ5IGNhY2hlIGZvciBnZXRFbnRpdGllc1dpdGggLSBzdG9yZXMgcmV1c2FibGUgYXJyYXlzIHRvIGF2b2lkIGFsbG9jYXRpb25zXHJcbiAgICAgICAgdGhpcy5fcXVlcnlDYWNoZSA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLy8gRGVsdGEgc3luYyB0cmFja2luZyAtIHN0b3JlcyBsYXN0IHN5bmNlZCBzdGF0ZSBmb3IgY29tcHV0aW5nIGRlbHRhc1xyXG4gICAgICAgIHRoaXMuX2xhc3RTeW5jZWRTdGF0ZSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIENsaWVudC1vbmx5IGNvbXBvbmVudHMgLSBleGNsdWRlZCBmcm9tIHNlcnZlciBzeW5jIHRvIHByZXNlcnZlIGNsaWVudCBzdGF0ZVxyXG4gICAgICAgIC8vIFRoZXNlIGNvbXBvbmVudHMgYXJlIG1hbmFnZWQgbG9jYWxseSBhbmQgc2hvdWxkIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzZXJ2ZXJcclxuICAgICAgICB0aGlzLl9jbGllbnRPbmx5Q29tcG9uZW50cyA9IG5ldyBTZXQoW1xyXG4gICAgICAgICAgICAncmVuZGVyYWJsZScsXHJcbiAgICAgICAgICAgICdhbmltYXRpb25TdGF0ZSdcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgLy8gUHJveHkgY2FjaGUgZm9yIGdldENvbXBvbmVudCAtIGF2b2lkcyBjcmVhdGluZyBuZXcgcHJveGllcyBldmVyeSBjYWxsXHJcbiAgICAgICAgLy8gTWFwOiBjb21wb25lbnRUeXBlIC0+IE1hcChlbnRpdHlJZCAtPiBwcm94eSlcclxuICAgICAgICB0aGlzLl9wcm94eUNhY2hlID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvLyBQcmUtYWxsb2NhdGVkIHJlc3VsdCBhcnJheSBmb3IgcXVlcmllcyAoYXZvaWRzIGFsbG9jYXRpb24gaW4gaG90IHBhdGgpXHJcbiAgICAgICAgdGhpcy5fcXVlcnlSZXN1bHRCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkodGhpcy5NQVhfRU5USVRJRVMpO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmRlbHRhVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy50aWNrQ291bnQgPSAwO1xyXG5cclxuICAgICAgICAvLyBGaXhlZCB0aW1lc3RlcCBmb3IgZGV0ZXJtaW5pc3RpYyBzaW11bGF0aW9uICgyMCBUUFMgPSAwLjA1cyBwZXIgdGljaylcclxuICAgICAgICB0aGlzLkZJWEVEX0RFTFRBX1RJTUUgPSAxLzIwO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2VydmVyID0gZmFsc2U7XHJcbiAgICAgICAgLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xyXG4gICAgICAgIGlmICh0eXBlb2YgR1VUUyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEdVVFMuUGVyZm9ybWFuY2VNb25pdG9yICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTW9uaXRvciA9IG5ldyBHVVRTLlBlcmZvcm1hbmNlTW9uaXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsbCBsb2dnaW5nIGZvciBkZWJ1Z2dpbmdcclxuICAgICAgICBpZiAodHlwZW9mIEdVVFMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBHVVRTLkNhbGxMb2dnZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbExvZ2dlciA9IG5ldyBHVVRTLkNhbGxMb2dnZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdsb2JhbCBzZWVkZWQgcmFuZG9tIGluc3RhbmNlIC0gY2FuIGJlIHJlc2VlZGVkIGZvciBkZXRlcm1pbmlzdGljIHNpbXVsYXRpb25cclxuICAgICAgICBpZiAodHlwZW9mIEdVVFMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBHVVRTLlNlZWRlZFJhbmRvbSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5ybmcgPSBuZXcgR1VUUy5TZWVkZWRSYW5kb20oRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGNvbXBvbmVudCB0eXBlIHJlZ2lzdHJ5IHdpdGggY29tbW9uIGNvbXBvbmVudHNcclxuICAgICAgICB0aGlzLl9pbml0Q29tcG9uZW50VHlwZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByZS1yZWdpc3RlciBjb21tb24gY29tcG9uZW50IHR5cGVzIGFuZCBhbGxvY2F0ZSB0aGVpciBzdG9yYWdlXHJcbiAgICAgKi9cclxuICAgIF9pbml0Q29tcG9uZW50VHlwZXMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gdGhpcy5nZXRDb2xsZWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50R2VuZXJhdG9yID0gbmV3IEdVVFMuQ29tcG9uZW50R2VuZXJhdG9yKGNvbGxlY3Rpb25zLmNvbXBvbmVudHMsIGNvbGxlY3Rpb25zKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyKFwiZ2V0Q29tcG9uZW50c1wiLCB0aGlzLmdldENvbXBvbmVudHMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcihcImdldENvbXBvbmVudFNjaGVtYVwiLCB0aGlzLmdldENvbXBvbmVudFNjaGVtYS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyKFwiZ2V0RW51bU1hcFwiLCB0aGlzLmdldEVudW1NYXAuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcihcImdldEVudW1zXCIsIHRoaXMuZ2V0RW51bXMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcihcImdldFJldmVyc2VFbnVtc1wiLCB0aGlzLmdldFJldmVyc2VFbnVtcy5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyKFwiZ2V0VW5pdFR5cGVEZWZcIiwgdGhpcy5nZXRVbml0VHlwZURlZi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gUHJlLXJlZ2lzdGVyIGFsbCBjb21wb25lbnQgdHlwZXMgaW4gYWxwaGFiZXRpY2FsIG9yZGVyIGZvciBkZXRlcm1pbmlzdGljIHR5cGUgSURzXHJcbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHNlcnZlciBhbmQgY2xpZW50IGhhdmUgaWRlbnRpY2FsIHR5cGUgSUQgbWFwcGluZ3NcclxuICAgICAgICBjb25zdCBjb21wb25lbnROYW1lcyA9IE9iamVjdC5rZXlzKGNvbGxlY3Rpb25zLmNvbXBvbmVudHMpLnNvcnQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudE5hbWUgb2YgY29tcG9uZW50TmFtZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2V0Q29tcG9uZW50VHlwZUlkKGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBvciBjcmVhdGUgYSBudW1lcmljIGNvbXBvbmVudCB0eXBlIElEXHJcbiAgICAgKi9cclxuICAgIF9nZXRDb21wb25lbnRUeXBlSWQoY29tcG9uZW50VHlwZSkge1xyXG4gICAgICAgIGxldCB0eXBlSWQgPSB0aGlzLl9jb21wb25lbnRUeXBlSWQuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmICh0eXBlSWQgPT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgdHlwZUlkID0gdGhpcy5fbmV4dENvbXBvbmVudFR5cGVJZCsrO1xyXG4gICAgICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlSWQuc2V0KGNvbXBvbmVudFR5cGUsIHR5cGVJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVOYW1lc1t0eXBlSWRdID0gY29tcG9uZW50VHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHR5cGVJZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBjb21wb25lbnQgYml0IGluIGVudGl0eSdzIGJpdG1hc2tcclxuICAgICAqL1xyXG4gICAgX3NldENvbXBvbmVudEJpdChlbnRpdHlJZCwgY29tcG9uZW50VHlwZUlkKSB7XHJcbiAgICAgICAgY29uc3QgbWFza0luZGV4ID0gZW50aXR5SWQgKiAyICsgKGNvbXBvbmVudFR5cGVJZCA+PSAzMiA/IDEgOiAwKTtcclxuICAgICAgICBjb25zdCBiaXQgPSBjb21wb25lbnRUeXBlSWQgJSAzMjtcclxuICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbbWFza0luZGV4XSB8PSAoMSA8PCBiaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgY29tcG9uZW50IGJpdCBpbiBlbnRpdHkncyBiaXRtYXNrXHJcbiAgICAgKi9cclxuICAgIF9jbGVhckNvbXBvbmVudEJpdChlbnRpdHlJZCwgY29tcG9uZW50VHlwZUlkKSB7XHJcbiAgICAgICAgY29uc3QgbWFza0luZGV4ID0gZW50aXR5SWQgKiAyICsgKGNvbXBvbmVudFR5cGVJZCA+PSAzMiA/IDEgOiAwKTtcclxuICAgICAgICBjb25zdCBiaXQgPSBjb21wb25lbnRUeXBlSWQgJSAzMjtcclxuICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbbWFza0luZGV4XSAmPSB+KDEgPDwgYml0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGVudGl0eSBoYXMgY29tcG9uZW50IHZpYSBiaXRtYXNrXHJcbiAgICAgKi9cclxuICAgIF9oYXNDb21wb25lbnRCaXQoZW50aXR5SWQsIGNvbXBvbmVudFR5cGVJZCkge1xyXG4gICAgICAgIGNvbnN0IG1hc2tJbmRleCA9IGVudGl0eUlkICogMiArIChjb21wb25lbnRUeXBlSWQgPj0gMzIgPyAxIDogMCk7XHJcbiAgICAgICAgY29uc3QgYml0ID0gY29tcG9uZW50VHlwZUlkICUgMzI7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbbWFza0luZGV4XSAmICgxIDw8IGJpdCkpICE9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG9yIGNyZWF0ZSBGbG9hdDMyQXJyYXkgZm9yIGEgbnVtZXJpYyBmaWVsZFxyXG4gICAgICovXHJcbiAgICBfZ2V0TnVtZXJpY0FycmF5KGtleSkge1xyXG4gICAgICAgIGxldCBhcnIgPSB0aGlzLl9udW1lcmljQXJyYXlzLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghYXJyKSB7XHJcbiAgICAgICAgICAgIGFyciA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5NQVhfRU5USVRJRVMpO1xyXG4gICAgICAgICAgICB0aGlzLl9udW1lcmljQXJyYXlzLnNldChrZXksIGFycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgb3IgY3JlYXRlIG9iamVjdCBzdG9yYWdlIGFycmF5IGZvciBhIGNvbXBvbmVudCB0eXBlXHJcbiAgICAgKi9cclxuICAgIF9nZXRPYmplY3RTdG9yYWdlKGNvbXBvbmVudFR5cGUpIHtcclxuICAgICAgICBsZXQgc3RvcmFnZSA9IHRoaXMuX29iamVjdENvbXBvbmVudHMuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmICghc3RvcmFnZSkge1xyXG4gICAgICAgICAgICBzdG9yYWdlID0gbmV3IEFycmF5KHRoaXMuTUFYX0VOVElUSUVTKTtcclxuICAgICAgICAgICAgdGhpcy5fb2JqZWN0Q29tcG9uZW50cy5zZXQoY29tcG9uZW50VHlwZSwgc3RvcmFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdG9yYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW5hbHl6ZSBhIGNvbXBvbmVudCBzY2hlbWEgdG8gZGV0ZXJtaW5lIGlmIGl0J3MgYWxsLW51bWVyaWNcclxuICAgICAqIFJldHVybnMgeyBpc051bWVyaWM6IHRydWUsIGZpZWxkczogWydmaWVsZDEnLCAnbmVzdGVkLmZpZWxkMiddIH0gb3IgeyBpc051bWVyaWM6IGZhbHNlIH1cclxuICAgICAqIE51bWJlcnMsIGJvb2xlYW5zIChzdG9yZWQgYXMgMC8xKSwgZW51bSBzdHJpbmdzLCBhbmQgYXJyYXlzIG9mIGVudW0gdmFsdWVzIChiaXRtYXNrcykgYXJlIGFsbCBjb25zaWRlcmVkIG51bWVyaWMuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NoZW1hIC0gVGhlIGNvbXBvbmVudCBzY2hlbWFcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IGVudW1NYXAgLSBUaGUgZW51bSBtYXAgaWYgdGhpcyBjb21wb25lbnQgaGFzIGVudW1zXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IC0gUGF0aCBwcmVmaXggZm9yIG5lc3RlZCBmaWVsZHNcclxuICAgICAqL1xyXG4gICAgX2FuYWx5emVDb21wb25lbnRTY2hlbWEoc2NoZW1hLCBlbnVtTWFwID0gbnVsbCwgcHJlZml4ID0gJycpIHtcclxuICAgICAgICBjb25zdCBmaWVsZHMgPSBbXTtcclxuICAgICAgICBsZXQgaXNOdW1lcmljID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2NoZW1hW2tleV07XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aCA9IHByZWZpeCA/IGAke3ByZWZpeH0uJHtrZXl9YCA6IGtleTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBCb29sZWFucyBzdG9yZWQgYXMgMC8xIGluIFR5cGVkQXJyYXlzXHJcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBudWxsIGZpZWxkcyBzdG9yZWQgYXMgLUluZmluaXR5IGluIFR5cGVkQXJyYXlzXHJcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaChmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgZW51bU1hcCAmJiBlbnVtTWFwLnRvSW5kZXguaGFzT3duUHJvcGVydHkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdHJpbmcgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBlbnVtIGluZGV4IC0gdHJlYXQgYXMgbnVtZXJpY1xyXG4gICAgICAgICAgICAgICAgZmllbGRzLnB1c2goZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiBlbnVtTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBcnJheXMgb2YgZW51bSB2YWx1ZXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYml0bWFzayAtIHRyZWF0IGFzIG51bWVyaWNcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFycmF5IGNvbnRhaW5zIGVudW0gdmFsdWVzIG9yIFwiYWxsXCJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRW51bUFycmF5ID0gdmFsdWUuZXZlcnkoaXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPT09ICdhbGwnIHx8IGVudW1NYXAudG9JbmRleC5oYXNPd25Qcm9wZXJ0eShpdGVtKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0VudW1BcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKGZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTnVtZXJpYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBjaGVjayBuZXN0ZWQgb2JqZWN0c1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkID0gdGhpcy5fYW5hbHl6ZUNvbXBvbmVudFNjaGVtYSh2YWx1ZSwgZW51bU1hcCwgZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWQuaXNOdW1lcmljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goLi4ubmVzdGVkLmZpZWxkcyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTnVtZXJpYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gU3RyaW5nIChub24tZW51bSksIG5vbi1lbnVtIGFycmF5LCBudWxsLCBldGMuIC0gbm90IHB1cmVseSBudW1lcmljXHJcbiAgICAgICAgICAgICAgICBpc051bWVyaWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geyBpc051bWVyaWMsIGZpZWxkcyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgYSBjb21wb25lbnQgdHlwZSBhbmQgc2V0IHVwIHN0b3JhZ2UgKFR5cGVkQXJyYXlzIGZvciBudW1lcmljLCBvYmplY3QgYXJyYXkgb3RoZXJ3aXNlKVxyXG4gICAgICogQ2FsbGVkIHdoZW4gYSBjb21wb25lbnQgaXMgZmlyc3QgYWRkZWRcclxuICAgICAqL1xyXG4gICAgX3NldHVwQ29tcG9uZW50U3RvcmFnZShjb21wb25lbnRJZCwgc2NoZW1hLCBlbnVtTWFwID0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9udW1lcmljQ29tcG9uZW50SW5mby5oYXMoY29tcG9uZW50SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gQWxyZWFkeSBzZXQgdXBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFuYWx5c2lzID0gdGhpcy5fYW5hbHl6ZUNvbXBvbmVudFNjaGVtYShzY2hlbWEsIGVudW1NYXApO1xyXG4gICAgICAgIC8vIENhY2hlIGJvdGggc2NoZW1hcyBmb3IgZ2V0Q29tcG9uZW50OlxyXG4gICAgICAgIC8vIC0gc2NoZW1hOiBleHBhbmRlZCBzY2hlbWEgKHVzZWQgZm9yIFR5cGVkQXJyYXkgZmllbGQgZW51bWVyYXRpb24pXHJcbiAgICAgICAgLy8gLSBvcmlnaW5hbFNjaGVtYTogcHJlc2VydmVzICRmaXhlZEFycmF5IGRpcmVjdGl2ZXMgZm9yIGFycmF5IHByb3h5IGNyZWF0aW9uXHJcbiAgICAgICAgYW5hbHlzaXMuc2NoZW1hID0gc2NoZW1hO1xyXG4gICAgICAgIGFuYWx5c2lzLm9yaWdpbmFsU2NoZW1hID0gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0T3JpZ2luYWxTY2hlbWEoY29tcG9uZW50SWQpO1xyXG4gICAgICAgIHRoaXMuX251bWVyaWNDb21wb25lbnRJbmZvLnNldChjb21wb25lbnRJZCwgYW5hbHlzaXMpO1xyXG5cclxuICAgICAgICBpZiAoYW5hbHlzaXMuaXNOdW1lcmljKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBUeXBlZEFycmF5cyBmb3IgZWFjaCBmaWVsZFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkUGF0aCBvZiBhbmFseXNpcy5maWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2NvbXBvbmVudElkfS4ke2ZpZWxkUGF0aH1gO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0TnVtZXJpY0FycmF5KGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSB2YWx1ZSBpbiBhIG51bWVyaWMgY29tcG9uZW50J3MgVHlwZWRBcnJheSBzdG9yYWdlXHJcbiAgICAgKiBOb3RlOiBDYWxsZXIgc2hvdWxkIHVzZSBfdG9TdG9yYWdlVmFsdWUoKSBpZiBwYXNzaW5nIHVzZXItcHJvdmlkZWQgdmFsdWVzXHJcbiAgICAgKi9cclxuICAgIF9zZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBmaWVsZFBhdGgsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50SWR9LiR7ZmllbGRQYXRofWA7XHJcbiAgICAgICAgY29uc3QgYXJyID0gdGhpcy5fbnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoYXJyKSB7XHJcbiAgICAgICAgICAgIGFycltlbnRpdHlJZF0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB2YWx1ZSBmcm9tIGEgbnVtZXJpYyBjb21wb25lbnQncyBUeXBlZEFycmF5IHN0b3JhZ2UgKGludGVybmFsKVxyXG4gICAgICogQ29udmVydHMgLUluZmluaXR5IChudWxsIHNlbnRpbmVsKSBiYWNrIHRvIG51bGwgZm9yIEFQSSBjb25zdW1lcnNcclxuICAgICAqL1xyXG4gICAgX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGZpZWxkUGF0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGAke2NvbXBvbmVudElkfS4ke2ZpZWxkUGF0aH1gO1xyXG4gICAgICAgIGNvbnN0IGFyciA9IHRoaXMuX251bWVyaWNBcnJheXMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFhcnIpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21TdG9yYWdlVmFsdWUoYXJyW2VudGl0eUlkXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmF3IHZhbHVlIGZyb20gVHlwZWRBcnJheSBzdG9yYWdlIHdpdGhvdXQgbnVsbCBjb252ZXJzaW9uIChmb3IgaW50ZXJuYWwgdXNlKVxyXG4gICAgICovXHJcbiAgICBfZ2V0UmF3TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgZmllbGRQYXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50SWR9LiR7ZmllbGRQYXRofWA7XHJcbiAgICAgICAgY29uc3QgYXJyID0gdGhpcy5fbnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgICAgICByZXR1cm4gYXJyID8gYXJyW2VudGl0eUlkXSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpcmVjdCBmaWVsZCByZWFkIC0gYnlwYXNzZXMgcHJveHkgZm9yIG1heGltdW0gcGVyZm9ybWFuY2UgaW4gaG90IHBhdGhzXHJcbiAgICAgKiBVc2UgZm9yIHRpZ2h0IGxvb3BzIHdoZXJlIHByb3h5IG92ZXJoZWFkIG1hdHRlcnMgKGNvbGxpc2lvbiwgcGF0aGZpbmRpbmcpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW50aXR5SWQgLSBFbnRpdHkgSURcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRUeXBlIC0gQ29tcG9uZW50IG5hbWUgKGUuZy4sICd0cmFuc2Zvcm0nKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkUGF0aCAtIERvdC1zZXBhcmF0ZWQgcGF0aCAoZS5nLiwgJ3Bvc2l0aW9uLngnKVxyXG4gICAgICogQHJldHVybnMge251bWJlcnxudWxsfSAtIFJhdyB2YWx1ZSwgb3IgbnVsbCBpZiBmaWVsZCB3YXMgbnVsbFxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIEluc3RlYWQgb2Y6IGdhbWUuZ2V0Q29tcG9uZW50KGlkLCAndHJhbnNmb3JtJykucG9zaXRpb24ueFxyXG4gICAgICogY29uc3QgeCA9IGdhbWUuZ2V0RmllbGQoaWQsICd0cmFuc2Zvcm0nLCAncG9zaXRpb24ueCcpO1xyXG4gICAgICovXHJcbiAgICBnZXRGaWVsZChlbnRpdHlJZCwgY29tcG9uZW50VHlwZSwgZmllbGRQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRUeXBlLCBlbnRpdHlJZCwgZmllbGRQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpcmVjdCBmaWVsZCB3cml0ZSAtIGJ5cGFzc2VzIHByb3h5IGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGluIGhvdCBwYXRoc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVudGl0eUlkIC0gRW50aXR5IElEXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50VHlwZSAtIENvbXBvbmVudCBuYW1lIChlLmcuLCAndHJhbnNmb3JtJylcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZFBhdGggLSBEb3Qtc2VwYXJhdGVkIHBhdGggKGUuZy4sICdwb3NpdGlvbi54JylcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfG51bGx9IHZhbHVlIC0gVmFsdWUgdG8gc2V0XHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gSW5zdGVhZCBvZjogZ2FtZS5nZXRDb21wb25lbnQoaWQsICd0cmFuc2Zvcm0nKS5wb3NpdGlvbi54ID0gMTAwXHJcbiAgICAgKiBnYW1lLnNldEZpZWxkKGlkLCAndHJhbnNmb3JtJywgJ3Bvc2l0aW9uLngnLCAxMDApO1xyXG4gICAgICovXHJcbiAgICBzZXRGaWVsZChlbnRpdHlJZCwgY29tcG9uZW50VHlwZSwgZmllbGRQYXRoLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3NldE51bWVyaWNGaWVsZChjb21wb25lbnRUeXBlLCBlbnRpdHlJZCwgZmllbGRQYXRoLCB0aGlzLl90b1N0b3JhZ2VWYWx1ZSh2YWx1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGRpcmVjdCByZWZlcmVuY2VzIHRvIFR5cGVkQXJyYXlzIGZvciBhIGNvbXBvbmVudCdzIGZpZWxkcy5cclxuICAgICAqIFVzZSB0aGlzIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGluIHRpZ2h0IGxvb3BzIC0gYXZvaWRzIGFsbCBwcm94eS9mdW5jdGlvbiBvdmVyaGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50VHlwZSAtIENvbXBvbmVudCBuYW1lIChlLmcuLCAndHJhbnNmb3JtJylcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGZpZWxkUGF0aHMgLSBBcnJheSBvZiBmaWVsZCBwYXRocyAoZS5nLiwgWydwb3NpdGlvbi54JywgJ3Bvc2l0aW9uLnknLCAncG9zaXRpb24ueiddKVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gTWFwIG9mIGZpZWxkUGF0aCAtPiBGbG9hdDMyQXJyYXkgKG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQpXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gR2V0IGRpcmVjdCBhcnJheSBhY2Nlc3MgZm9yIHRyYW5zZm9ybSBwb3NpdGlvbiBmaWVsZHNcclxuICAgICAqIGNvbnN0IGFycmF5cyA9IGdhbWUuZ2V0RmllbGRBcnJheXMoJ3RyYW5zZm9ybScsIFsncG9zaXRpb24ueCcsICdwb3NpdGlvbi55JywgJ3Bvc2l0aW9uLnonXSk7XHJcbiAgICAgKiAvLyBOb3cgYWNjZXNzIGRpcmVjdGx5OiBhcnJheXNbJ3Bvc2l0aW9uLngnXVtlbnRpdHlJZF1cclxuICAgICAqIGZvciAoY29uc3QgZW50aXR5SWQgb2YgZW50aXRpZXMpIHtcclxuICAgICAqICAgICBjb25zdCB4ID0gYXJyYXlzWydwb3NpdGlvbi54J11bZW50aXR5SWRdO1xyXG4gICAgICogICAgIGNvbnN0IHkgPSBhcnJheXNbJ3Bvc2l0aW9uLnknXVtlbnRpdHlJZF07XHJcbiAgICAgKiAgICAgY29uc3QgeiA9IGFycmF5c1sncG9zaXRpb24ueiddW2VudGl0eUlkXTtcclxuICAgICAqIH1cclxuICAgICAqL1xyXG4gICAgZ2V0RmllbGRBcnJheXMoY29tcG9uZW50VHlwZSwgZmllbGRQYXRocykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3QgZmllbGRQYXRoIG9mIGZpZWxkUGF0aHMpIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50VHlwZX0uJHtmaWVsZFBhdGh9YDtcclxuICAgICAgICAgICAgcmVzdWx0W2ZpZWxkUGF0aF0gPSB0aGlzLl9udW1lcmljQXJyYXlzLmdldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgc2luZ2xlIFR5cGVkQXJyYXkgZm9yIGRpcmVjdCBmaWVsZCBhY2Nlc3MuXHJcbiAgICAgKiBVc2UgaW4gaG90IGxvb3BzIHdoZXJlIHlvdSBuZWVkIHRvIHJlYWQvd3JpdGUgbWFueSBlbnRpdGllcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50VHlwZSAtIENvbXBvbmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGRQYXRoIC0gRmllbGQgcGF0aCAoZS5nLiwgJ3Bvc2l0aW9uLngnKVxyXG4gICAgICogQHJldHVybnMge0Zsb2F0MzJBcnJheXx1bmRlZmluZWR9IERpcmVjdCBhcnJheSByZWZlcmVuY2VcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBjb25zdCBwb3NYID0gZ2FtZS5nZXRGaWVsZEFycmF5KCd0cmFuc2Zvcm0nLCAncG9zaXRpb24ueCcpO1xyXG4gICAgICogY29uc3QgcG9zWiA9IGdhbWUuZ2V0RmllbGRBcnJheSgndHJhbnNmb3JtJywgJ3Bvc2l0aW9uLnonKTtcclxuICAgICAqIGZvciAoY29uc3QgaWQgb2YgbmVhcmJ5VW5pdHMpIHtcclxuICAgICAqICAgICBjb25zdCBkeCA9IG15WCAtIHBvc1hbaWRdO1xyXG4gICAgICogICAgIGNvbnN0IGR6ID0gbXlaIC0gcG9zWltpZF07XHJcbiAgICAgKiB9XHJcbiAgICAgKi9cclxuICAgIGdldEZpZWxkQXJyYXkoY29tcG9uZW50VHlwZSwgZmllbGRQYXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50VHlwZX0uJHtmaWVsZFBhdGh9YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgbXVsdGlwbGUgZmllbGRzIGZyb20gYSBjb21wb25lbnQgaW4gb25lIGNhbGwgLSBtb3JlIGVmZmljaWVudCB0aGFuIG11bHRpcGxlIGdldEZpZWxkIGNhbGxzLlxyXG4gICAgICogUmV0dXJucyBwbGFpbiB2YWx1ZXMgKG5vdCBhIHByb3h5KSwgc28gaXQncyBhIHNuYXBzaG90IHRoYXQgd29uJ3QgdHJhY2sgY2hhbmdlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW50aXR5SWQgLSBFbnRpdHkgSURcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRUeXBlIC0gQ29tcG9uZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGZpZWxkUGF0aHMgLSBBcnJheSBvZiBmaWVsZCBwYXRocyB0byByZWFkXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBNYXAgb2YgZmllbGRQYXRoIC0+IHZhbHVlXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogY29uc3QgeyAncG9zaXRpb24ueCc6IHgsICdwb3NpdGlvbi56JzogeiB9ID0gZ2FtZS5nZXRGaWVsZHMoaWQsICd0cmFuc2Zvcm0nLCBbJ3Bvc2l0aW9uLngnLCAncG9zaXRpb24ueiddKTtcclxuICAgICAqL1xyXG4gICAgZ2V0RmllbGRzKGVudGl0eUlkLCBjb21wb25lbnRUeXBlLCBmaWVsZFBhdGhzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZFBhdGggb2YgZmllbGRQYXRocykge1xyXG4gICAgICAgICAgICByZXN1bHRbZmllbGRQYXRoXSA9IHRoaXMuX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRUeXBlLCBlbnRpdHlJZCwgZmllbGRQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlIG11bHRpcGxlIGZpZWxkcyB0byBhIGNvbXBvbmVudCBpbiBvbmUgY2FsbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW50aXR5SWQgLSBFbnRpdHkgSURcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRUeXBlIC0gQ29tcG9uZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZFZhbHVlcyAtIE1hcCBvZiBmaWVsZFBhdGggLT4gdmFsdWVcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBnYW1lLnNldEZpZWxkcyhpZCwgJ3ZlbG9jaXR5JywgeyB2eDogMTAsIHZ5OiAwLCB2ejogNSB9KTtcclxuICAgICAqL1xyXG4gICAgc2V0RmllbGRzKGVudGl0eUlkLCBjb21wb25lbnRUeXBlLCBmaWVsZFZhbHVlcykge1xyXG4gICAgICAgIGZvciAoY29uc3QgZmllbGRQYXRoIGluIGZpZWxkVmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldE51bWVyaWNGaWVsZChjb21wb25lbnRUeXBlLCBlbnRpdHlJZCwgZmllbGRQYXRoLCB0aGlzLl90b1N0b3JhZ2VWYWx1ZShmaWVsZFZhbHVlc1tmaWVsZFBhdGhdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBmaWVsZCB2YWx1ZSByZXByZXNlbnRzIG51bGwvdW5zZXRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFZhbHVlIGZyb20gZ2V0RmllbGQgb3IgZGlyZWN0IFR5cGVkQXJyYXkgcmVhZFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IC0gVHJ1ZSBpZiB2YWx1ZSByZXByZXNlbnRzIG51bGxcclxuICAgICAqL1xyXG4gICAgaXNOdWxsKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSAtSW5maW5pdHkgfHwgdmFsdWUgPT09IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIE5VTEwgU0VOVElORUwgQ09OVkVSU0lPTiBVVElMSVRJRVNcclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLyBUeXBlZEFycmF5cyBjYW4ndCBzdG9yZSBudWxsLCBzbyB3ZSB1c2UgLUluZmluaXR5IGFzIGEgc2VudGluZWwgdmFsdWUuXHJcbiAgICAvLyBUaGVzZSBtZXRob2RzIHByb3ZpZGUgY29uc2lzdGVudCBjb252ZXJzaW9uIGF0IGFsbCBib3VuZGFyaWVzOlxyXG4gICAgLy8gICAtIF90b1N0b3JhZ2VWYWx1ZSAvIF9mcm9tU3RvcmFnZVZhbHVlOiBmb3IgVHlwZWRBcnJheSByZWFkL3dyaXRlXHJcbiAgICAvLyAgIC0gX3RvU3luY1ZhbHVlIC8gX2Zyb21TeW5jVmFsdWU6IGZvciBKU09OIHNlcmlhbGl6YXRpb24gKHN5bmMpXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydCBBUEkgdmFsdWUgdG8gVHlwZWRBcnJheSBzdG9yYWdlIGZvcm1hdFxyXG4gICAgICogbnVsbCAtPiAtSW5maW5pdHkgKG51bGwgc2VudGluZWwpLCBvdGhlciB2YWx1ZXMgcGFzcyB0aHJvdWdoXHJcbiAgICAgKi9cclxuICAgIF90b1N0b3JhZ2VWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IC1JbmZpbml0eSA6IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydCBUeXBlZEFycmF5IHN0b3JhZ2UgdmFsdWUgdG8gQVBJIGZvcm1hdFxyXG4gICAgICogLUluZmluaXR5IChudWxsIHNlbnRpbmVsKSAtPiBudWxsLCBvdGhlciB2YWx1ZXMgcGFzcyB0aHJvdWdoXHJcbiAgICAgKi9cclxuICAgIF9mcm9tU3RvcmFnZVZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSAtSW5maW5pdHkgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IFR5cGVkQXJyYXkgc3RvcmFnZSB2YWx1ZSB0byBKU09OLXNhZmUgZm9ybWF0IGZvciBzeW5jXHJcbiAgICAgKiAtSW5maW5pdHkgKG51bGwgc2VudGluZWwpIC0+IG51bGwgKEpTT04gbnVsbCksIG90aGVyIHZhbHVlcyBwYXNzIHRocm91Z2hcclxuICAgICAqIE5vdGU6IFRoaXMgaXMgdGhlIHNhbWUgYXMgX2Zyb21TdG9yYWdlVmFsdWUgc2luY2UgSlNPTiB1c2VzIG51bGxcclxuICAgICAqL1xyXG4gICAgX3RvU3luY1ZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSAtSW5maW5pdHkgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IEpTT04gc3luYyB2YWx1ZSBiYWNrIHRvIFR5cGVkQXJyYXkgc3RvcmFnZSBmb3JtYXRcclxuICAgICAqIG51bGwgKEpTT04gbnVsbCkgLT4gLUluZmluaXR5IChudWxsIHNlbnRpbmVsKSwgb3RoZXIgdmFsdWVzIHBhc3MgdGhyb3VnaFxyXG4gICAgICogTm90ZTogVGhpcyBpcyB0aGUgc2FtZSBhcyBfdG9TdG9yYWdlVmFsdWUgc2luY2UgSlNPTiB1c2VzIG51bGxcclxuICAgICAqL1xyXG4gICAgX2Zyb21TeW5jVmFsdWUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyAtSW5maW5pdHkgOiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlIGNvbXBvbmVudCBkYXRhIHRvIFR5cGVkQXJyYXlzIChmb3IgbnVtZXJpYyBjb21wb25lbnRzKVxyXG4gICAgICogSGFuZGxlcyBudW1iZXJzLCBib29sZWFucyAoYXMgMC8xKSwgYW5kIGVudW0gdmFsdWVzIChhbHJlYWR5IGNvbnZlcnRlZCB0byBpbmRpY2VzKVxyXG4gICAgICovXHJcbiAgICBfd3JpdGVOdW1lcmljQ29tcG9uZW50KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgZGF0YSwgc2NoZW1hLCBwcmVmaXggPSAnJykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNjaGVtYSkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZFBhdGggPSBwcmVmaXggPyBgJHtwcmVmaXh9LiR7a2V5fWAgOiBrZXk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYVZhbHVlID0gc2NoZW1hW2tleV07XHJcbiAgICAgICAgICAgIGxldCBkYXRhVmFsdWUgPSBwcmVmaXhcclxuICAgICAgICAgICAgICAgID8gdGhpcy5fZ2V0TmVzdGVkVmFsdWUoZGF0YSwgZmllbGRQYXRoKVxyXG4gICAgICAgICAgICAgICAgOiBkYXRhW2tleV07XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNjaGVtYVZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2NoZW1hVmFsdWUgPT09ICdib29sZWFuJyB8fCB0eXBlb2Ygc2NoZW1hVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGJvb2xlYW5zIHRvIDAvMSBmb3Igc3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhVmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFWYWx1ZSA9IGRhdGFWYWx1ZSA/IDEgOiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgZnJvbSBzY2hlbWEgaWYgZGF0YSB2YWx1ZSBpcyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFWYWx1ZSA9IHR5cGVvZiBzY2hlbWFWYWx1ZSA9PT0gJ2Jvb2xlYW4nID8gKHNjaGVtYVZhbHVlID8gMSA6IDApIDogc2NoZW1hVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBmaWVsZFBhdGgsIGRhdGFWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NoZW1hVmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIG51bGwgc2NoZW1hIGZpZWxkczogdXNlIG51bGwgc2VudGluZWwgYXMgZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGZpZWxkUGF0aCwgdGhpcy5fdG9TdG9yYWdlVmFsdWUoZGF0YVZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NoZW1hVmFsdWUgJiYgdHlwZW9mIHNjaGVtYVZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShzY2hlbWFWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dyaXRlTnVtZXJpY0NvbXBvbmVudChjb21wb25lbnRJZCwgZW50aXR5SWQsIGRhdGEsIHNjaGVtYVZhbHVlLCBmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBjb21wb25lbnQgZGF0YSBmcm9tIFR5cGVkQXJyYXlzIGFuZCByZXR1cm4gYXMgcHJveHkgb2JqZWN0XHJcbiAgICAgKiBQcm94eSByZWFkcy93cml0ZXMgZGlyZWN0bHkgZnJvbSBUeXBlZEFycmF5cyBvbiBldmVyeSBhY2Nlc3MgKG5vIHN0YWxlIGRhdGEpXHJcbiAgICAgKiBQcm94aWVzIGFyZSBjYWNoZWQgcGVyIGVudGl0eStjb21wb25lbnQgdG8gYXZvaWQgR0MgY2h1cm5cclxuICAgICAqL1xyXG4gICAgX3JlYWROdW1lcmljQ29tcG9uZW50KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgc2NoZW1hLCBwcmVmaXggPSAnJykge1xyXG4gICAgICAgIC8vIEZvciB0b3AtbGV2ZWwgY2FsbHMgKG5vIHByZWZpeCksIGNoZWNrIHByb3h5IGNhY2hlIGZpcnN0XHJcbiAgICAgICAgaWYgKCFwcmVmaXgpIHtcclxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudENhY2hlID0gdGhpcy5fcHJveHlDYWNoZS5nZXQoY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudENhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRDYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3h5Q2FjaGUuc2V0KGNvbXBvbmVudElkLCBjb21wb25lbnRDYWNoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gY29tcG9uZW50Q2FjaGUuZ2V0KGVudGl0eUlkKTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGNhY2hlIHRoZSBwcm94eVxyXG4gICAgICAgICAgICBjb25zdCBwcm94eSA9IHRoaXMuX2NyZWF0ZUNvbXBvbmVudFByb3h5KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgc2NoZW1hLCAnJyk7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudENhY2hlLnNldChlbnRpdHlJZCwgcHJveHkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJveHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5lc3RlZCBvYmplY3RzICh3aXRoIHByZWZpeCkgc3RpbGwgY3JlYXRlIHByb3hpZXMgYnV0IGFyZW4ndCBjYWNoZWQgc2VwYXJhdGVseVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVDb21wb25lbnRQcm94eShjb21wb25lbnRJZCwgZW50aXR5SWQsIHNjaGVtYSwgcHJlZml4KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIHByb3h5IHRoYXQgcmVhZHMvd3JpdGVzIGRpcmVjdGx5IGZyb20gVHlwZWRBcnJheXNcclxuICAgICAqIEV2ZXJ5IHByb3BlcnR5IGFjY2VzcyBnb2VzIHRocm91Z2ggdGhlIHByb3h5IHRyYXBzIGZvciBsaXZlIGRhdGFcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUNvbXBvbmVudFByb3h5KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgc2NoZW1hLCBwcmVmaXgpIHtcclxuICAgICAgICBjb25zdCBnYW1lID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8gQnVpbGQgc2NoZW1hIGluZm8gZm9yIGZhc3QgbG9va3Vwc1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYUluZm8gPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NoZW1hVmFsdWUgPSBzY2hlbWFba2V5XTtcclxuICAgICAgICAgICAgc2NoZW1hSW5mb1trZXldID0ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBwcmVmaXggPyBgJHtwcmVmaXh9LiR7a2V5fWAgOiBrZXksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBzY2hlbWFWYWx1ZSA9PT0gbnVsbCA/ICdudWxsJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc2NoZW1hVmFsdWUgPT09ICdib29sZWFuJyA/ICdib29sZWFuJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHNjaGVtYVZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2NoZW1hVmFsdWUgPT09ICdzdHJpbmcnKSA/ICdudW1iZXInIDpcclxuICAgICAgICAgICAgICAgICAgICAgIChzY2hlbWFWYWx1ZSAmJiBzY2hlbWFWYWx1ZS4kZml4ZWRBcnJheSkgPyAnZml4ZWRBcnJheScgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgKHNjaGVtYVZhbHVlICYmIHNjaGVtYVZhbHVlLiRiaXRtYXNrKSA/ICdiaXRtYXNrJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAoc2NoZW1hVmFsdWUgJiYgc2NoZW1hVmFsdWUuJGVudW0pID8gJ2VudW0nIDpcclxuICAgICAgICAgICAgICAgICAgICAgIChzY2hlbWFWYWx1ZSAmJiB0eXBlb2Ygc2NoZW1hVmFsdWUgPT09ICdvYmplY3QnKSA/ICduZXN0ZWQnIDogJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgc2NoZW1hVmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhY2hlIGZvciBuZXN0ZWQgcHJveGllcyAoZml4ZWRBcnJheSwgYml0bWFzaywgbmVzdGVkIG9iamVjdHMpXHJcbiAgICAgICAgY29uc3QgbmVzdGVkQ2FjaGUgPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh7fSwge1xyXG4gICAgICAgICAgICBnZXQodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IEpTT04uc3RyaW5naWZ5XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RvSlNPTicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHNjaGVtYUluZm9ba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLnR5cGUgPT09ICdudW1iZXInIHx8IGluZm8udHlwZSA9PT0gJ2VudW0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLmZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZm8udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLmZpZWxkUGF0aCkgIT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZm8udHlwZSA9PT0gJ251bGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLmZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZm8udHlwZSA9PT0gJ2ZpeGVkQXJyYXknIHx8IGluZm8udHlwZSA9PT0gJ2JpdG1hc2snIHx8IGluZm8udHlwZSA9PT0gJ25lc3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBnZXR0ZXIgdG8gZ2V0IHRoZSBuZXN0ZWQgcHJveHksIHRoZW4gdG9KU09OIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkID0gbmVzdGVkQ2FjaGVba2V5XSB8fCBnYW1lLl9jcmVhdGVOZXN0ZWRQcm94eShjb21wb25lbnRJZCwgZW50aXR5SWQsIGtleSwgaW5mbywgcHJlZml4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IG5lc3RlZC50b0pTT04gPyBuZXN0ZWQudG9KU09OKCkgOiBuZXN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBzY2hlbWFJbmZvW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbmZvKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbmZvLnR5cGUgPT09ICdudW1iZXInIHx8IGluZm8udHlwZSA9PT0gJ2VudW0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdhbWUuX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGluZm8uZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5mby50eXBlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZS5fZ2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgaW5mby5maWVsZFBhdGgpICE9PSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmZvLnR5cGUgPT09ICdudWxsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLmZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZm8udHlwZSA9PT0gJ2ZpeGVkQXJyYXknIHx8IGluZm8udHlwZSA9PT0gJ2JpdG1hc2snIHx8IGluZm8udHlwZSA9PT0gJ25lc3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSBuZXN0ZWQgcHJveGllcyB0byBhdm9pZCByZWNyZWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXN0ZWRDYWNoZVtwcm9wXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRDYWNoZVtwcm9wXSA9IGdhbWUuX2NyZWF0ZU5lc3RlZFByb3h5KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgcHJvcCwgaW5mbywgcHJlZml4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5lc3RlZENhY2hlW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBzY2hlbWFJbmZvW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbmZvKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlZFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5mby50eXBlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdG9yZWRWYWx1ZSA9IHZhbHVlID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZm8udHlwZSA9PT0gJ251bGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkVmFsdWUgPSBnYW1lLl90b1N0b3JhZ2VWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZm8udHlwZSA9PT0gJ251bWJlcicgfHwgaW5mby50eXBlID09PSAnYm9vbGVhbicgfHwgaW5mby50eXBlID09PSAnbnVsbCcgfHwgaW5mby50eXBlID09PSAnZW51bScpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lLl9zZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLmZpZWxkUGF0aCwgc3RvcmVkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvd25LZXlzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHNjaGVtYUluZm8pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcCBpbiBzY2hlbWFJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgbmVzdGVkIHByb3h5IGZvciBmaXhlZEFycmF5LCBiaXRtYXNrLCBvciBuZXN0ZWQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIF9jcmVhdGVOZXN0ZWRQcm94eShjb21wb25lbnRJZCwgZW50aXR5SWQsIGtleSwgaW5mbywgcHJlZml4KSB7XHJcbiAgICAgICAgaWYgKGluZm8udHlwZSA9PT0gJ2ZpeGVkQXJyYXknKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVGaXhlZEFycmF5UHJveHkoY29tcG9uZW50SWQsIGVudGl0eUlkLCBrZXksIGluZm8uc2NoZW1hVmFsdWUuJGZpeGVkQXJyYXksIHByZWZpeCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmZvLnR5cGUgPT09ICdiaXRtYXNrJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlQml0bWFza1Byb3h5KGNvbXBvbmVudElkLCBlbnRpdHlJZCwga2V5LCBpbmZvLnNjaGVtYVZhbHVlLiRiaXRtYXNrLCBwcmVmaXgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5mby50eXBlID09PSAnbmVzdGVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlQ29tcG9uZW50UHJveHkoY29tcG9uZW50SWQsIGVudGl0eUlkLCBpbmZvLnNjaGVtYVZhbHVlLCBpbmZvLmZpZWxkUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gYXJyYXktbGlrZSBwcm94eSBmb3IgJGZpeGVkQXJyYXkgZmllbGRzXHJcbiAgICAgKiBBbGxvd3MgYXJyYXlbaW5kZXhdIGFjY2VzcyB0aGF0IG1hcHMgdG8gaW5kaXZpZHVhbCBUeXBlZEFycmF5IGZpZWxkc1xyXG4gICAgICovXHJcbiAgICBfY3JlYXRlRml4ZWRBcnJheVByb3h5KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYmFzZU5hbWUsIGNvbmZpZywgcHJlZml4ID0gJycpIHtcclxuICAgICAgICBjb25zdCBnYW1lID0gdGhpcztcclxuICAgICAgICAvLyBTdXBwb3J0IGJvdGggc3RhdGljIHNpemUgYW5kIGR5bmFtaWMgc2l6ZUZyb20gKGVudW0tYmFzZWQpXHJcbiAgICAgICAgbGV0IHNpemUgPSBjb25maWcuc2l6ZSB8fCAwO1xyXG4gICAgICAgIGlmIChjb25maWcuc2l6ZUZyb20pIHtcclxuICAgICAgICAgICAgY29uc3QgZW51bU1hcCA9IHRoaXMuY29tcG9uZW50R2VuZXJhdG9yLmdldEVudW1NYXAoY29uZmlnLnNpemVGcm9tKTtcclxuICAgICAgICAgICAgc2l6ZSA9IGVudW1NYXA/LnRvVmFsdWU/Lmxlbmd0aCB8fCAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaWVsZHMgPSBjb25maWcuZmllbGRzO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkUHJlZml4ID0gcHJlZml4ID8gYCR7cHJlZml4fS4ke2Jhc2VOYW1lfWAgOiBiYXNlTmFtZTtcclxuXHJcbiAgICAgICAgaWYgKGZpZWxkcyAmJiBBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcclxuICAgICAgICAgICAgLy8gTXVsdGktZmllbGQgYXJyYXk6IGVhY2ggZWxlbWVudCBpcyBhbiBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGZpZWxkc1xyXG4gICAgICAgICAgICAvLyBGaWVsZHMgc3RvcmVkIGFzOiBiYXNlTmFtZV9maWVsZDAsIGJhc2VOYW1lX2ZpZWxkMSwgZXRjLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XHJcbiAgICAgICAgICAgICAgICBnZXQodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdsZW5ndGgnKSByZXR1cm4gc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IEpTT04uc3RyaW5naWZ5IHZpYSB0b0pTT05cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RvSlNPTicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtmaWVsZF0gPSBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBgJHtmaWVsZFByZWZpeH1fJHtmaWVsZH0ke2l9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycltpXSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHByb3AsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGluZGV4KSAmJiBpbmRleCA+PSAwICYmIGluZGV4IDwgc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gb2JqZWN0IHdpdGggYWxsIGZpZWxkcyBmb3IgdGhpcyBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2ZpZWxkXSA9IGdhbWUuX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGAke2ZpZWxkUHJlZml4fV8ke2ZpZWxkfSR7aW5kZXh9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHByb3h5IGZvciBmaWVsZCB3cml0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm94eShlbGVtZW50LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQodCwgZiwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbZl0gPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuX3NldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGAke2ZpZWxkUHJlZml4fV8ke2Z9JHtpbmRleH1gLCBnYW1lLl90b1N0b3JhZ2VWYWx1ZSh2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChwcm9wLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihpbmRleCkgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IHNpemUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW2ZpZWxkXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5fc2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYCR7ZmllbGRQcmVmaXh9XyR7ZmllbGR9JHtpbmRleH1gLCBnYW1lLl90b1N0b3JhZ2VWYWx1ZSh2YWx1ZVtmaWVsZF0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG93bktleXModGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChTdHJpbmcoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChwcm9wLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihpbmRleCkgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtmaWVsZF0gPSBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBgJHtmaWVsZFByZWZpeH1fJHtmaWVsZH0ke2luZGV4fWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTaW1wbGUgYXJyYXk6IGJhc2VOYW1lMCwgYmFzZU5hbWUxLCBldGMuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcclxuICAgICAgICAgICAgICAgIGdldCh0YXJnZXQsIHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2xlbmd0aCcpIHJldHVybiBzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQgSlNPTi5zdHJpbmdpZnkgdmlhIHRvSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAndG9KU09OJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycltpXSA9IGdhbWUuX2dldE51bWVyaWNGaWVsZChjb21wb25lbnRJZCwgZW50aXR5SWQsIGAke2ZpZWxkUHJlZml4fSR7aX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQocHJvcCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oaW5kZXgpICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lLl9nZXROdW1lcmljRmllbGQoY29tcG9uZW50SWQsIGVudGl0eUlkLCBgJHtmaWVsZFByZWZpeH0ke2luZGV4fWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChwcm9wLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihpbmRleCkgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5fc2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYCR7ZmllbGRQcmVmaXh9JHtpbmRleH1gLCBnYW1lLl90b1N0b3JhZ2VWYWx1ZSh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG93bktleXModGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG51bWVyaWMgaW5kaWNlcyBhcyBzdHJpbmdzIGZvciBKU09OLnN0cmluZ2lmeSBlbnVtZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goU3RyaW5nKGkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQocHJvcCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oaW5kZXgpICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5fZ2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYCR7ZmllbGRQcmVmaXh9JHtpbmRleH1gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBwcm94eSBmb3IgJGJpdG1hc2sgZmllbGRzXHJcbiAgICAgKiBCaXRtYXNrIGlzIHN0b3JlZCBhcyBpbmRpdmlkdWFsIDMyLWJpdCBmaWVsZHMgKGJhc2VOYW1lMCwgYmFzZU5hbWUxLCBldGMuKVxyXG4gICAgICogUmV0dXJucyBhIHByb3h5IG9iamVjdCB3aXRoIGhlbHBlciBtZXRob2RzOiBoYXMoaWQpLCBhZGQoaWQpLCByZW1vdmUoaWQpLCB0b0FycmF5KClcclxuICAgICAqIEFsc28gc3VwcG9ydHMgZGlyZWN0IG51bWVyaWMgb3BlcmF0aW9ucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUJpdG1hc2tQcm94eShjb21wb25lbnRJZCwgZW50aXR5SWQsIGJhc2VOYW1lLCBjb25maWcsIHByZWZpeCA9ICcnKSB7XHJcbiAgICAgICAgY29uc3QgZ2FtZSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGJpdENvdW50O1xyXG4gICAgICAgIGxldCBlbnVtTWFwID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGNvbmZpZy5zaXplRnJvbSkge1xyXG4gICAgICAgICAgICBlbnVtTWFwID0gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0RW51bU1hcChjb25maWcuc2l6ZUZyb20pO1xyXG4gICAgICAgICAgICBiaXRDb3VudCA9IGVudW1NYXA/LnRvVmFsdWU/Lmxlbmd0aCB8fCAzMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiaXRDb3VudCA9IGNvbmZpZy5zaXplIHx8IDMyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRDb3VudCA9IE1hdGguY2VpbChiaXRDb3VudCAvIDMyKTtcclxuICAgICAgICBjb25zdCBmaWVsZFByZWZpeCA9IHByZWZpeCA/IGAke3ByZWZpeH0uJHtiYXNlTmFtZX1gIDogYmFzZU5hbWU7XHJcblxyXG4gICAgICAgIC8vIEhlbHBlciB0byBnZXQgaW5kZXggZnJvbSBzdHJpbmcgSUQgb3IgbnVtYmVyXHJcbiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSAoaWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHJldHVybiBpZDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycgJiYgZW51bU1hcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudW1NYXAudG9JbmRleFtpZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zIGZvciByZWFkaW5nL3dyaXRpbmcgaW5kaXZpZHVhbCAzMi1iaXQgZmllbGRzXHJcbiAgICAgICAgY29uc3QgZ2V0RmllbGRWYWx1ZSA9IChmaWVsZElkeCkgPT4gZ2FtZS5fZ2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYCR7ZmllbGRQcmVmaXh9JHtmaWVsZElkeH1gKSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IHNldEZpZWxkVmFsdWUgPSAoZmllbGRJZHgsIHZhbCkgPT4gZ2FtZS5fc2V0TnVtZXJpY0ZpZWxkKGNvbXBvbmVudElkLCBlbnRpdHlJZCwgYCR7ZmllbGRQcmVmaXh9JHtmaWVsZElkeH1gLCB2YWwpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYml0bWFzayBvYmplY3Qgd2l0aCBoZWxwZXIgbWV0aG9kcyAod29ya3MgZm9yIGJvdGggc2luZ2xlIGFuZCBtdWx0aS1maWVsZClcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBiaXRtYXNrIGhhcyBhIHNwZWNpZmljIGJpdCBzZXRcclxuICAgICAgICAgICAgaGFzKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGdldEluZGV4KGlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZElkeCA9IE1hdGguZmxvb3IoaW5kZXggLyAzMik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaXRJZHggPSBpbmRleCAlIDMyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChnZXRGaWVsZFZhbHVlKGZpZWxkSWR4KSAmICgxIDw8IGJpdElkeCkpICE9PSAwO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGEgYml0IHRvIHRoZSBiaXRtYXNrXHJcbiAgICAgICAgICAgIGFkZChpZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleChpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRJZHggPSBNYXRoLmZsb29yKGluZGV4IC8gMzIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYml0SWR4ID0gaW5kZXggJSAzMjtcclxuICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoZmllbGRJZHgsIGdldEZpZWxkVmFsdWUoZmllbGRJZHgpIHwgKDEgPDwgYml0SWR4KSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhIGJpdCBmcm9tIHRoZSBiaXRtYXNrXHJcbiAgICAgICAgICAgIHJlbW92ZShpZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleChpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRJZHggPSBNYXRoLmZsb29yKGluZGV4IC8gMzIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYml0SWR4ID0gaW5kZXggJSAzMjtcclxuICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWUoZmllbGRJZHgsIGdldEZpZWxkVmFsdWUoZmllbGRJZHgpICYgfigxIDw8IGJpdElkeCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyBUb2dnbGUgYSBiaXQgaW4gdGhlIGJpdG1hc2tcclxuICAgICAgICAgICAgdG9nZ2xlKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGdldEluZGV4KGlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZElkeCA9IE1hdGguZmxvb3IoaW5kZXggLyAzMik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaXRJZHggPSBpbmRleCAlIDMyO1xyXG4gICAgICAgICAgICAgICAgc2V0RmllbGRWYWx1ZShmaWVsZElkeCwgZ2V0RmllbGRWYWx1ZShmaWVsZElkeCkgXiAoMSA8PCBiaXRJZHgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGFycmF5IG9mIGFsbCBzZXQgSURzIChzdHJpbmdzIGlmIGVudW1NYXAgZXhpc3RzLCBvdGhlcndpc2UgaW5kaWNlcylcclxuICAgICAgICAgICAgdG9BcnJheSgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRJZHggPSBNYXRoLmZsb29yKGkgLyAzMik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYml0SWR4ID0gaSAlIDMyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZ2V0RmllbGRWYWx1ZShmaWVsZElkeCkgJiAoMSA8PCBiaXRJZHgpKSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbnVtTWFwID8gZW51bU1hcC50b1ZhbHVlW2ldIDogaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIENsZWFyIGFsbCBiaXRzXHJcbiAgICAgICAgICAgIGNsZWFyKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKGksIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gRm9yIEpTT04gc2VyaWFsaXphdGlvbiAtIHJldHVybnMgcmF3IG51bWVyaWMgdmFsdWUocylcclxuICAgICAgICAgICAgdG9KU09OKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkQ291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RmllbGRWYWx1ZSgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbaV0gPSBnZXRGaWVsZFZhbHVlKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBuZXN0ZWQgdmFsdWUgZnJvbSBhbiBvYmplY3QgdXNpbmcgZG90IG5vdGF0aW9uIHBhdGhcclxuICAgICAqL1xyXG4gICAgX2dldE5lc3RlZFZhbHVlKG9iaiwgcGF0aCkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpO1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gb2JqO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnQgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXJ2aWNlIHJlZ2lzdHJ5IG1ldGhvZHMgKGRlbGVnYXRlZCB0byBHYW1lU2VydmljZXMpXHJcbiAgICByZWdpc3RlcihrZXksIG1ldGhvZCkge1xyXG4gICAgICAgIHRoaXMuX3NlcnZpY2VzLnJlZ2lzdGVyKGtleSwgbWV0aG9kKTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNTZXJ2aWNlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlcy5oYXMoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsKGtleSwgLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3NlcnZpY2VzLmNhbGwoa2V5LCAuLi5hcmdzKTtcclxuICAgICAgICBpZiAodGhpcy5jYWxsTG9nZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbExvZ2dlci5sb2coa2V5LCBhcmdzLCByZXN1bHQsIHRoaXMuc3RhdGUubm93KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBsaXN0U2VydmljZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2VzLmxpc3RTZXJ2aWNlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXQoaXNTZXJ2ZXIgPSBmYWxzZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5pc1NlcnZlciA9IGlzU2VydmVyO1xyXG4gICAgICAgIGlmKCF0aGlzLmlzU2VydmVyKXtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJFdmVudCgnb25LZXlEb3duJywgZS5rZXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkR2FtZVNjcmlwdHMoY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkR2FtZVNjcmlwdHMoY29uZmlnLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0gdGhpcy5nZXRDb2xsZWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuZ2FtZUNvbmZpZyA9IGNvbmZpZyA/IGNvbmZpZyA6ICh0aGlzLmlzU2VydmVyID8gdGhpcy5jb2xsZWN0aW9ucy5jb25maWdzLnNlcnZlciA6IHRoaXMuY29sbGVjdGlvbnMuY29uZmlncy5nYW1lKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBTY2VuZU1hbmFnZXIgKGhhbmRsZXMgbGF6eSBzeXN0ZW0gaW5zdGFudGlhdGlvbilcclxuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlciA9IG5ldyBHVVRTLlNjZW5lTWFuYWdlcih0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gU3RvcmUgYXZhaWxhYmxlIHN5c3RlbSB0eXBlcyBmb3IgbGF6eSBpbnN0YW50aWF0aW9uXHJcbiAgICAgICAgdGhpcy5hdmFpbGFibGVTeXN0ZW1UeXBlcyA9IHRoaXMuZ2FtZUNvbmZpZy5zeXN0ZW1zIHx8IFtdO1xyXG4gICAgICAgIC8vIE1hcCB0byB0cmFjayBpbnN0YW50aWF0ZWQgc3lzdGVtcyBieSBuYW1lXHJcbiAgICAgICAgdGhpcy5zeXN0ZW1zQnlOYW1lID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIGluaXRpYWwgc2NlbmUgaWYgY29uZmlndXJlZCAoc2tpcCBmb3IgZWRpdG9ycyB0aGF0IG1hbmFnZSBzY2VuZSBsb2FkaW5nIGV4cGxpY2l0bHkpXHJcbiAgICAgICAgaWYgKCFvcHRpb25zLnNraXBJbml0aWFsU2NlbmUpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkSW5pdGlhbFNjZW5lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCB0aGUgaW5pdGlhbCBzY2VuZSBmcm9tIGdhbWUgY29uZmlnXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZEluaXRpYWxTY2VuZSgpIHtcclxuICAgICAgICBjb25zdCBpbml0aWFsU2NlbmUgPSB0aGlzLmdhbWVDb25maWcuaW5pdGlhbFNjZW5lO1xyXG4gICAgICAgIGlmIChpbml0aWFsU2NlbmUgJiYgdGhpcy5zY2VuZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY2VuZU1hbmFnZXIubG9hZFNjZW5lKGluaXRpYWxTY2VuZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQmFzZUVDU0dhbWVdIE5vIGluaXRpYWxTY2VuZSBjb25maWd1cmVkIGluIGdhbWUgY29uZmlnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG9yIGNyZWF0ZSBhIHN5c3RlbSBieSBuYW1lIChsYXp5IGluc3RhbnRpYXRpb24pXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3lzdGVtTmFtZSAtIFRoZSBzeXN0ZW0gY2xhc3MgbmFtZVxyXG4gICAgICogQHJldHVybnMge09iamVjdHxudWxsfSBUaGUgc3lzdGVtIGluc3RhbmNlIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRPckNyZWF0ZVN5c3RlbShzeXN0ZW1OYW1lKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBpbnN0YW50aWF0ZWRcclxuICAgICAgICBpZiAodGhpcy5zeXN0ZW1zQnlOYW1lLmhhcyhzeXN0ZW1OYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zeXN0ZW1zQnlOYW1lLmdldChzeXN0ZW1OYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgc3lzdGVtIHR5cGUgaXMgYXZhaWxhYmxlIChza2lwIGNoZWNrIGlmIG5vIHdoaXRlbGlzdCBkZWZpbmVkKVxyXG4gICAgICAgIGlmICh0aGlzLmF2YWlsYWJsZVN5c3RlbVR5cGVzLmxlbmd0aCA+IDAgJiYgIXRoaXMuYXZhaWxhYmxlU3lzdGVtVHlwZXMuaW5jbHVkZXMoc3lzdGVtTmFtZSkpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQmFzZUVDU0dhbWVdIFN5c3RlbSAnJHtzeXN0ZW1OYW1lfScgbm90IGluIGF2YWlsYWJsZSBzeXN0ZW1zIGxpc3RgKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2xhc3MgZXhpc3RzXHJcbiAgICAgICAgaWYgKCFHVVRTW3N5c3RlbU5hbWVdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtCYXNlRUNTR2FtZV0gU3lzdGVtIGNsYXNzICcke3N5c3RlbU5hbWV9JyBub3QgZm91bmQgaW4gR1VUU2ApO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgc3lzdGVtXHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBjYW52YXM6IHRoaXMuY2FudmFzIH07XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtSW5zdCA9IG5ldyBHVVRTW3N5c3RlbU5hbWVdKHRoaXMpO1xyXG4gICAgICAgIHN5c3RlbUluc3QuZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBBdXRvLXJlZ2lzdGVyIHNlcnZpY2VzIGZyb20gc3RhdGljIHNlcnZpY2VzIGFycmF5XHJcbiAgICAgICAgY29uc3QgU3lzdGVtQ2xhc3MgPSBHVVRTW3N5c3RlbU5hbWVdO1xyXG4gICAgICAgIGlmIChTeXN0ZW1DbGFzcy5zZXJ2aWNlcyAmJiBBcnJheS5pc0FycmF5KFN5c3RlbUNsYXNzLnNlcnZpY2VzKSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlcnZpY2VOYW1lIG9mIFN5c3RlbUNsYXNzLnNlcnZpY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN5c3RlbUluc3Rbc2VydmljZU5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcihzZXJ2aWNlTmFtZSwgc3lzdGVtSW5zdFtzZXJ2aWNlTmFtZV0uYmluZChzeXN0ZW1JbnN0KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0Jhc2VFQ1NHYW1lXSBTZXJ2aWNlICcke3NlcnZpY2VOYW1lfScgbm90IGZvdW5kIG9uICR7c3lzdGVtTmFtZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN5c3RlbUluc3QuaW5pdCkge1xyXG4gICAgICAgICAgICBzeXN0ZW1JbnN0LmluaXQocGFyYW1zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKHN5c3RlbUluc3QpO1xyXG4gICAgICAgIHRoaXMuc3lzdGVtc0J5TmFtZS5zZXQoc3lzdGVtTmFtZSwgc3lzdGVtSW5zdCk7XHJcblxyXG4gICAgICAgIHJldHVybiBzeXN0ZW1JbnN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBzeXN0ZW0gaXMgYXZhaWxhYmxlIChkZWZpbmVkIGluIGNvbmZpZylcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzeXN0ZW1OYW1lIC0gVGhlIHN5c3RlbSBjbGFzcyBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNTeXN0ZW1BdmFpbGFibGUoc3lzdGVtTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF2YWlsYWJsZVN5c3RlbVR5cGVzLmluY2x1ZGVzKHN5c3RlbU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dpdGNoIHRvIGEgZGlmZmVyZW50IHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2NlbmVOYW1lIC0gTmFtZSBvZiB0aGUgc2NlbmUgdG8gbG9hZFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHN3aXRjaFNjZW5lKHNjZW5lTmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lTWFuYWdlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNjZW5lTWFuYWdlci5zd2l0Y2hTY2VuZShzY2VuZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRFbnRpdHlJZCgpIHtcclxuICAgICAgICAvLyBOZXZlciByZWN5Y2xlIGVudGl0eSBJRHMgLSBhbHdheXMgdXNlIGZyZXNoIElEc1xyXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgYnVncyB3aGVyZSBjYWNoZWQgZW50aXR5IHJlZmVyZW5jZXMgKGxhc3RBdHRhY2tlciwgdGFyZ2V0LCBldGMuKVxyXG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwb2ludCB0byBjb21wbGV0ZWx5IGRpZmZlcmVudCBlbnRpdGllcyBhZnRlciBJRCByZXVzZVxyXG4gICAgICAgIC8vIE1lbW9yeSBjb3N0IGlzIG5lZ2xpZ2libGUgLSB0eXBlZCBhcnJheXMgZ3JvdyBhcyBuZWVkZWRcclxuICAgICAgICBpZiAodGhpcy5uZXh0RW50aXR5SWQgPj0gdGhpcy5NQVhfRU5USVRJRVMpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNYXhpbXVtIGVudGl0eSBsaW1pdCAoJHt0aGlzLk1BWF9FTlRJVElFU30pIHJlYWNoZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dEVudGl0eUlkKys7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29sbGVjdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwLmdldENvbGxlY3Rpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKGRlbHRhVGltZSkge1xyXG4gICAgICAgIC8vIE1lbW9yeSBsZWFrIGRlYnVnIGxvZ2dpbmcgLSBsb2dzIGNhY2hlIHNpemVzIGV2ZXJ5IDUgc2Vjb25kc1xyXG4gICAgICAgIGlmICghdGhpcy5fbWVtb3J5RGVidWdMYXN0TG9nKSB0aGlzLl9tZW1vcnlEZWJ1Z0xhc3RMb2cgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lIC0gdGhpcy5fbWVtb3J5RGVidWdMYXN0TG9nID49IDUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWVtb3J5RGVidWdMYXN0TG9nID0gdGhpcy5jdXJyZW50VGltZTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUNhY2hlOiB0aGlzLl9xdWVyeUNhY2hlPy5zaXplIHx8IDAsXHJcbiAgICAgICAgICAgICAgICBwcm94eUNhY2hlOiB0aGlzLl9wcm94eUNhY2hlPy5zaXplIHx8IDAsXHJcbiAgICAgICAgICAgICAgICBlbnRpdHlDb3VudDogdGhpcy5lbnRpdHlDb3VudCB8fCAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIENvbGxlY3Qgc3RhdHMgZnJvbSBzeXN0ZW1zXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3lzdGVtIG9mIHRoaXMuc3lzdGVtcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN5c3RlbS5fZW50aXR5UG9zaXRpb25DYWNoZSkgc3RhdHMucmVuZGVyUG9zQ2FjaGUgPSBzeXN0ZW0uX2VudGl0eVBvc2l0aW9uQ2FjaGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uX3VuaXRQb3NpdGlvbnMpIHN0YXRzLmZvd1VuaXRQb3MgPSBzeXN0ZW0uX3VuaXRQb3NpdGlvbnMuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uX2xvc0NhY2hlKSBzdGF0cy5sb3NDYWNoZSA9IHN5c3RlbS5fbG9zQ2FjaGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uc3Bhd25lZEVudGl0aWVzKSBzdGF0cy5zcGF3bmVkID0gc3lzdGVtLnNwYXduZWRFbnRpdGllcy5zaXplO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN5c3RlbS5wcm9qZWN0aWxlVHJhaWxzKSBzdGF0cy50cmFpbHMgPSBzeXN0ZW0ucHJvamVjdGlsZVRyYWlscy5zaXplO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN5c3RlbS5oZWFsdGhCYXJzKSBzdGF0cy5oZWFsdGhCYXJzID0gc3lzdGVtLmhlYWx0aEJhcnMuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uZGFtYWdlTnVtYmVycykgc3RhdHMuZG1nTnVtcyA9IHN5c3RlbS5kYW1hZ2VOdW1iZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uYWN0aXZlRWZmZWN0cykgc3RhdHMuZWZmZWN0cyA9IHN5c3RlbS5hY3RpdmVFZmZlY3RzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uZW50aXR5QmVoYXZpb3JTdGF0ZSkgc3RhdHMuYmVoYXZpb3JzID0gc3lzdGVtLmVudGl0eUJlaGF2aW9yU3RhdGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uX3VuaXREYXRhUG9vbCkgc3RhdHMubXZtdFBvb2wgPSBzeXN0ZW0uX3VuaXREYXRhUG9vbC5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNZW1vcnldJywgT2JqZWN0LmVudHJpZXMoc3RhdHMpLm1hcCgoW2ssdl0pID0+IGAke2t9OiAke3Z9YCkuam9pbignLCAnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNQYXVzZWQpIHtcclxuICAgICAgICAgICAgLy8gU3RhcnQgcGVyZm9ybWFuY2UgZnJhbWUgdHJhY2tpbmdcclxuICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNb25pdG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTW9uaXRvci5zdGFydEZyYW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSB0aWNrIGNvdW50IGJhc2VkIHRpbWluZyB0byBhdm9pZCBmbG9hdGluZy1wb2ludCBhY2N1bXVsYXRpb24gZXJyb3JzXHJcbiAgICAgICAgICAgIHRoaXMudGlja0NvdW50Kys7XHJcbiAgICAgICAgICAgIC8vIFVzZSBkZWx0YVRpbWUgZnJvbSBFbmdpbmUgKHJlc3BlY3RzIHRpY2tSYXRlIGNvbmZpZylcclxuICAgICAgICAgICAgLy8gUm91bmQgdG8gMiBkZWNpbWFsIHBsYWNlcyB0byBhdm9pZCBmbG9hdGluZy1wb2ludCBwcmVjaXNpb24gaXNzdWVzXHJcbiAgICAgICAgICAgIC8vIChlLmcuLCAzICogMC4wNSA9IDAuMTUwMDAwMDAwMDAwMDAwMDIgaW4gSmF2YVNjcmlwdClcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IE1hdGgucm91bmQodGhpcy50aWNrQ291bnQgKiBkZWx0YVRpbWUgKiAxMDApIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgYSByZWFzb25hYmxlIGFtb3VudCBvZiB0aW1lIGhhcyBwYXNzZWRcclxuICAgICAgICAgICAgLy8gY29uc3QgdGltZVNpbmNlTGFzdFVwZGF0ZSA9IHRoaXMuY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lO1xyXG5cclxuICAgICAgICAgICAgLy8gLy8gU2tpcCB1cGRhdGUgaWYgbW9yZSB0aGFuIDEgc2Vjb25kIGhhcyBwYXNzZWQgKHRhYiB3YXMgaW5hY3RpdmUpXHJcbiAgICAgICAgICAgIC8vIGlmICh0aW1lU2luY2VMYXN0VXBkYXRlID4gMTAwMCkge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5sYXN0VGltZSA9IHRoaXMuY3VycmVudFRpbWU7IC8vIFJlc2V0IHRpbWVyIHdpdGhvdXQgdXBkYXRpbmdcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5vdyA9IHRoaXMuY3VycmVudFRpbWU7XHJcbiAgICAgICAgICAgIC8vIFVzZSBkZWx0YVRpbWUgZnJvbSBFbmdpbmUgKHdoaWNoIHJlc3BlY3RzIHRpY2tSYXRlIGNvbmZpZylcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kZWx0YVRpbWUgPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsdGFUaW1lID0gZGVsdGFUaW1lO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5zeXN0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGRpc2FibGVkIHN5c3RlbXNcclxuICAgICAgICAgICAgICAgIGlmICghc3lzdGVtLmVuYWJsZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN5c3RlbU5hbWUgPSBzeXN0ZW0uY29uc3RydWN0b3IubmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTdGFydCB0cmFja2luZyB0aGlzIHN5c3RlbVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNb25pdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZU1vbml0b3Iuc3RhcnRTeXN0ZW0oc3lzdGVtTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN5c3RlbS51cGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzeXN0ZW0udXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5kIHVwZGF0ZSB0cmFja2luZ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNb25pdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZU1vbml0b3IuZW5kU3lzdGVtVXBkYXRlKHN5c3RlbU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKHN5c3RlbS5yZW5kZXIgJiYgIXRoaXMuaXNTZXJ2ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHJlbmRlciB0cmFja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlTW9uaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTW9uaXRvci5zdGFydFN5c3RlbVJlbmRlcihzeXN0ZW1OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHN5c3RlbS5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5kIHJlbmRlciB0cmFja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlTW9uaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTW9uaXRvci5lbmRTeXN0ZW1SZW5kZXIoc3lzdGVtTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBlcmZvcm1hbmNlTW9uaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIG5vIHJlbmRlciwgc3RpbGwgbmVlZCB0byBlbmQgdGhlIHN5c3RlbSB0cmFja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VNb25pdG9yLnN0YXJ0U3lzdGVtUmVuZGVyKHN5c3RlbU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VNb25pdG9yLmVuZFN5c3RlbVJlbmRlcihzeXN0ZW1OYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBlcmZvcm1hbmNlIG92ZXJsYXlcclxuICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VNb25pdG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlTW9uaXRvci51cGRhdGVPdmVybGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zdFVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb3N0VXBkYXRlKCkge1xyXG4gICAgICAgLy8gdGhpcy5kZXN5bmNEZWJ1Z2dlcj8uZGlzcGxheVN5bmMoZmFsc2UpOyBcclxuICAgICAgIFxyXG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSB0aGlzLmN1cnJlbnRUaW1lO1xyXG4gICAgXHJcbiAgICAgICAgdGhpcy5lbnRpdGllc1RvQWRkLmZvckVhY2goKGVudGl0eSkgPT4gdGhpcy5hZGRFbnRpdHkoZW50aXR5KSk7ICAgICAgICBcclxuICAgICAgICB0aGlzLmVudGl0aWVzVG9BZGQgPSBbXTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVFbnRpdHkoc2V0SWQpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHNldElkICE9PSB1bmRlZmluZWQgJiYgc2V0SWQgIT09IG51bGwgPyBzZXRJZCA6IHRoaXMuZ2V0RW50aXR5SWQoKTtcclxuICAgICAgICAvLyBMb2cgaWYgb3ZlcndyaXRpbmcgZXhpc3RpbmcgZW50aXR5IC0gdGhpcyBpcyBhIGJ1ZyFcclxuICAgICAgICBpZiAodGhpcy5lbnRpdHlBbGl2ZVtpZF0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0Jhc2VFQ1NHYW1lXSBjcmVhdGVFbnRpdHkgY2FsbGVkIGZvciBleGlzdGluZyBlbnRpdHkgJHtpZH0hYCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoJ2NyZWF0ZUVudGl0eSBjYWxsZWQgZnJvbTonKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWFyayBlbnRpdHkgYXMgYWxpdmVcclxuICAgICAgICB0aGlzLmVudGl0eUFsaXZlW2lkXSA9IDE7XHJcbiAgICAgICAgLy8gQ2xlYXIgY29tcG9uZW50IGJpdG1hc2tcclxuICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbaWQgKiAyXSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2lkICogMiArIDFdID0gMDtcclxuICAgICAgICB0aGlzLmVudGl0eUNvdW50Kys7XHJcbiAgICAgICAgLy8gV2hlbiB1c2luZyBhIHNwZWNpZmljIElELCBlbnN1cmUgbmV4dEVudGl0eUlkIGlzIGFsd2F5cyBoaWdoZXJcclxuICAgICAgICAvLyBUaGlzIGlzIGNyaXRpY2FsIGZvciBnZXRFbnRpdGllc1dpdGgoKSB3aGljaCBpdGVyYXRlcyB1cCB0byBuZXh0RW50aXR5SWRcclxuICAgICAgICBpZiAoaWQgPj0gdGhpcy5uZXh0RW50aXR5SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RW50aXR5SWQgPSBpZCArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95RW50aXR5KGVudGl0eUlkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVudGl0eUFsaXZlW2VudGl0eUlkXSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBOb3RpZnkgc3lzdGVtc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zeXN0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbSA9IHRoaXMuc3lzdGVtc1tpXTtcclxuICAgICAgICAgICAgaWYgKHN5c3RlbS5lbnRpdHlEZXN0cm95ZWQpIHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbS5lbnRpdHlEZXN0cm95ZWQoZW50aXR5SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDbGVhciBjb21wb25lbnQgZGF0YSBmcm9tIG9iamVjdCBzdG9yYWdlXHJcbiAgICAgICAgZm9yIChjb25zdCBbY29tcG9uZW50VHlwZSwgc3RvcmFnZV0gb2YgdGhpcy5fb2JqZWN0Q29tcG9uZW50cykge1xyXG4gICAgICAgICAgICBpZiAoc3RvcmFnZVtlbnRpdHlJZF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVtlbnRpdHlJZF0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGNhY2hlZCBwcm94aWVzIGZvciB0aGlzIGVudGl0eVxyXG4gICAgICAgIGZvciAoY29uc3QgWywgY29tcG9uZW50Q2FjaGVdIG9mIHRoaXMuX3Byb3h5Q2FjaGUpIHtcclxuICAgICAgICAgICAgY29tcG9uZW50Q2FjaGUuZGVsZXRlKGVudGl0eUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5vdGU6IFR5cGVkQXJyYXkgbnVtZXJpYyBkYXRhIGRvZXNuJ3QgbmVlZCBjbGVhcmluZyAtXHJcbiAgICAgICAgLy8gdGhlIGJpdG1hc2sgZW5zdXJlcyBpdCB3b24ndCBiZSByZWFkXHJcblxyXG4gICAgICAgIC8vIE1hcmsgZW50aXR5IGFzIGRlYWQgKG5vIElEIHJlY3ljbGluZyAtIElEcyBhcmUgbmV2ZXIgcmV1c2VkKVxyXG4gICAgICAgIHRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdID0gMDtcclxuICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyXSA9IDA7XHJcbiAgICAgICAgdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2VudGl0eUlkICogMiArIDFdID0gMDtcclxuICAgICAgICB0aGlzLmVudGl0eUNvdW50LS07XHJcblxyXG4gICAgICAgIC8vIEludmFsaWRhdGUgcXVlcnkgY2FjaGUgLSBlbnRpdHkgd2FzIGRlc3Ryb3llZCwgY2FjaGVkIHF1ZXJ5IHJlc3VsdHMgYXJlIHN0YWxlXHJcbiAgICAgICAgdGhpcy5fcXVlcnlDYWNoZS5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbXBvbmVudChlbnRpdHlJZCwgY29tcG9uZW50SWQsIGRhdGEpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRW50aXR5ICR7ZW50aXR5SWR9IGRvZXMgbm90IGV4aXN0YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb21wb25lbnRNZXRob2RzID0gdGhpcy5jYWxsKCdnZXRDb21wb25lbnRzJyk7XHJcbiAgICAgICAgaWYgKCFjb21wb25lbnRNZXRob2RzW2NvbXBvbmVudElkXSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtCYXNlRUNTR2FtZV0gTm8gY29tcG9uZW50IGZhY3RvcnkgZm9yICcke2NvbXBvbmVudElkfScuIEFkZCBpdCB0byB0aGUgY29tcG9uZW50cyBjb2xsZWN0aW9uLmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXNlIGZhY3RvcnkgZnVuY3Rpb24gaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIGRhdGEgZGlyZWN0bHkgYXMgZmFsbGJhY2tcclxuICAgICAgICBjb25zdCBjb21wb25lbnREYXRhID0gY29tcG9uZW50TWV0aG9kc1tjb21wb25lbnRJZF1cclxuICAgICAgICAgICAgPyBjb21wb25lbnRNZXRob2RzW2NvbXBvbmVudElkXShkYXRhKVxyXG4gICAgICAgICAgICA6IHsgLi4uZGF0YSB9O1xyXG5cclxuICAgICAgICAvLyBHZXQgY29tcG9uZW50IHR5cGUgSUQgYW5kIHNldCBiaXRtYXNrXHJcbiAgICAgICAgY29uc3QgdHlwZUlkID0gdGhpcy5fZ2V0Q29tcG9uZW50VHlwZUlkKGNvbXBvbmVudElkKTtcclxuICAgICAgICB0aGlzLl9zZXRDb21wb25lbnRCaXQoZW50aXR5SWQsIHR5cGVJZCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB1cCBzdG9yYWdlIG9uIGZpcnN0IGVuY291bnRlciAoYW5hbHl6ZXMgc2NoZW1hIGZvciBudW1lcmljIG9wdGltaXphdGlvbilcclxuICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLmNhbGwoJ2dldENvbXBvbmVudFNjaGVtYScsIGNvbXBvbmVudElkKTtcclxuICAgICAgICBjb25zdCBlbnVtTWFwID0gdGhpcy5oYXNTZXJ2aWNlKCdnZXRFbnVtTWFwJykgPyB0aGlzLmNhbGwoJ2dldEVudW1NYXAnLCBjb21wb25lbnRJZCkgOiBudWxsO1xyXG4gICAgICAgIGlmIChzY2hlbWEpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0dXBDb21wb25lbnRTdG9yYWdlKGNvbXBvbmVudElkLCBzY2hlbWEsIGVudW1NYXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIG51bWVyaWMgY29tcG9uZW50ICh1c2UgVHlwZWRBcnJheXMpIG9yIG9iamVjdCBjb21wb25lbnRcclxuICAgICAgICBjb25zdCBjb21wb25lbnRJbmZvID0gdGhpcy5fbnVtZXJpY0NvbXBvbmVudEluZm8uZ2V0KGNvbXBvbmVudElkKTtcclxuICAgICAgICBpZiAoY29tcG9uZW50SW5mbyAmJiBjb21wb25lbnRJbmZvLmlzTnVtZXJpYyAmJiBzY2hlbWEpIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgaW4gVHlwZWRBcnJheXNcclxuICAgICAgICAgICAgdGhpcy5fd3JpdGVOdW1lcmljQ29tcG9uZW50KGNvbXBvbmVudElkLCBlbnRpdHlJZCwgY29tcG9uZW50RGF0YSwgc2NoZW1hKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBpbiBvYmplY3Qgc3RvcmFnZSAoaW5kZXhlZCBieSBlbnRpdHkgSUQpXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLl9nZXRPYmplY3RTdG9yYWdlKGNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgc3RvcmFnZVtlbnRpdHlJZF0gPSBjb21wb25lbnREYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW52YWxpZGF0ZSBxdWVyeSBjYWNoZSAtIGNvbXBvbmVudCB3YXMgYWRkZWQsIGNhY2hlZCBxdWVyeSByZXN1bHRzIGFyZSBzdGFsZVxyXG4gICAgICAgIHRoaXMuX3F1ZXJ5Q2FjaGUuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9QVElNSVpBVElPTjogQWRkIG11bHRpcGxlIGNvbXBvbmVudHMgYXQgb25jZSB3aXRoIHNpbmdsZSBjYWNoZSBpbnZhbGlkYXRpb25cclxuICAgICAqIEBwYXJhbSB7Kn0gZW50aXR5SWQgLSBFbnRpdHkgSURcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnRzRGF0YSAtIE9iamVjdCBtYXBwaW5nIGNvbXBvbmVudElkIC0+IGRhdGFcclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50cyhlbnRpdHlJZCwgY29tcG9uZW50c0RhdGEpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRW50aXR5ICR7ZW50aXR5SWR9IGRvZXMgbm90IGV4aXN0YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb21wb25lbnRNZXRob2RzID0gdGhpcy5jYWxsKCdnZXRDb21wb25lbnRzJyk7XHJcbiAgICAgICAgY29uc3QgaGFzRW51bVNlcnZpY2UgPSB0aGlzLmhhc1NlcnZpY2UoJ2dldEVudW1NYXAnKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBbY29tcG9uZW50SWQsIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGNvbXBvbmVudHNEYXRhKSkge1xyXG4gICAgICAgICAgICAvLyBVc2UgZmFjdG9yeSBmdW5jdGlvbiBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgZGF0YSBkaXJlY3RseVxyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnREYXRhID0gY29tcG9uZW50TWV0aG9kc1tjb21wb25lbnRJZF1cclxuICAgICAgICAgICAgICAgID8gY29tcG9uZW50TWV0aG9kc1tjb21wb25lbnRJZF0oZGF0YSlcclxuICAgICAgICAgICAgICAgIDogeyAuLi5kYXRhIH07XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgY29tcG9uZW50IHR5cGUgSUQgYW5kIHNldCBiaXRtYXNrXHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVJZCA9IHRoaXMuX2dldENvbXBvbmVudFR5cGVJZChjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldENvbXBvbmVudEJpdChlbnRpdHlJZCwgdHlwZUlkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBzdG9yYWdlIG9uIGZpcnN0IGVuY291bnRlciAoYW5hbHl6ZXMgc2NoZW1hIGZvciBudW1lcmljIG9wdGltaXphdGlvbilcclxuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5jYWxsKCdnZXRDb21wb25lbnRTY2hlbWEnLCBjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudW1NYXAgPSBoYXNFbnVtU2VydmljZSA/IHRoaXMuY2FsbCgnZ2V0RW51bU1hcCcsIGNvbXBvbmVudElkKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChzY2hlbWEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldHVwQ29tcG9uZW50U3RvcmFnZShjb21wb25lbnRJZCwgc2NoZW1hLCBlbnVtTWFwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIG51bWVyaWMgY29tcG9uZW50ICh1c2UgVHlwZWRBcnJheXMpIG9yIG9iamVjdCBjb21wb25lbnRcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50SW5mbyA9IHRoaXMuX251bWVyaWNDb21wb25lbnRJbmZvLmdldChjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRJbmZvICYmIGNvbXBvbmVudEluZm8uaXNOdW1lcmljICYmIHNjaGVtYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgaW4gVHlwZWRBcnJheXNcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dyaXRlTnVtZXJpY0NvbXBvbmVudChjb21wb25lbnRJZCwgZW50aXR5SWQsIGNvbXBvbmVudERhdGEsIHNjaGVtYSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBpbiBvYmplY3Qgc3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuX2dldE9iamVjdFN0b3JhZ2UoY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVtlbnRpdHlJZF0gPSBjb21wb25lbnREYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTaW5nbGUgY2FjaGUgaW52YWxpZGF0aW9uIGZvciBhbGwgY29tcG9uZW50c1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5Q2FjaGUuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDb21wb25lbnQoZW50aXR5SWQsIGNvbXBvbmVudFR5cGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoZW50aXR5SWQsIGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmIChjb21wb25lbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGJpdG1hc2tcclxuICAgICAgICBjb25zdCB0eXBlSWQgPSB0aGlzLl9jb21wb25lbnRUeXBlSWQuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmICh0eXBlSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jbGVhckNvbXBvbmVudEJpdChlbnRpdHlJZCwgdHlwZUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFyIG9iamVjdCBzdG9yYWdlXHJcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuX29iamVjdENvbXBvbmVudHMuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmIChzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIHN0b3JhZ2VbZW50aXR5SWRdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgY2FjaGVkIHByb3h5IGZvciB0aGlzIGVudGl0eStjb21wb25lbnRcclxuICAgICAgICBjb25zdCBjb21wb25lbnRDYWNoZSA9IHRoaXMuX3Byb3h5Q2FjaGUuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRDYWNoZSkge1xyXG4gICAgICAgICAgICBjb21wb25lbnRDYWNoZS5kZWxldGUoZW50aXR5SWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW52YWxpZGF0ZSBxdWVyeSBjYWNoZSAtIGNvbXBvbmVudCB3YXMgcmVtb3ZlZCwgY2FjaGVkIHF1ZXJ5IHJlc3VsdHMgYXJlIHN0YWxlXHJcbiAgICAgICAgdGhpcy5fcXVlcnlDYWNoZS5jbGVhcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbXBvbmVudChlbnRpdHlJZCwgY29tcG9uZW50VHlwZSkge1xyXG4gICAgICAgIC8vIEZhc3QgcGF0aDogY2hlY2sgYml0bWFzayBmaXJzdFxyXG4gICAgICAgIGNvbnN0IHR5cGVJZCA9IHRoaXMuX2NvbXBvbmVudFR5cGVJZC5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgaWYgKHR5cGVJZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICghdGhpcy5faGFzQ29tcG9uZW50Qml0KGVudGl0eUlkLCB0eXBlSWQpKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgbnVtZXJpYyBjb21wb25lbnQgKHN0b3JlZCBpbiBUeXBlZEFycmF5cylcclxuICAgICAgICBjb25zdCBjb21wb25lbnRJbmZvID0gdGhpcy5fbnVtZXJpY0NvbXBvbmVudEluZm8uZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRJbmZvICYmIGNvbXBvbmVudEluZm8uaXNOdW1lcmljICYmIGNvbXBvbmVudEluZm8uc2NoZW1hKSB7XHJcbiAgICAgICAgICAgIC8vIFVzZSBvcmlnaW5hbCBzY2hlbWEgdG8gcHJlc2VydmUgJGZpeGVkQXJyYXkgaW5mbyBmb3IgYXJyYXkgcHJveHkgY3JlYXRpb25cclxuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gY29tcG9uZW50SW5mby5vcmlnaW5hbFNjaGVtYSB8fCBjb21wb25lbnRJbmZvLnNjaGVtYTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWROdW1lcmljQ29tcG9uZW50KGNvbXBvbmVudFR5cGUsIGVudGl0eUlkLCBzY2hlbWEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGZyb20gb2JqZWN0IHN0b3JhZ2VcclxuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5fb2JqZWN0Q29tcG9uZW50cy5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UgPyBzdG9yYWdlW2VudGl0eUlkXSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcmlhbGl6ZSBhIGNvbXBvbmVudCBmb3IgbmV0d29yayBzeW5jXHJcbiAgICAgKiBVc2VzIGdldENvbXBvbmVudCAod2hpY2ggcmV0dXJucyBwcm94aWVzIHdpdGggdG9KU09OIHN1cHBvcnQpXHJcbiAgICAgKiBSZXR1cm5zIGEgcGxhaW4gb2JqZWN0IHN1aXRhYmxlIGZvciBKU09OIHNlcmlhbGl6YXRpb25cclxuICAgICAqL1xyXG4gICAgc2VyaWFsaXplQ29tcG9uZW50KGVudGl0eUlkLCBjb21wb25lbnRUeXBlKSB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoZW50aXR5SWQsIGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgIGlmICghY29tcG9uZW50KSByZXR1cm4gbnVsbDtcclxuICAgICAgICAvLyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KSBjb252ZXJ0cyBwcm94eSB0byBwbGFpbiBvYmplY3RcclxuICAgICAgICAvLyBUaGUgcHJveHkncyB0b0pTT04gbWV0aG9kcyBoYW5kbGUgJGZpeGVkQXJyYXkgc2VyaWFsaXphdGlvblxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbXBvbmVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IEVDUyBkYXRhIGZvciBuZXR3b3JrIHN5bmNcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZnVsbFN5bmMgLSBJZiB0cnVlLCBzZW5kcyBmdWxsIHN0YXRlIGFuZCByZXNldHMgZGVsdGEgdHJhY2tpbmcuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgZmFsc2UsIHNlbmRzIG9ubHkgY2hhbmdlcyBzaW5jZSBsYXN0IHN5bmMuXHJcbiAgICAgKiBSZXR1cm5zIHNwYXJzZSBmb3JtYXQgdG8gbWluaW1pemUgcGF5bG9hZCBzaXplXHJcbiAgICAgKiBGb3JtYXQ6IHtcclxuICAgICAqICAgZnVsbFN5bmM6IGJvb2xlYW4sICAvLyB0cnVlIGlmIHRoaXMgaXMgYSBmdWxsIHN0YXRlIHN5bmNcclxuICAgICAqICAgZW50aXR5QWxpdmU6IHsgZW50aXR5SWQ6IDEsIC4uLiB9LCAgLy8gc3BhcnNlOiBvbmx5IGFsaXZlIGVudGl0aWVzIChvciBjaGFuZ2VkKVxyXG4gICAgICogICBlbnRpdHlEZWFkOiBbZW50aXR5SWQsIC4uLl0sICAvLyBvbmx5IGluIGRlbHRhOiBlbnRpdGllcyB0aGF0IGRpZWQgc2luY2UgbGFzdCBzeW5jXHJcbiAgICAgKiAgIGVudGl0eUNvbXBvbmVudE1hc2s6IHsgZW50aXR5SWQ6IFtsb3csIGhpZ2hdLCAuLi4gfSwgIC8vIHNwYXJzZTogb25seSBlbnRpdGllcyB3aXRoIGNvbXBvbmVudHMgKG9yIGNoYW5nZWQpXHJcbiAgICAgKiAgIG51bWVyaWNBcnJheXM6IHsga2V5OiB7IGVudGl0eUlkOiB2YWx1ZSwgLi4uIH0gfSwgIC8vIHNwYXJzZTogb25seSBub24temVyby9ub24tbnVsbCB2YWx1ZXMgKG9yIGNoYW5nZWQpXHJcbiAgICAgKiAgIG9iamVjdENvbXBvbmVudHM6IHsgY29tcG9uZW50VHlwZTogeyBlbnRpdHlJZDogZGF0YSB9IH0sXHJcbiAgICAgKiAgIG5leHRFbnRpdHlJZDogbnVtYmVyXHJcbiAgICAgKiB9XHJcbiAgICAgKi9cclxuICAgIGdldEVDU0RhdGEoZnVsbFN5bmMgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgbWF4RW50aXR5ID0gdGhpcy5uZXh0RW50aXR5SWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdFN0YXRlID0gdGhpcy5fbGFzdFN5bmNlZFN0YXRlO1xyXG5cclxuICAgICAgICAvLyBJZiBmdWxsU3luYyBvciBubyBwcmV2aW91cyBzdGF0ZSwgc2VuZCBldmVyeXRoaW5nXHJcbiAgICAgICAgaWYgKGZ1bGxTeW5jIHx8ICFsYXN0U3RhdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZ2V0RnVsbEVDU0RhdGEobWF4RW50aXR5KTtcclxuICAgICAgICAgICAgcmVzdWx0LmZ1bGxTeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gU3RvcmUgY3VycmVudCBzdGF0ZSBmb3IgZnV0dXJlIGRlbHRhIGNhbGN1bGF0aW9uc1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0U3luY2VkU3RhdGUgPSB0aGlzLl9jYXB0dXJlU3RhdGVTbmFwc2hvdChtYXhFbnRpdHkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGVsdGEgc3luYyAtIG9ubHkgc2VuZCB3aGF0IGNoYW5nZWRcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0RGVsdGFFQ1NEYXRhKG1heEVudGl0eSwgbGFzdFN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBmdWxsIEVDUyBzdGF0ZSAoc3BhcnNlIGZvcm1hdClcclxuICAgICAqL1xyXG4gICAgX2dldEZ1bGxFQ1NEYXRhKG1heEVudGl0eSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgbmV4dEVudGl0eUlkOiB0aGlzLm5leHRFbnRpdHlJZCxcclxuICAgICAgICAgICAgZW50aXR5QWxpdmU6IHt9LFxyXG4gICAgICAgICAgICBlbnRpdHlDb21wb25lbnRNYXNrOiB7fSxcclxuICAgICAgICAgICAgbnVtZXJpY0FycmF5czoge30sXHJcbiAgICAgICAgICAgIG9iamVjdENvbXBvbmVudHM6IHt9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU3BhcnNlIGVudGl0eUFsaXZlIC0gb25seSBpbmNsdWRlIGFsaXZlIGVudGl0aWVzICh2YWx1ZSA9IDEpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbnRpdHlBbGl2ZVtpXSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmVudGl0eUFsaXZlW2ldID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3BhcnNlIGVudGl0eUNvbXBvbmVudE1hc2sgLSBvbmx5IGluY2x1ZGUgZW50aXRpZXMgd2l0aCBjb21wb25lbnRzXHJcbiAgICAgICAgLy8gU3RvcmVkIGFzIFtsb3csIGhpZ2hdIHBhaXJzIGZvciB0aGUgdHdvIDMyLWJpdCBwYXJ0c1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4RW50aXR5OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2kgKiAyXTtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tpICogMiArIDFdO1xyXG4gICAgICAgICAgICBpZiAobG93ICE9PSAwIHx8IGhpZ2ggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5lbnRpdHlDb21wb25lbnRNYXNrW2ldID0gW2xvdywgaGlnaF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluY2x1ZGUgbnVtZXJpYyBhcnJheXMgaW4gc3BhcnNlIGZvcm1hdCAob25seSBub24temVybywgbm9uLW51bGwgdmFsdWVzKVxyXG4gICAgICAgIC8vIEFMU08gaW5jbHVkZSB6ZXJvcyB0aGF0IGNoYW5nZWQgRlJPTSBub24temVybyAodG8gZW5zdXJlIGNsaWVudHMgcmVzZXQgdGhlbSlcclxuICAgICAgICAvLyBTa2lwIGNsaWVudC1vbmx5IGNvbXBvbmVudHNcclxuICAgICAgICBjb25zdCBsYXN0U3RhdGUgPSB0aGlzLl9sYXN0U3luY2VkU3RhdGU7XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBhcnJdIG9mIHRoaXMuX251bWVyaWNBcnJheXMpIHtcclxuICAgICAgICAgICAgLy8ga2V5IGZvcm1hdCBpcyBcImNvbXBvbmVudFR5cGUuZmllbGRQYXRoXCIgLSBleHRyYWN0IGNvbXBvbmVudCB0eXBlXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSBrZXkuc3BsaXQoJy4nKVswXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudE9ubHlDb21wb25lbnRzLmhhcyhjb21wb25lbnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7ICAvLyBTa2lwIGNsaWVudC1vbmx5IGNvbXBvbmVudHNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbGFzdEFyciA9IGxhc3RTdGF0ZT8ubnVtZXJpY0FycmF5cz8uZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RNYXhFbnRpdHkgPSBsYXN0U3RhdGU/Lm5leHRFbnRpdHlJZCB8fCAwO1xyXG4gICAgICAgICAgICBjb25zdCBzcGFyc2UgPSB7fTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBjaGVjayBsYXN0QXJyIHdpdGhpbiBpdHMgYm91bmRzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0VmFsID0gKGxhc3RBcnIgJiYgaSA8IGxhc3RNYXhFbnRpdHkpID8gbGFzdEFycltpXSA6IDA7XHJcbiAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIG5vbi16ZXJvIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgLy8gQWxzbyBpbmNsdWRlIHplcm9zIGlmIHRoZXkgd2VyZSBwcmV2aW91c2x5IG5vbi16ZXJvICh2YWx1ZSBjaGFuZ2VkIHRvIDApXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9PSAwIHx8IChsYXN0VmFsICE9PSAwICYmIHZhbCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGFyc2VbaV0gPSB0aGlzLl90b1N5bmNWYWx1ZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE9ubHkgaW5jbHVkZSBpZiB0aGVyZSBhcmUgYW55IHZhbHVlc1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3BhcnNlKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubnVtZXJpY0FycmF5c1trZXldID0gc3BhcnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbmNsdWRlIG9iamVjdCBjb21wb25lbnRzIC0gc2tpcCBjbGllbnQtb25seVxyXG4gICAgICAgIGZvciAoY29uc3QgW2NvbXBvbmVudFR5cGUsIHN0b3JhZ2VdIG9mIHRoaXMuX29iamVjdENvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudE9ubHlDb21wb25lbnRzLmhhcyhjb21wb25lbnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudERhdGEgPSB7fTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudERhdGFbaV0gPSBzdG9yYWdlW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjb21wb25lbnREYXRhKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQub2JqZWN0Q29tcG9uZW50c1tjb21wb25lbnRUeXBlXSA9IGNvbXBvbmVudERhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYXB0dXJlIGEgc25hcHNob3Qgb2YgY3VycmVudCBzdGF0ZSBmb3IgZGVsdGEgY29tcGFyaXNvblxyXG4gICAgICovXHJcbiAgICBfY2FwdHVyZVN0YXRlU25hcHNob3QobWF4RW50aXR5KSB7XHJcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSB7XHJcbiAgICAgICAgICAgIG5leHRFbnRpdHlJZDogdGhpcy5uZXh0RW50aXR5SWQsXHJcbiAgICAgICAgICAgIGVudGl0eUFsaXZlOiBuZXcgVWludDhBcnJheShtYXhFbnRpdHkpLFxyXG4gICAgICAgICAgICBlbnRpdHlDb21wb25lbnRNYXNrOiBuZXcgVWludDMyQXJyYXkobWF4RW50aXR5ICogMiksXHJcbiAgICAgICAgICAgIG51bWVyaWNBcnJheXM6IG5ldyBNYXAoKSxcclxuICAgICAgICAgICAgb2JqZWN0Q29tcG9uZW50czogbmV3IE1hcCgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ29weSBlbnRpdHlBbGl2ZVxyXG4gICAgICAgIHNuYXBzaG90LmVudGl0eUFsaXZlLnNldCh0aGlzLmVudGl0eUFsaXZlLnN1YmFycmF5KDAsIG1heEVudGl0eSkpO1xyXG5cclxuICAgICAgICAvLyBDb3B5IGVudGl0eUNvbXBvbmVudE1hc2tcclxuICAgICAgICBzbmFwc2hvdC5lbnRpdHlDb21wb25lbnRNYXNrLnNldCh0aGlzLmVudGl0eUNvbXBvbmVudE1hc2suc3ViYXJyYXkoMCwgbWF4RW50aXR5ICogMikpO1xyXG5cclxuICAgICAgICAvLyBDb3B5IG51bWVyaWMgYXJyYXlzXHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBhcnJdIG9mIHRoaXMuX251bWVyaWNBcnJheXMpIHtcclxuICAgICAgICAgICAgc25hcHNob3QubnVtZXJpY0FycmF5cy5zZXQoa2V5LCBuZXcgRmxvYXQzMkFycmF5KGFyci5zdWJhcnJheSgwLCBtYXhFbnRpdHkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWVwIGNvcHkgb2JqZWN0IGNvbXBvbmVudHNcclxuICAgICAgICBmb3IgKGNvbnN0IFtjb21wb25lbnRUeXBlLCBzdG9yYWdlXSBvZiB0aGlzLl9vYmplY3RDb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvcHkgPSBuZXcgQXJyYXkobWF4RW50aXR5KTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvcHlbaV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0b3JhZ2VbaV0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzbmFwc2hvdC5vYmplY3RDb21wb25lbnRzLnNldChjb21wb25lbnRUeXBlLCBjb3B5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkZWx0YSBFQ1MgZGF0YSAtIG9ubHkgY2hhbmdlcyBzaW5jZSBsYXN0IHN5bmNcclxuICAgICAqL1xyXG4gICAgX2dldERlbHRhRUNTRGF0YShtYXhFbnRpdHksIGxhc3RTdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgZnVsbFN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBuZXh0RW50aXR5SWQ6IHRoaXMubmV4dEVudGl0eUlkLFxyXG4gICAgICAgICAgICBlbnRpdHlBbGl2ZToge30sXHJcbiAgICAgICAgICAgIGVudGl0eURlYWQ6IFtdLFxyXG4gICAgICAgICAgICBlbnRpdHlDb21wb25lbnRNYXNrOiB7fSxcclxuICAgICAgICAgICAgbnVtZXJpY0FycmF5czoge30sXHJcbiAgICAgICAgICAgIG9iamVjdENvbXBvbmVudHM6IHt9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzdE1heEVudGl0eSA9IGxhc3RTdGF0ZS5uZXh0RW50aXR5SWQ7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGVudGl0eUFsaXZlIGNoYW5nZXNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEVudGl0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmVudGl0eUFsaXZlW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91cyA9IGkgPCBsYXN0TWF4RW50aXR5ID8gbGFzdFN0YXRlLmVudGl0eUFsaXZlW2ldIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSBwcmV2aW91cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZW50aXR5QWxpdmVbaV0gPSAxOyAgLy8gRW50aXR5IGJlY2FtZSBhbGl2ZVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZW50aXR5RGVhZC5wdXNoKGkpOyAgLy8gRW50aXR5IGRpZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZW50aXR5Q29tcG9uZW50TWFzayBjaGFuZ2VzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsb3dDdXJyZW50ID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2kgKiAyXTtcclxuICAgICAgICAgICAgY29uc3QgaGlnaEN1cnJlbnQgPSB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbaSAqIDIgKyAxXTtcclxuICAgICAgICAgICAgY29uc3QgbG93UHJldiA9IGkgPCBsYXN0TWF4RW50aXR5ID8gbGFzdFN0YXRlLmVudGl0eUNvbXBvbmVudE1hc2tbaSAqIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGlnaFByZXYgPSBpIDwgbGFzdE1heEVudGl0eSA/IGxhc3RTdGF0ZS5lbnRpdHlDb21wb25lbnRNYXNrW2kgKiAyICsgMV0gOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvd0N1cnJlbnQgIT09IGxvd1ByZXYgfHwgaGlnaEN1cnJlbnQgIT09IGhpZ2hQcmV2KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZW50aXR5Q29tcG9uZW50TWFza1tpXSA9IFtsb3dDdXJyZW50LCBoaWdoQ3VycmVudF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG51bWVyaWMgYXJyYXkgY2hhbmdlcyAtIHNraXAgY2xpZW50LW9ubHkgY29tcG9uZW50c1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgYXJyXSBvZiB0aGlzLl9udW1lcmljQXJyYXlzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSBrZXkuc3BsaXQoJy4nKVswXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudE9ubHlDb21wb25lbnRzLmhhcyhjb21wb25lbnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RBcnIgPSBsYXN0U3RhdGUubnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgY29uc3Qgc3BhcnNlID0ge307XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEVudGl0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXMgPSAobGFzdEFyciAmJiBpIDwgbGFzdE1heEVudGl0eSkgPyBsYXN0QXJyW2ldIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gcHJldmlvdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBuZXcgdmFsdWUgKGV2ZW4gaWYgMCBvciAtSW5maW5pdHksIHNpbmNlIGl0IGNoYW5nZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhcnNlW2ldID0gdGhpcy5fdG9TeW5jVmFsdWUoY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzcGFyc2UpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5udW1lcmljQXJyYXlzW2tleV0gPSBzcGFyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG9iamVjdCBjb21wb25lbnQgY2hhbmdlcyAtIHNraXAgY2xpZW50LW9ubHlcclxuICAgICAgICBmb3IgKGNvbnN0IFtjb21wb25lbnRUeXBlLCBzdG9yYWdlXSBvZiB0aGlzLl9vYmplY3RDb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnRPbmx5Q29tcG9uZW50cy5oYXMoY29tcG9uZW50VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsYXN0U3RvcmFnZSA9IGxhc3RTdGF0ZS5vYmplY3RDb21wb25lbnRzLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50RGF0YSA9IHt9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHN0b3JhZ2VbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91cyA9IGxhc3RTdG9yYWdlID8gbGFzdFN0b3JhZ2VbaV0gOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY2hhbmdlZCAoc2ltcGxlIEpTT04gY29tcGFyaXNvbilcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdHIgPSBjdXJyZW50ICE9PSB1bmRlZmluZWQgPyBKU09OLnN0cmluZ2lmeShjdXJyZW50KSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzU3RyID0gcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IEpTT04uc3RyaW5naWZ5KHByZXZpb3VzKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0ciAhPT0gcHJldmlvdXNTdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudERhdGFbaV0gPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgcmVtb3ZlZCB3aXRoIG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50RGF0YVtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29tcG9uZW50RGF0YSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm9iamVjdENvbXBvbmVudHNbY29tcG9uZW50VHlwZV0gPSBjb21wb25lbnREYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZW1wdHkgYXJyYXlzL29iamVjdHMgZnJvbSByZXN1bHRcclxuICAgICAgICBpZiAocmVzdWx0LmVudGl0eURlYWQubGVuZ3RoID09PSAwKSBkZWxldGUgcmVzdWx0LmVudGl0eURlYWQ7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5lbnRpdHlBbGl2ZSkubGVuZ3RoID09PSAwKSBkZWxldGUgcmVzdWx0LmVudGl0eUFsaXZlO1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHQuZW50aXR5Q29tcG9uZW50TWFzaykubGVuZ3RoID09PSAwKSBkZWxldGUgcmVzdWx0LmVudGl0eUNvbXBvbmVudE1hc2s7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5udW1lcmljQXJyYXlzKS5sZW5ndGggPT09IDApIGRlbGV0ZSByZXN1bHQubnVtZXJpY0FycmF5cztcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0Lm9iamVjdENvbXBvbmVudHMpLmxlbmd0aCA9PT0gMCkgZGVsZXRlIHJlc3VsdC5vYmplY3RDb21wb25lbnRzO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc25hcHNob3QgZm9yIG5leHQgZGVsdGFcclxuICAgICAgICB0aGlzLl9sYXN0U3luY2VkU3RhdGUgPSB0aGlzLl9jYXB0dXJlU3RhdGVTbmFwc2hvdChtYXhFbnRpdHkpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgZGVsdGEgdHJhY2tpbmcgLSBjYWxsIHRoaXMgd2hlbiB5b3Ugd2FudCB0aGUgbmV4dCBzeW5jIHRvIGJlIGEgZnVsbCBzeW5jXHJcbiAgICAgKi9cclxuICAgIHJlc2V0U3luY1N0YXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RTeW5jZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYXB0dXJlIGEgY2hlY2tzdW0gb2YgdGhlIGN1cnJlbnQgRUNTIHN0YXRlIGZvciBkZXRlcm1pbmlzbSB2YWxpZGF0aW9uLlxyXG4gICAgICogVXNlZCB0byB2ZXJpZnkgdGhhdCBjbGllbnQgYW5kIHNlcnZlciBzaW11bGF0aW9ucyBhcmUgaW4gc3luYy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgY2hlY2tzdW0gaW5jbHVkZXM6XHJcbiAgICAgKiAtIEFsbCBhbGl2ZSBlbnRpdHkgSURzXHJcbiAgICAgKiAtIEFsbCBjb21wb25lbnQgYml0bWFza3NcclxuICAgICAqIC0gQWxsIG51bWVyaWMgY29tcG9uZW50IGRhdGEgKFR5cGVkQXJyYXlzKVxyXG4gICAgICogLSBDdXJyZW50IHRpY2sgY291bnRcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSB7IGNoZWNrc3VtOiBudW1iZXIsIHRpY2tDb3VudDogbnVtYmVyLCBlbnRpdHlDb3VudDogbnVtYmVyIH1cclxuICAgICAqL1xyXG4gICAgY2FwdHVyZVN0YXRlQ2hlY2tzdW0oKSB7XHJcbiAgICAgICAgLy8gU2ltcGxlIGJ1dCBlZmZlY3RpdmUgaGFzaCBmdW5jdGlvbiAoZGpiMiB2YXJpYW50KVxyXG4gICAgICAgIGxldCBoYXNoID0gNTM4MTtcclxuICAgICAgICBjb25zdCBhZGRUb0hhc2ggPSAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCB2YWx1ZSB0eXBlc1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCB0byBpbnRlZ2VyIGJpdHMgZm9yIGNvbnNpc3RlbnQgaGFzaGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gVXNlIERhdGFWaWV3IGZvciBwcm9wZXIgZmxvYXQtdG8taW50IGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hlY2tzdW1CdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGVja3N1bUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGVja3N1bVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5fY2hlY2tzdW1CdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tzdW1WaWV3LnNldEZsb2F0NjQoMCwgdmFsdWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG93ID0gdGhpcy5fY2hlY2tzdW1WaWV3LmdldFVpbnQzMigwLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSB0aGlzLl9jaGVja3N1bVZpZXcuZ2V0VWludDMyKDQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSArIGhhc2ggKyBsb3cpID4+PiAwO1xyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSArIGhhc2ggKyBoaWdoKSA+Pj4gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgKyBoYXNoICsgKHZhbHVlIHwgMCkpID4+PiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4RW50aXR5ID0gdGhpcy5uZXh0RW50aXR5SWQ7XHJcblxyXG4gICAgICAgIC8vIEhhc2ggdGljayBjb3VudCBmb3IgdGVtcG9yYWwgc3luYyB2ZXJpZmljYXRpb25cclxuICAgICAgICBhZGRUb0hhc2godGhpcy50aWNrQ291bnQpO1xyXG5cclxuICAgICAgICAvLyBIYXNoIGFsbCBhbGl2ZSBlbnRpdGllcyBhbmQgdGhlaXIgY29tcG9uZW50IG1hc2tzXHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5SWQgPSAxOyBlbnRpdHlJZCA8IG1heEVudGl0eTsgZW50aXR5SWQrKykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGFkZFRvSGFzaChlbnRpdHlJZCk7XHJcbiAgICAgICAgICAgIGFkZFRvSGFzaCh0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyXSk7XHJcbiAgICAgICAgICAgIGFkZFRvSGFzaCh0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyICsgMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFzaCBhbGwgbnVtZXJpYyBjb21wb25lbnQgZGF0YSAoZGV0ZXJtaW5pc3RpYyBvcmRlciB2aWEgc29ydGVkIGtleXMpXHJcbiAgICAgICAgY29uc3Qgc29ydGVkS2V5cyA9IEFycmF5LmZyb20odGhpcy5fbnVtZXJpY0FycmF5cy5rZXlzKCkpLnNvcnQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzb3J0ZWRLZXlzKSB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgY2xpZW50LW9ubHkgY29tcG9uZW50c1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRUeXBlID0ga2V5LnNwbGl0KCcuJylbMF07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnRPbmx5Q29tcG9uZW50cy5oYXMoY29tcG9uZW50VHlwZSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXJyID0gdGhpcy5fbnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgZm9yIChsZXQgZW50aXR5SWQgPSAxOyBlbnRpdHlJZCA8IG1heEVudGl0eTsgZW50aXR5SWQrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVudGl0eUFsaXZlW2VudGl0eUlkXSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGhhc2ggaWYgZW50aXR5IGhhcyB0aGlzIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUlkID0gdGhpcy5fY29tcG9uZW50VHlwZUlkLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlSWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9oYXNDb21wb25lbnRCaXQoZW50aXR5SWQsIHR5cGVJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRUb0hhc2goYXJyW2VudGl0eUlkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNoZWNrc3VtOiBoYXNoLFxyXG4gICAgICAgICAgICB0aWNrQ291bnQ6IHRoaXMudGlja0NvdW50LFxyXG4gICAgICAgICAgICBlbnRpdHlDb3VudDogdGhpcy5lbnRpdHlDb3VudFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wYXJlIHR3byBzdGF0ZSBjaGVja3N1bXMgZm9yIGRldGVybWluaXNtIHZhbGlkYXRpb24uXHJcbiAgICAgKiBMb2dzIGRldGFpbGVkIGluZm8gaWYgbWlzbWF0Y2ggZGV0ZWN0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2FsU3RhdGUgLSBMb2NhbCBjaGVja3N1bSBmcm9tIGNhcHR1cmVTdGF0ZUNoZWNrc3VtKClcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZW1vdGVTdGF0ZSAtIFJlbW90ZSBjaGVja3N1bSBmcm9tIGNhcHR1cmVTdGF0ZUNoZWNrc3VtKClcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHN0YXRlcyBtYXRjaCwgZmFsc2UgaWYgZGVzeW5jIGRldGVjdGVkXHJcbiAgICAgKi9cclxuICAgIHZhbGlkYXRlU3RhdGVTeW5jKGxvY2FsU3RhdGUsIHJlbW90ZVN0YXRlKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsU3RhdGUudGlja0NvdW50ICE9PSByZW1vdGVTdGF0ZS50aWNrQ291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbRGVzeW5jXSBUaWNrIG1pc21hdGNoOiBsb2NhbD0ke2xvY2FsU3RhdGUudGlja0NvdW50fSwgcmVtb3RlPSR7cmVtb3RlU3RhdGUudGlja0NvdW50fWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobG9jYWxTdGF0ZS5lbnRpdHlDb3VudCAhPT0gcmVtb3RlU3RhdGUuZW50aXR5Q291bnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbRGVzeW5jXSBFbnRpdHkgY291bnQgbWlzbWF0Y2ggYXQgdGljayAke2xvY2FsU3RhdGUudGlja0NvdW50fTogbG9jYWw9JHtsb2NhbFN0YXRlLmVudGl0eUNvdW50fSwgcmVtb3RlPSR7cmVtb3RlU3RhdGUuZW50aXR5Q291bnR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsb2NhbFN0YXRlLmNoZWNrc3VtICE9PSByZW1vdGVTdGF0ZS5jaGVja3N1bSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtEZXN5bmNdIFN0YXRlIGNoZWNrc3VtIG1pc21hdGNoIGF0IHRpY2sgJHtsb2NhbFN0YXRlLnRpY2tDb3VudH06IGxvY2FsPSR7bG9jYWxTdGF0ZS5jaGVja3N1bX0sIHJlbW90ZT0ke3JlbW90ZVN0YXRlLmNoZWNrc3VtfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IEVDUyBkYXRhIGZyb20gc2VydmVyIChoYW5kbGVzIGJvdGggZnVsbCBzeW5jIGFuZCBkZWx0YSBzeW5jKVxyXG4gICAgICovXHJcbiAgICBhcHBseUVDU0RhdGEoZGF0YSkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBmdWxsIHN5bmMgb3IgZGVsdGEgc3luY1xyXG4gICAgICAgIGlmIChkYXRhLmZ1bGxTeW5jICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBseUZ1bGxFQ1NEYXRhKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FwcGx5RGVsdGFFQ1NEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIGNsZWFudXAgZm9yIGJvdGggc3luYyB0eXBlc1xyXG4gICAgICAgIHRoaXMuX2ZpbmFsaXplRUNTU3luYyhkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IGZ1bGwgRUNTIHN5bmMgLSByZXBsYWNlcyBhbGwgc3RhdGVcclxuICAgICAqL1xyXG4gICAgX2FwcGx5RnVsbEVDU0RhdGEoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IG1heEVudGl0eSA9IGRhdGEubmV4dEVudGl0eUlkIHx8IHRoaXMubmV4dEVudGl0eUlkO1xyXG5cclxuICAgICAgICAvLyBDbGVhciBhbmQgYXBwbHkgZW50aXR5IGFsaXZlIGZsYWdzIGZyb20gc3BhcnNlIGZvcm1hdFxyXG4gICAgICAgIHRoaXMuZW50aXR5QWxpdmUuZmlsbCgwLCAwLCBtYXhFbnRpdHkpO1xyXG4gICAgICAgIGlmIChkYXRhLmVudGl0eUFsaXZlKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50aXR5SWRTdHIgb2YgT2JqZWN0LmtleXMoZGF0YS5lbnRpdHlBbGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5QWxpdmVbcGFyc2VJbnQoZW50aXR5SWRTdHIsIDEwKV0gPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCdWlsZCBiaXRtYXNrIGZvciBjbGllbnQtb25seSBjb21wb25lbnRzIHRvIHByZXNlcnZlXHJcbiAgICAgICAgbGV0IGNsaWVudE9ubHlNYXNrTG93ID0gMDtcclxuICAgICAgICBsZXQgY2xpZW50T25seU1hc2tIaWdoID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudFR5cGUgb2YgdGhpcy5fY2xpZW50T25seUNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgY29uc3QgdHlwZUlkID0gdGhpcy5fY29tcG9uZW50VHlwZUlkLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZUlkIDwgMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRPbmx5TWFza0xvdyB8PSAoMSA8PCB0eXBlSWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRPbmx5TWFza0hpZ2ggfD0gKDEgPDwgKHR5cGVJZCAtIDMyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IGNvbXBvbmVudCBtYXNrcyBmcm9tIHNwYXJzZSBmb3JtYXQsIHByZXNlcnZpbmcgY2xpZW50LW9ubHkgY29tcG9uZW50IGJpdHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEVudGl0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIGNsaWVudC1vbmx5IGJpdHMgZnJvbSBjdXJyZW50IG1hc2tcclxuICAgICAgICAgICAgY29uc3QgcHJlc2VydmVkTG93ID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2kgKiAyXSAmIGNsaWVudE9ubHlNYXNrTG93O1xyXG4gICAgICAgICAgICBjb25zdCBwcmVzZXJ2ZWRIaWdoID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2kgKiAyICsgMV0gJiBjbGllbnRPbmx5TWFza0hpZ2g7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBtYXNrXHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tpICogMl0gPSBwcmVzZXJ2ZWRMb3c7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tpICogMiArIDFdID0gcHJlc2VydmVkSGlnaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEuZW50aXR5Q29tcG9uZW50TWFzaykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZFN0ciwgbWFza10gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5lbnRpdHlDb21wb25lbnRNYXNrKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW50aXR5SWQgPSBwYXJzZUludChlbnRpdHlJZFN0ciwgMTApO1xyXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2Ugc2VydmVyIG1hc2sgd2l0aCBwcmVzZXJ2ZWQgY2xpZW50LW9ubHkgYml0c1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2VudGl0eUlkICogMl0gfD0gbWFza1swXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tlbnRpdHlJZCAqIDIgKyAxXSB8PSBtYXNrWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBseSBudW1lcmljIGFycmF5cyAtIG9ubHkgY2xlYXIvcmVwbGFjZSBhcnJheXMgdGhhdCBzZXJ2ZXIgc2VuZHNcclxuICAgICAgICAvLyBTa2lwIGNsaWVudC1vbmx5IGNvbXBvbmVudHMgZXZlbiBpZiBzZXJ2ZXIgc2VuZHMgdGhlbSAoYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpXHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBzcGFyc2VdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubnVtZXJpY0FycmF5cyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50VHlwZSA9IGtleS5zcGxpdCgnLicpWzBdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2xpZW50T25seUNvbXBvbmVudHMuaGFzKGNvbXBvbmVudFR5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTsgIC8vIERvbid0IGFwcGx5IGNsaWVudC1vbmx5IGNvbXBvbmVudHMgZnJvbSBzZXJ2ZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGFyciA9IHRoaXMuX251bWVyaWNBcnJheXMuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIGlmICghYXJyKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuTUFYX0VOVElUSUVTKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX251bWVyaWNBcnJheXMuc2V0KGtleSwgYXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIHNwZWNpZmljIGFycmF5IGJlZm9yZSBhcHBseWluZyBzZXJ2ZXIgZGF0YVxyXG4gICAgICAgICAgICBhcnIuZmlsbCgwLCAwLCBtYXhFbnRpdHkpO1xyXG4gICAgICAgICAgICAvLyBBcHBseSBzZXJ2ZXIgdmFsdWVzXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2VudGl0eUlkU3RyLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc3BhcnNlKSkge1xyXG4gICAgICAgICAgICAgICAgYXJyW3BhcnNlSW50KGVudGl0eUlkU3RyLCAxMCldID0gdGhpcy5fZnJvbVN5bmNWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IG9iamVjdCBjb21wb25lbnRzIC0gb25seSBjbGVhci9yZXBsYWNlIGNvbXBvbmVudHMgdGhhdCBzZXJ2ZXIgc2VuZHNcclxuICAgICAgICAvLyBTa2lwIGNsaWVudC1vbmx5IGNvbXBvbmVudHNcclxuICAgICAgICBmb3IgKGNvbnN0IFtjb21wb25lbnRUeXBlLCBjb21wb25lbnREYXRhXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLm9iamVjdENvbXBvbmVudHMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnRPbmx5Q29tcG9uZW50cy5oYXMoY29tcG9uZW50VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5fZ2V0T2JqZWN0U3RvcmFnZShjb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBzcGVjaWZpYyBjb21wb25lbnQgdHlwZSBiZWZvcmUgYXBwbHlpbmcgc2VydmVyIGRhdGFcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhFbnRpdHk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVtpXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBcHBseSBzZXJ2ZXIgdmFsdWVzXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2VudGl0eUlkU3RyLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29tcG9uZW50RGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VbcGFyc2VJbnQoZW50aXR5SWRTdHIsIDEwKV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IGRlbHRhIEVDUyBzeW5jIC0gb25seSBhcHBsaWVzIGNoYW5nZXNcclxuICAgICAqL1xyXG4gICAgX2FwcGx5RGVsdGFFQ1NEYXRhKGRhdGEpIHtcclxuICAgICAgICAvLyBBcHBseSBlbnRpdHkgZGVhdGhzXHJcbiAgICAgICAgaWYgKGRhdGEuZW50aXR5RGVhZCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGRhdGEuZW50aXR5RGVhZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnRpdHlBbGl2ZVtlbnRpdHlJZF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgY29tcG9uZW50IG1hc2sgZm9yIGRlYWQgZW50aXRpZXNcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tlbnRpdHlJZCAqIDJdID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5Q29tcG9uZW50TWFza1tlbnRpdHlJZCAqIDIgKyAxXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IG5ldy9jaGFuZ2VkIGFsaXZlIGVudGl0aWVzXHJcbiAgICAgICAgaWYgKGRhdGEuZW50aXR5QWxpdmUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRpdHlJZFN0ciBvZiBPYmplY3Qua2V5cyhkYXRhLmVudGl0eUFsaXZlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnRpdHlBbGl2ZVtwYXJzZUludChlbnRpdHlJZFN0ciwgMTApXSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IGNvbXBvbmVudCBtYXNrIGNoYW5nZXMsIHByZXNlcnZpbmcgY2xpZW50LW9ubHkgY29tcG9uZW50IGJpdHNcclxuICAgICAgICBpZiAoZGF0YS5lbnRpdHlDb21wb25lbnRNYXNrKSB7XHJcbiAgICAgICAgICAgIC8vIEJ1aWxkIGJpdG1hc2sgZm9yIGNsaWVudC1vbmx5IGNvbXBvbmVudHMgdG8gcHJlc2VydmVcclxuICAgICAgICAgICAgbGV0IGNsaWVudE9ubHlNYXNrTG93ID0gMDtcclxuICAgICAgICAgICAgbGV0IGNsaWVudE9ubHlNYXNrSGlnaCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50VHlwZSBvZiB0aGlzLl9jbGllbnRPbmx5Q29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUlkID0gdGhpcy5fY29tcG9uZW50VHlwZUlkLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlSWQgPCAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRPbmx5TWFza0xvdyB8PSAoMSA8PCB0eXBlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHlNYXNrSGlnaCB8PSAoMSA8PCAodHlwZUlkIC0gMzIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2VudGl0eUlkU3RyLCBtYXNrXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmVudGl0eUNvbXBvbmVudE1hc2spKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlJZCA9IHBhcnNlSW50KGVudGl0eUlkU3RyLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBjbGllbnQtb25seSBiaXRzLCBhcHBseSBzZXJ2ZXIgYml0c1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJlc2VydmVkTG93ID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2VudGl0eUlkICogMl0gJiBjbGllbnRPbmx5TWFza0xvdztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNlcnZlZEhpZ2ggPSB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyICsgMV0gJiBjbGllbnRPbmx5TWFza0hpZ2g7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyXSA9IG1hc2tbMF0gfCBwcmVzZXJ2ZWRMb3c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyICsgMV0gPSBtYXNrWzFdIHwgcHJlc2VydmVkSGlnaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbHkgbnVtZXJpYyBhcnJheSBjaGFuZ2VzIChvbmx5IGNoYW5nZWQgdmFsdWVzKVxyXG4gICAgICAgIC8vIFNraXAgY2xpZW50LW9ubHkgY29tcG9uZW50c1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgc3BhcnNlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLm51bWVyaWNBcnJheXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSBrZXkuc3BsaXQoJy4nKVswXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudE9ubHlDb21wb25lbnRzLmhhcyhjb21wb25lbnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBhcnIgPSB0aGlzLl9udW1lcmljQXJyYXlzLmdldChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIWFycikge1xyXG4gICAgICAgICAgICAgICAgYXJyID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLk1BWF9FTlRJVElFUyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9udW1lcmljQXJyYXlzLnNldChrZXksIGFycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBbZW50aXR5SWRTdHIsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzcGFyc2UpKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJbcGFyc2VJbnQoZW50aXR5SWRTdHIsIDEwKV0gPSB0aGlzLl9mcm9tU3luY1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwbHkgb2JqZWN0IGNvbXBvbmVudCBjaGFuZ2VzIC0gc2tpcCBjbGllbnQtb25seVxyXG4gICAgICAgIGZvciAoY29uc3QgW2NvbXBvbmVudFR5cGUsIGNvbXBvbmVudERhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEub2JqZWN0Q29tcG9uZW50cyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudE9ubHlDb21wb25lbnRzLmhhcyhjb21wb25lbnRUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLl9nZXRPYmplY3RTdG9yYWdlKGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtlbnRpdHlJZFN0ciwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvbXBvbmVudERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlJZCA9IHBhcnNlSW50KGVudGl0eUlkU3RyLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBudWxsIG1lYW5zIHJlbW92ZWRcclxuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlW2VudGl0eUlkXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVtlbnRpdHlJZF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmFsaXplIEVDUyBzeW5jIC0gY29tbW9uIGNsZWFudXAgZm9yIGJvdGggZnVsbCBhbmQgZGVsdGFcclxuICAgICAqL1xyXG4gICAgX2ZpbmFsaXplRUNTU3luYyhkYXRhKSB7XHJcbiAgICAgICAgLy8gU3luYyBlbnRpdHkgSUQgY291bnRlclxyXG4gICAgICAgIGlmIChkYXRhLm5leHRFbnRpdHlJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEVudGl0eUlkID0gZGF0YS5uZXh0RW50aXR5SWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDbGVhciBhbGwgY2FjaGVkIHByb3hpZXMgc2luY2UgZGF0YSBoYXMgYmVlbiBvdmVyd3JpdHRlblxyXG4gICAgICAgIGZvciAoY29uc3QgWywgY29tcG9uZW50Q2FjaGVdIG9mIHRoaXMuX3Byb3h5Q2FjaGUpIHtcclxuICAgICAgICAgICAgY29tcG9uZW50Q2FjaGUuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgc3BlY2lmaWMgZmllbGRzIG9mIGEgY29tcG9uZW50XHJcbiAgICAgKiBGb3IgbnVtZXJpYyBjb21wb25lbnRzIChUeXBlZEFycmF5IHN0b3JhZ2UpLCB0aGlzIGlzIHRoZSBvbmx5IHdheSB0byBwZXJzaXN0IGNoYW5nZXNcclxuICAgICAqIEZvciBvYmplY3QgY29tcG9uZW50cywgdGhpcyBhbHNvIHdvcmtzIChkaXJlY3QgbXV0YXRpb24gc3RpbGwgd29ya3MgZm9yIHRob3NlKVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVudGl0eUlkXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50VHlwZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHVwZGF0ZXMgLSBPYmplY3Qgd2l0aCBmaWVsZCB1cGRhdGVzLCBlLmcuIHsgY3VycmVudDogNTAgfSBvciB7ICduZXN0ZWQuZmllbGQnOiAxMCB9XHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUNvbXBvbmVudChlbnRpdHlJZCwgY29tcG9uZW50VHlwZSwgdXBkYXRlcykge1xyXG4gICAgICAgIGNvbnN0IHR5cGVJZCA9IHRoaXMuX2NvbXBvbmVudFR5cGVJZC5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgaWYgKHR5cGVJZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICAgICAgaWYgKCF0aGlzLl9oYXNDb21wb25lbnRCaXQoZW50aXR5SWQsIHR5cGVJZCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50SW5mbyA9IHRoaXMuX251bWVyaWNDb21wb25lbnRJbmZvLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICBpZiAoY29tcG9uZW50SW5mbyAmJiBjb21wb25lbnRJbmZvLmlzTnVtZXJpYykge1xyXG4gICAgICAgICAgICAvLyBXcml0ZSB0byBUeXBlZEFycmF5cyAoY29udmVydCBudWxsIHRvIHN0b3JhZ2Ugc2VudGluZWwpXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGRQYXRoIGluIHVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE51bWVyaWNGaWVsZChjb21wb25lbnRUeXBlLCBlbnRpdHlJZCwgZmllbGRQYXRoLCB0aGlzLl90b1N0b3JhZ2VWYWx1ZSh1cGRhdGVzW2ZpZWxkUGF0aF0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBvYmplY3Qgc3RvcmFnZVxyXG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5fb2JqZWN0Q29tcG9uZW50cy5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgICAgIGlmIChzdG9yYWdlICYmIHN0b3JhZ2VbZW50aXR5SWRdKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkUGF0aCBpbiB1cGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkUGF0aC5pbmNsdWRlcygnLicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQgcGF0aHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0TmVzdGVkVmFsdWUoc3RvcmFnZVtlbnRpdHlJZF0sIGZpZWxkUGF0aCwgdXBkYXRlc1tmaWVsZFBhdGhdKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlW2VudGl0eUlkXVtmaWVsZFBhdGhdID0gdXBkYXRlc1tmaWVsZFBhdGhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBhIG5lc3RlZCB2YWx1ZSBpbiBhbiBvYmplY3QgdXNpbmcgZG90IG5vdGF0aW9uIHBhdGhcclxuICAgICAqL1xyXG4gICAgX3NldE5lc3RlZFZhbHVlKG9iaiwgcGF0aCwgdmFsdWUpIHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IG9iajtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFtwYXJ0c1tpXV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFtwYXJ0c1tpXV0gPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXJ0c1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRbcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQ29tcG9uZW50KGVudGl0eUlkLCBjb21wb25lbnRUeXBlKSB7XHJcbiAgICAgICAgY29uc3QgdHlwZUlkID0gdGhpcy5fY29tcG9uZW50VHlwZUlkLmdldChjb21wb25lbnRUeXBlKTtcclxuICAgICAgICBpZiAodHlwZUlkID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGFzQ29tcG9uZW50Qml0KGVudGl0eUlkLCB0eXBlSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVudGl0aWVzV2l0aCguLi5jb21wb25lbnRUeXBlcykge1xyXG4gICAgICAgIC8vIENyZWF0ZSBjYWNoZSBrZXkgZnJvbSBjb21wb25lbnQgdHlwZXNcclxuICAgICAgICBjb25zdCBxdWVyeUtleSA9IGNvbXBvbmVudFR5cGVzLmpvaW4oJywnKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IG9yIGNyZWF0ZSByZXVzYWJsZSByZXN1bHQgYXJyYXkgZm9yIHRoaXMgcXVlcnlcclxuICAgICAgICAvLyBUaGlzIGF2b2lkcyBhbGxvY2F0aW9ucyAtIGVhY2ggdW5pcXVlIHF1ZXJ5IGdldHMgb25lIGFycmF5IHRoYXQncyByZXVzZWQgZm9yZXZlclxyXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9xdWVyeUNhY2hlLmdldChxdWVyeUtleSk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXJ5Q2FjaGUuc2V0KHF1ZXJ5S2V5LCByZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQubGVuZ3RoID0gMDsgIC8vIENsZWFyIHdpdGhvdXQgZGVhbGxvY2F0aW5nIChrZWVwcyB1bmRlcmx5aW5nIGJ1ZmZlcilcclxuXHJcbiAgICAgICAgLy8gQnVpbGQgcXVlcnkgYml0bWFzayBmcm9tIGNvbXBvbmVudCB0eXBlc1xyXG4gICAgICAgIGxldCBxdWVyeU1hc2swID0gMDtcclxuICAgICAgICBsZXQgcXVlcnlNYXNrMSA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBjb21wb25lbnRUeXBlIG9mIGNvbXBvbmVudFR5cGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVJZCA9IHRoaXMuX2NvbXBvbmVudFR5cGVJZC5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlSWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29tcG9uZW50IHR5cGUgZG9lc24ndCBleGlzdCB5ZXQsIG5vIGVudGl0aWVzIGNhbiBoYXZlIGl0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OyAgLy8gUmV0dXJuIGVtcHR5IHJldXNhYmxlIGFycmF5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVJZCA8IDMyKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeU1hc2swIHw9ICgxIDw8IHR5cGVJZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeU1hc2sxIHw9ICgxIDw8ICh0eXBlSWQgLSAzMikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTY2FuIGFsbCBlbnRpdGllcyB1c2luZyBiaXRtYXNrIG1hdGNoaW5nXHJcbiAgICAgICAgLy8gVGhpcyBpcyBjYWNoZS1mcmllbmRseSBiZWNhdXNlIHdlIGl0ZXJhdGUgY29udGlndW91c2x5IHRocm91Z2ggVHlwZWRBcnJheXNcclxuICAgICAgICBjb25zdCBhbGl2ZSA9IHRoaXMuZW50aXR5QWxpdmU7XHJcbiAgICAgICAgY29uc3QgbWFza3MgPSB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2s7XHJcbiAgICAgICAgY29uc3QgbWF4SWQgPSB0aGlzLm5leHRFbnRpdHlJZDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5SWQgPSAxOyBlbnRpdHlJZCA8IG1heElkOyBlbnRpdHlJZCsrKSB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgZGVhZCBlbnRpdGllc1xyXG4gICAgICAgICAgICBpZiAoIWFsaXZlW2VudGl0eUlkXSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBlbnRpdHkgaGFzIGFsbCByZXF1aXJlZCBjb21wb25lbnRzIHZpYSBiaXRtYXNrXHJcbiAgICAgICAgICAgIGNvbnN0IG1hc2swID0gbWFza3NbZW50aXR5SWQgKiAyXTtcclxuICAgICAgICAgICAgY29uc3QgbWFzazEgPSBtYXNrc1tlbnRpdHlJZCAqIDIgKyAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgobWFzazAgJiBxdWVyeU1hc2swKSA9PT0gcXVlcnlNYXNrMCAmJlxyXG4gICAgICAgICAgICAgICAgKG1hc2sxICYgcXVlcnlNYXNrMSkgPT09IHF1ZXJ5TWFzazEpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVudGl0eUlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGFsaXZlIGVudGl0eSBJRHNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX0gQXJyYXkgb2YgYWxpdmUgZW50aXR5IElEc1xyXG4gICAgICovXHJcbiAgICBnZXRBbGxFbnRpdGllcygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCBhbGl2ZSA9IHRoaXMuZW50aXR5QWxpdmU7XHJcbiAgICAgICAgY29uc3QgbWF4SWQgPSB0aGlzLm5leHRFbnRpdHlJZDtcclxuICAgICAgICBmb3IgKGxldCBlbnRpdHlJZCA9IDE7IGVudGl0eUlkIDwgbWF4SWQ7IGVudGl0eUlkKyspIHtcclxuICAgICAgICAgICAgaWYgKGFsaXZlW2VudGl0eUlkXSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZW50aXR5SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBhbiBlbnRpdHkgZXhpc3RzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW50aXR5SWRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBlbnRpdHlFeGlzdHMoZW50aXR5SWQpIHtcclxuICAgICAgICByZXR1cm4gZW50aXR5SWQgPiAwICYmIGVudGl0eUlkIDwgdGhpcy5NQVhfRU5USVRJRVMgJiYgdGhpcy5lbnRpdHlBbGl2ZVtlbnRpdHlJZF0gPT09IDE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8vIEhJR0gtUEVSRk9STUFOQ0UgSVRFUkFUSU9OIEFQSVxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY29udGlndW91cyBlbnRpdHkgSUQgcmFuZ2UgZm9yIGVudGl0aWVzIHdpdGggYSBzcGVjaWZpYyBjb21wb25lbnQuXHJcbiAgICAgKiBUaGlzIGlzIG9wdGltYWwgd2hlbiBlbnRpdGllcyBhcmUgY3JlYXRlZCBzZXF1ZW50aWFsbHkgYW5kIG5vdCBkZXN0cm95ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudFR5cGUgLSBUaGUgY29tcG9uZW50IHR5cGUgdG8gcXVlcnlcclxuICAgICAqIEByZXR1cm5zIHt7c3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGNvdW50OiBudW1iZXIsIGNvbnRpZ3VvdXM6IGJvb2xlYW59fVxyXG4gICAgICogICAgICAgICAgc3RhcnQ6IGZpcnN0IGVudGl0eSBJRCB3aXRoIGNvbXBvbmVudFxyXG4gICAgICogICAgICAgICAgZW5kOiBsYXN0IGVudGl0eSBJRCArIDEgKGV4Y2x1c2l2ZSwgZm9yIGxvb3AgY29tcGF0aWJpbGl0eSlcclxuICAgICAqICAgICAgICAgIGNvdW50OiBudW1iZXIgb2YgZW50aXRpZXMgd2l0aCB0aGlzIGNvbXBvbmVudFxyXG4gICAgICogICAgICAgICAgY29udGlndW91czogdHJ1ZSBpZiBhbGwgZW50aXRpZXMgaW4gcmFuZ2UgaGF2ZSB0aGUgY29tcG9uZW50IChubyBnYXBzKVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBGYXN0IGl0ZXJhdGlvbiB3aGVuIGVudGl0aWVzIGFyZSBjb250aWd1b3VzOlxyXG4gICAgICogY29uc3QgcmFuZ2UgPSBnYW1lLmdldEVudGl0eVJhbmdlKCdib2lkVGFnJyk7XHJcbiAgICAgKiBjb25zdCBwb3NYID0gZ2FtZS5nZXRGaWVsZEFycmF5KCdwb3NpdGlvbicsICd4Jyk7XHJcbiAgICAgKiBpZiAocmFuZ2UuY29udGlndW91cykge1xyXG4gICAgICogICAgIGZvciAobGV0IGVpZCA9IHJhbmdlLnN0YXJ0OyBlaWQgPCByYW5nZS5lbmQ7IGVpZCsrKSB7XHJcbiAgICAgKiAgICAgICAgIHBvc1hbZWlkXSArPSAxOyAvLyBEaXJlY3QgYXJyYXkgYWNjZXNzLCBubyBpbmRpcmVjdGlvblxyXG4gICAgICogICAgIH1cclxuICAgICAqIH1cclxuICAgICAqL1xyXG4gICAgZ2V0RW50aXR5UmFuZ2UoY29tcG9uZW50VHlwZSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGVJZCA9IHRoaXMuX2NvbXBvbmVudFR5cGVJZC5nZXQoY29tcG9uZW50VHlwZSk7XHJcbiAgICAgICAgaWYgKHR5cGVJZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXJ0OiAwLCBlbmQ6IDAsIGNvdW50OiAwLCBjb250aWd1b3VzOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGl2ZSA9IHRoaXMuZW50aXR5QWxpdmU7XHJcbiAgICAgICAgY29uc3QgbWFza3MgPSB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2s7XHJcbiAgICAgICAgY29uc3QgbWF4SWQgPSB0aGlzLm5leHRFbnRpdHlJZDtcclxuICAgICAgICBjb25zdCBtYXNrSW5kZXggPSB0eXBlSWQgPCAzMiA/IDAgOiAxO1xyXG4gICAgICAgIGNvbnN0IGJpdCA9IDEgPDwgKHR5cGVJZCA8IDMyID8gdHlwZUlkIDogdHlwZUlkIC0gMzIpO1xyXG5cclxuICAgICAgICBsZXQgc3RhcnQgPSAwO1xyXG4gICAgICAgIGxldCBlbmQgPSAwO1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgZmlyc3QgYW5kIGxhc3QgZW50aXR5IHdpdGggdGhpcyBjb21wb25lbnRcclxuICAgICAgICBmb3IgKGxldCBlbnRpdHlJZCA9IDE7IGVudGl0eUlkIDwgbWF4SWQ7IGVudGl0eUlkKyspIHtcclxuICAgICAgICAgICAgaWYgKGFsaXZlW2VudGl0eUlkXSAmJiAobWFza3NbZW50aXR5SWQgKiAyICsgbWFza0luZGV4XSAmIGJpdCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PT0gMCkgc3RhcnQgPSBlbnRpdHlJZDtcclxuICAgICAgICAgICAgICAgIGVuZCA9IGVudGl0eUlkICsgMTtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGNvbnRpZ3VvdXMgKG5vIGdhcHMpXHJcbiAgICAgICAgY29uc3QgY29udGlndW91cyA9IChlbmQgLSBzdGFydCkgPT09IGNvdW50O1xyXG5cclxuICAgICAgICByZXR1cm4geyBzdGFydCwgZW5kLCBjb3VudCwgY29udGlndW91cyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlnaC1wZXJmb3JtYW5jZSBlbnRpdHkgaXRlcmF0aW9uIHdpdGhvdXQgYXJyYXkgYWxsb2NhdGlvbi5cclxuICAgICAqIENhbGxzIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBlbnRpdHkgd2l0aCB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGNvbXBvbmVudFR5cGVzIC0gQ29tcG9uZW50IHR5cGUocykgdG8gcXVlcnlcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZW50aXR5SWQ6IG51bWJlcik6IHZvaWR9IGNhbGxiYWNrIC0gQ2FsbGVkIGZvciBlYWNoIG1hdGNoaW5nIGVudGl0eVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBnYW1lLmZvckVhY2hFbnRpdHkoJ2JvaWRUYWcnLCAoZWlkKSA9PiB7XHJcbiAgICAgKiAgICAgcG9zWFtlaWRdICs9IGhlYWRYW2VpZF0gKiBzcGVlZDtcclxuICAgICAqIH0pO1xyXG4gICAgICovXHJcbiAgICBmb3JFYWNoRW50aXR5KGNvbXBvbmVudFR5cGVzLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGNvbnN0IHR5cGVzID0gQXJyYXkuaXNBcnJheShjb21wb25lbnRUeXBlcykgPyBjb21wb25lbnRUeXBlcyA6IFtjb21wb25lbnRUeXBlc107XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIHF1ZXJ5IGJpdG1hc2tcclxuICAgICAgICBsZXQgcXVlcnlNYXNrMCA9IDA7XHJcbiAgICAgICAgbGV0IHF1ZXJ5TWFzazEgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50VHlwZSBvZiB0eXBlcykge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlSWQgPSB0aGlzLl9jb21wb25lbnRUeXBlSWQuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgICAgICBpZiAodHlwZUlkID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gTm8gZW50aXRpZXMgY2FuIG1hdGNoXHJcbiAgICAgICAgICAgIGlmICh0eXBlSWQgPCAzMikge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlNYXNrMCB8PSAoMSA8PCB0eXBlSWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlNYXNrMSB8PSAoMSA8PCAodHlwZUlkIC0gMzIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWxpdmUgPSB0aGlzLmVudGl0eUFsaXZlO1xyXG4gICAgICAgIGNvbnN0IG1hc2tzID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrO1xyXG4gICAgICAgIGNvbnN0IG1heElkID0gdGhpcy5uZXh0RW50aXR5SWQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVudGl0eUlkID0gMTsgZW50aXR5SWQgPCBtYXhJZDsgZW50aXR5SWQrKykge1xyXG4gICAgICAgICAgICBpZiAoIWFsaXZlW2VudGl0eUlkXSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hc2swID0gbWFza3NbZW50aXR5SWQgKiAyXTtcclxuICAgICAgICAgICAgY29uc3QgbWFzazEgPSBtYXNrc1tlbnRpdHlJZCAqIDIgKyAxXTtcclxuICAgICAgICAgICAgaWYgKChtYXNrMCAmIHF1ZXJ5TWFzazApID09PSBxdWVyeU1hc2swICYmIChtYXNrMSAmIHF1ZXJ5TWFzazEpID09PSBxdWVyeU1hc2sxKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlbnRpdHlJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJdGVyYXRlIG92ZXIgYSBjb250aWd1b3VzIHJhbmdlIG9mIGVudGl0aWVzLlxyXG4gICAgICogVXNlIHRoaXMgd2hlbiB5b3Uga25vdyBlbnRpdGllcyB3ZXJlIGNyZWF0ZWQgc2VxdWVudGlhbGx5IGFuZCBub3QgZGVzdHJveWVkLlxyXG4gICAgICogVGhpcyBpcyB0aGUgZmFzdGVzdCBpdGVyYXRpb24gbWV0aG9kIC0gbm8gY29tcG9uZW50IGNoZWNrcywgcHVyZSBhcnJheSBhY2Nlc3MuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gRmlyc3QgZW50aXR5IElEIChpbmNsdXNpdmUpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIC0gTGFzdCBlbnRpdHkgSUQgKGV4Y2x1c2l2ZSlcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZW50aXR5SWQ6IG51bWJlcik6IHZvaWR9IGNhbGxiYWNrXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGNvbnN0IHJhbmdlID0gZ2FtZS5nZXRFbnRpdHlSYW5nZSgnYm9pZFRhZycpO1xyXG4gICAgICogaWYgKHJhbmdlLmNvbnRpZ3VvdXMpIHtcclxuICAgICAqICAgICBnYW1lLmZvckVhY2hJblJhbmdlKHJhbmdlLnN0YXJ0LCByYW5nZS5lbmQsIChlaWQpID0+IHtcclxuICAgICAqICAgICAgICAgcG9zWFtlaWRdICs9IGhlYWRYW2VpZF0gKiBzcGVlZDtcclxuICAgICAqICAgICB9KTtcclxuICAgICAqIH1cclxuICAgICAqL1xyXG4gICAgZm9yRWFjaEluUmFuZ2Uoc3RhcnQsIGVuZCwgY2FsbGJhY2spIHtcclxuICAgICAgICBmb3IgKGxldCBlbnRpdHlJZCA9IHN0YXJ0OyBlbnRpdHlJZCA8IGVuZDsgZW50aXR5SWQrKykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhlbnRpdHlJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG11bHRpcGxlIGZpZWxkIGFycmF5cyBhdCBvbmNlIGZvciBhIGNvbXBvbmVudC5cclxuICAgICAqIE1vcmUgZWZmaWNpZW50IHRoYW4gbXVsdGlwbGUgZ2V0RmllbGRBcnJheSBjYWxscy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50VHlwZVxyXG4gICAgICogQHBhcmFtIHsuLi5zdHJpbmd9IGZpZWxkUGF0aHMgLSBGaWVsZCBwYXRocyB0byByZXRyaWV2ZVxyXG4gICAgICogQHJldHVybnMge0Zsb2F0MzJBcnJheVtdfSBBcnJheSBvZiBUeXBlZEFycmF5cyBpbiB0aGUgc2FtZSBvcmRlciBhcyBmaWVsZFBhdGhzXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGNvbnN0IFtwb3NYLCBwb3NZLCBwb3NaXSA9IGdhbWUuZ2V0RmllbGRzKCdwb3NpdGlvbicsICd4JywgJ3knLCAneicpO1xyXG4gICAgICovXHJcbiAgICBnZXRGaWVsZHMoY29tcG9uZW50VHlwZSwgLi4uZmllbGRQYXRocykge1xyXG4gICAgICAgIHJldHVybiBmaWVsZFBhdGhzLm1hcChmaWVsZFBhdGggPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtjb21wb25lbnRUeXBlfS4ke2ZpZWxkUGF0aH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbnVtZXJpY0FycmF5cy5nZXQoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb3VudCBvZiBhbGl2ZSBlbnRpdGllc1xyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0RW50aXR5Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXR5Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGNvbXBvbmVudCB0eXBlcyBmb3IgYW4gZW50aXR5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW50aXR5SWRcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gQXJyYXkgb2YgY29tcG9uZW50IHR5cGUgbmFtZXNcclxuICAgICAqL1xyXG4gICAgZ2V0RW50aXR5Q29tcG9uZW50VHlwZXMoZW50aXR5SWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW50aXR5QWxpdmVbZW50aXR5SWRdKSByZXR1cm4gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG1hc2swID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrW2VudGl0eUlkICogMl07XHJcbiAgICAgICAgY29uc3QgbWFzazEgPSB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2tbZW50aXR5SWQgKiAyICsgMV07XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGZpcnN0IDMyIGNvbXBvbmVudCB0eXBlc1xyXG4gICAgICAgIGZvciAobGV0IGJpdCA9IDA7IGJpdCA8IDMyOyBiaXQrKykge1xyXG4gICAgICAgICAgICBpZiAobWFzazAgJiAoMSA8PCBiaXQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5fY29tcG9uZW50VHlwZU5hbWVzW2JpdF07XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSkgcmVzdWx0LnB1c2gobmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIG5leHQgMzIgY29tcG9uZW50IHR5cGVzXHJcbiAgICAgICAgZm9yIChsZXQgYml0ID0gMDsgYml0IDwgMzI7IGJpdCsrKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXNrMSAmICgxIDw8IGJpdCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9jb21wb25lbnRUeXBlTmFtZXNbYml0ICsgMzJdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUpIHJlc3VsdC5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZSBvdmVyIGVudGl0aWVzIHdpdGggc3BlY2lmaWMgY29tcG9uZW50cyB3aXRob3V0IGFsbG9jYXRpbmcgYXJyYXlzXHJcbiAgICAgKiBDYWxscyBjYWxsYmFjayhlbnRpdHlJZCkgZm9yIGVhY2ggbWF0Y2hpbmcgZW50aXR5XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBjb21wb25lbnRUeXBlcyAtIENvbXBvbmVudCB0eXBlcyB0byBtYXRjaFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsZWQgd2l0aCBlYWNoIG1hdGNoaW5nIGVudGl0eUlkXHJcbiAgICAgKi9cclxuICAgIGZvckVhY2hFbnRpdHlXaXRoKGNvbXBvbmVudFR5cGVzLCBjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIEJ1aWxkIHF1ZXJ5IGJpdG1hc2tcclxuICAgICAgICBsZXQgcXVlcnlNYXNrMCA9IDA7XHJcbiAgICAgICAgbGV0IHF1ZXJ5TWFzazEgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50VHlwZSBvZiBjb21wb25lbnRUeXBlcykge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlSWQgPSB0aGlzLl9jb21wb25lbnRUeXBlSWQuZ2V0KGNvbXBvbmVudFR5cGUpO1xyXG4gICAgICAgICAgICBpZiAodHlwZUlkID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gTm8gZW50aXRpZXMgY2FuIG1hdGNoXHJcbiAgICAgICAgICAgIGlmICh0eXBlSWQgPCAzMikge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlNYXNrMCB8PSAoMSA8PCB0eXBlSWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlNYXNrMSB8PSAoMSA8PCAodHlwZUlkIC0gMzIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWxpdmUgPSB0aGlzLmVudGl0eUFsaXZlO1xyXG4gICAgICAgIGNvbnN0IG1hc2tzID0gdGhpcy5lbnRpdHlDb21wb25lbnRNYXNrO1xyXG4gICAgICAgIGNvbnN0IG1heElkID0gdGhpcy5uZXh0RW50aXR5SWQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVudGl0eUlkID0gMTsgZW50aXR5SWQgPCBtYXhJZDsgZW50aXR5SWQrKykge1xyXG4gICAgICAgICAgICBpZiAoIWFsaXZlW2VudGl0eUlkXSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hc2swID0gbWFza3NbZW50aXR5SWQgKiAyXTtcclxuICAgICAgICAgICAgY29uc3QgbWFzazEgPSBtYXNrc1tlbnRpdHlJZCAqIDIgKyAxXTtcclxuICAgICAgICAgICAgaWYgKChtYXNrMCAmIHF1ZXJ5TWFzazApID09PSBxdWVyeU1hc2swICYmXHJcbiAgICAgICAgICAgICAgICAobWFzazEgJiBxdWVyeU1hc2sxKSA9PT0gcXVlcnlNYXNrMSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZW50aXR5SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgYWxsIGVudGl0aWVzIGFuZCByZXNldCB0aGUgRUNTIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNsZWFyQWxsRW50aXRpZXMoKSB7XHJcbiAgICAgICAgLy8gQ2xlYXIgYWxsIG9iamVjdCBzdG9yYWdlXHJcbiAgICAgICAgZm9yIChjb25zdCBzdG9yYWdlIG9mIHRoaXMuX29iamVjdENvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICAgICAgc3RvcmFnZS5maWxsKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBUeXBlZEFycmF5c1xyXG4gICAgICAgIHRoaXMuZW50aXR5QWxpdmUuZmlsbCgwKTtcclxuICAgICAgICB0aGlzLmVudGl0eUNvbXBvbmVudE1hc2suZmlsbCgwKTtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgZW50aXR5IG1hbmFnZW1lbnRcclxuICAgICAgICB0aGlzLm5leHRFbnRpdHlJZCA9IDE7XHJcbiAgICAgICAgdGhpcy5lbnRpdHlDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIC8vIEludmFsaWRhdGUgcXVlcnkgY2FjaGVcclxuICAgICAgICB0aGlzLl9xdWVyeUNhY2hlLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJpZ2dlckV2ZW50KGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zeXN0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbSA9IHRoaXMuc3lzdGVtc1tpXTtcclxuICAgICAgICAgICAgaWYgKHN5c3RlbVtldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW1bZXZlbnROYW1lXShkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnYW1lT3ZlcigpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmdhbWVPdmVyID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnYW1lVmljdG9yeSgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLnZpY3RvcnkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0Q3VycmVudFRpbWUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5ub3cgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMudGlja0NvdW50ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRzKCl7XHJcbiAgICAgICAgaWYoIXRoaXMuY29tcG9uZW50cyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cyA9IHRoaXMuY29tcG9uZW50R2VuZXJhdG9yLmdldENvbXBvbmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRTY2hlbWEoY29tcG9uZW50SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0U2NoZW1hKGNvbXBvbmVudElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBlbnVtIG1hcCB3aXRoIHRvSW5kZXggYW5kIHRvVmFsdWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbnVtTmFtZSAtIFRoZSBlbnVtIG5hbWUgKGUuZy4sICd0ZWFtJywgJ2VsZW1lbnQnLCAncHJvamVjdGlsZXMnKVxyXG4gICAgICogQHJldHVybnMge09iamVjdH0geyB0b0luZGV4OiB7c3RyaW5nLT5udW1iZXJ9LCB0b1ZhbHVlOiBbbnVtYmVyLT5zdHJpbmddIH1cclxuICAgICAqL1xyXG4gICAgZ2V0RW51bU1hcChlbnVtTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEdlbmVyYXRvci5nZXRFbnVtTWFwKGVudW1OYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbGxlY3Rpb24gaXRlbSBieSBudW1lcmljIGluZGV4XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sbGVjdGlvbk5hbWUgLSBUaGUgY29sbGVjdGlvbiBuYW1lIChlLmcuLCAnbGV2ZWxzJywgJ3VuaXRzJylcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBudW1lcmljIGluZGV4XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fHVuZGVmaW5lZH0gVGhlIGNvbGxlY3Rpb24gaXRlbSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxyXG4gICAgICovXHJcbiAgICBnZXRDb2xsZWN0aW9uSXRlbShjb2xsZWN0aW9uTmFtZSwgaW5kZXgpIHtcclxuICAgICAgICBjb25zdCBlbnVtTWFwID0gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0RW51bU1hcChjb2xsZWN0aW9uTmFtZSk7XHJcbiAgICAgICAgaWYgKCFlbnVtTWFwPy50b1ZhbHVlPy5baW5kZXhdKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGVudW1NYXAudG9WYWx1ZVtpbmRleF07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGVjdGlvbnMoKVtjb2xsZWN0aW9uTmFtZV0/LltrZXldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29sbGVjdGlvbiBpdGVtIGtleSAoc3RyaW5nIG5hbWUpIGJ5IG51bWVyaWMgaW5kZXhcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xsZWN0aW9uTmFtZSAtIFRoZSBjb2xsZWN0aW9uIG5hbWUgKGUuZy4sICdsZXZlbHMnLCAndW5pdHMnKVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIG51bWVyaWMgaW5kZXhcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBUaGUgY29sbGVjdGlvbiBrZXksIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgZ2V0Q29sbGVjdGlvbktleShjb2xsZWN0aW9uTmFtZSwgaW5kZXgpIHtcclxuICAgICAgICBjb25zdCBlbnVtTWFwID0gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0RW51bU1hcChjb2xsZWN0aW9uTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIGVudW1NYXA/LnRvVmFsdWU/LltpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGVudW1zIGFzIGEgY29udmVuaWVudCBsb29rdXAgb2JqZWN0XHJcbiAgICAgKiBVc2FnZTogY29uc3QgZW51bXMgPSBnYW1lLmdldEVudW1zKCk7XHJcbiAgICAgKiAgICAgICAgY29tcG9uZW50cy50ZWFtKHsgdGVhbTogZW51bXMudGVhbS5sZWZ0IH0pXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSB7IHRlYW06IHsgbmV1dHJhbDogMCwgaG9zdGlsZTogMSwgLi4uIH0sIGVsZW1lbnQ6IHsgLi4uIH0sIC4uLiB9XHJcbiAgICAgKi9cclxuICAgIGdldEVudW1zKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZW51bXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZW51bXMgPSB0aGlzLmNvbXBvbmVudEdlbmVyYXRvci5nZXRFbnVtcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZW51bXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmV2ZXJzZSBlbnVtIGxvb2t1cCAoaW5kZXgg4oaSIGtleSlcclxuICAgICAqIFVzYWdlOiBjb25zdCByZXZlcnNlRW51bXMgPSBnYW1lLmdldFJldmVyc2VFbnVtcygpO1xyXG4gICAgICogICAgICAgIGNvbnN0IGxldmVsTmFtZSA9IHJldmVyc2VFbnVtcy5sZXZlbHNbbGV2ZWxJbmRleF07XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSB7IGxldmVsczogeyAwOiAnbGV2ZWxfMScsIDE6ICdsZXZlbF8yJyB9LCAuLi4gfVxyXG4gICAgICovXHJcbiAgICBnZXRSZXZlcnNlRW51bXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9yZXZlcnNlRW51bXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmV2ZXJzZUVudW1zID0gdGhpcy5jb21wb25lbnRHZW5lcmF0b3IuZ2V0UmV2ZXJzZUVudW1zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXZlcnNlRW51bXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VW5pdFR5cGVEZWYodW5pdFR5cGVDb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoIXVuaXRUeXBlQ29tcG9uZW50IHx8IHVuaXRUeXBlQ29tcG9uZW50LmNvbGxlY3Rpb24gPT09IC0xIHx8IHVuaXRUeXBlQ29tcG9uZW50LnR5cGUgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbnMgPSB0aGlzLmdldENvbGxlY3Rpb25zKCk7XHJcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbkVudW1NYXAgPSB0aGlzLmdldEVudW1NYXAoJ29iamVjdFR5cGVEZWZpbml0aW9ucycpO1xyXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25OYW1lID0gY29sbGVjdGlvbkVudW1NYXA/LnRvVmFsdWU/Llt1bml0VHlwZUNvbXBvbmVudC5jb2xsZWN0aW9uXTtcclxuXHJcbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uTmFtZSB8fCAhY29sbGVjdGlvbnNbY29sbGVjdGlvbk5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdHlwZUVudW1NYXAgPSB0aGlzLmdldEVudW1NYXAoY29sbGVjdGlvbk5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gdHlwZUVudW1NYXA/LnRvVmFsdWU/Llt1bml0VHlwZUNvbXBvbmVudC50eXBlXTtcclxuXHJcbiAgICAgICAgaWYgKCF0eXBlTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlZiA9IGNvbGxlY3Rpb25zW2NvbGxlY3Rpb25OYW1lXVt0eXBlTmFtZV07XHJcbiAgICAgICAgLy8gSW5jbHVkZSByZXNvbHZlZCBuYW1lcyBmb3IgY29udmVuaWVuY2VcclxuICAgICAgICBpZiAoZGVmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAuLi5kZWYsXHJcbiAgICAgICAgICAgICAgICBpZDogdHlwZU5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIEFzc2lnbiB0byBnbG9iYWwuR1VUUyBmb3Igc2VydmVyXHJcbmlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuR1VUUykge1xyXG4gICAgZ2xvYmFsLkdVVFMuQmFzZUVDU0dhbWUgPSBCYXNlRUNTR2FtZTtcclxufVxyXG5cclxuLy8gRVM2IGV4cG9ydHMgZm9yIHdlYnBhY2sgYnVuZGxpbmdcclxuZXhwb3J0IGRlZmF1bHQgQmFzZUVDU0dhbWU7XHJcbmV4cG9ydCB7IEJhc2VFQ1NHYW1lIH07XHJcblxuXG4vLyBBdXRvLWdlbmVyYXRlZCBleHBvcnRzXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LkdVVFMpIHtcbiAgd2luZG93LkdVVFMuQmFzZUVDU0dhbWUgPSBCYXNlRUNTR2FtZTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlRUNTR2FtZSIsImNvbnN0cnVjdG9yIiwiYXBwIiwic3RhdGUiLCJlbnRpdGllc1RvQWRkIiwiY2xhc3NlcyIsInN5c3RlbXMiLCJzY2VuZU1hbmFnZXIiLCJfc2VydmljZXMiLCJHVVRTIiwiR2FtZVNlcnZpY2VzIiwiZ2FtZUNvbmZpZyIsImNvbGxlY3Rpb25zIiwiY29uZmlncyIsImdhbWUiLCJNQVhfRU5USVRJRVMiLCJtYXhFbnRpdGllcyIsImVudGl0eUFsaXZlIiwiVWludDhBcnJheSIsImVudGl0eUNvbXBvbmVudE1hc2siLCJVaW50MzJBcnJheSIsIm5leHRFbnRpdHlJZCIsImVudGl0eUNvdW50IiwiX2NvbXBvbmVudFR5cGVJZCIsIk1hcCIsIl9jb21wb25lbnRUeXBlTmFtZXMiLCJfbmV4dENvbXBvbmVudFR5cGVJZCIsIl9udW1lcmljQXJyYXlzIiwiX251bWVyaWNDb21wb25lbnRJbmZvIiwiX29iamVjdENvbXBvbmVudHMiLCJfcXVlcnlDYWNoZSIsIl9sYXN0U3luY2VkU3RhdGUiLCJfY2xpZW50T25seUNvbXBvbmVudHMiLCJTZXQiLCJfcHJveHlDYWNoZSIsIl9xdWVyeVJlc3VsdEJ1ZmZlciIsImxhc3RUaW1lIiwiY3VycmVudFRpbWUiLCJkZWx0YVRpbWUiLCJ0aWNrQ291bnQiLCJGSVhFRF9ERUxUQV9USU1FIiwiaXNTZXJ2ZXIiLCJQZXJmb3JtYW5jZU1vbml0b3IiLCJwZXJmb3JtYW5jZU1vbml0b3IiLCJDYWxsTG9nZ2VyIiwiY2FsbExvZ2dlciIsIlNlZWRlZFJhbmRvbSIsInJuZyIsIkRhdGUiLCJub3ciLCJfaW5pdENvbXBvbmVudFR5cGVzIiwiZ2V0Q29sbGVjdGlvbnMiLCJjb21wb25lbnRHZW5lcmF0b3IiLCJDb21wb25lbnRHZW5lcmF0b3IiLCJjb21wb25lbnRzIiwicmVnaXN0ZXIiLCJnZXRDb21wb25lbnRzIiwiYmluZCIsImdldENvbXBvbmVudFNjaGVtYSIsImdldEVudW1NYXAiLCJnZXRFbnVtcyIsImdldFJldmVyc2VFbnVtcyIsImdldFVuaXRUeXBlRGVmIiwiY29tcG9uZW50TmFtZXMiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsImNvbXBvbmVudE5hbWUiLCJfZ2V0Q29tcG9uZW50VHlwZUlkIiwiY29tcG9uZW50VHlwZSIsInR5cGVJZCIsImdldCIsInVuZGVmaW5lZCIsInNldCIsIl9zZXRDb21wb25lbnRCaXQiLCJlbnRpdHlJZCIsImNvbXBvbmVudFR5cGVJZCIsIm1hc2tJbmRleCIsImJpdCIsIl9jbGVhckNvbXBvbmVudEJpdCIsIl9oYXNDb21wb25lbnRCaXQiLCJfZ2V0TnVtZXJpY0FycmF5Iiwia2V5IiwiYXJyIiwiRmxvYXQzMkFycmF5IiwiX2dldE9iamVjdFN0b3JhZ2UiLCJzdG9yYWdlIiwiQXJyYXkiLCJfYW5hbHl6ZUNvbXBvbmVudFNjaGVtYSIsInNjaGVtYSIsImVudW1NYXAiLCJwcmVmaXgiLCJmaWVsZHMiLCJpc051bWVyaWMiLCJ2YWx1ZSIsImZpZWxkUGF0aCIsInB1c2giLCJ0b0luZGV4IiwiaGFzT3duUHJvcGVydHkiLCJpc0FycmF5IiwiaXNFbnVtQXJyYXkiLCJldmVyeSIsIml0ZW0iLCJuZXN0ZWQiLCJfc2V0dXBDb21wb25lbnRTdG9yYWdlIiwiY29tcG9uZW50SWQiLCJoYXMiLCJhbmFseXNpcyIsIm9yaWdpbmFsU2NoZW1hIiwiZ2V0T3JpZ2luYWxTY2hlbWEiLCJfc2V0TnVtZXJpY0ZpZWxkIiwiX2dldE51bWVyaWNGaWVsZCIsIl9mcm9tU3RvcmFnZVZhbHVlIiwiX2dldFJhd051bWVyaWNGaWVsZCIsImdldEZpZWxkIiwic2V0RmllbGQiLCJfdG9TdG9yYWdlVmFsdWUiLCJnZXRGaWVsZEFycmF5cyIsImZpZWxkUGF0aHMiLCJyZXN1bHQiLCJnZXRGaWVsZEFycmF5IiwiZ2V0RmllbGRzIiwic2V0RmllbGRzIiwiZmllbGRWYWx1ZXMiLCJpc051bGwiLCJJbmZpbml0eSIsIl90b1N5bmNWYWx1ZSIsIl9mcm9tU3luY1ZhbHVlIiwiX3dyaXRlTnVtZXJpY0NvbXBvbmVudCIsImRhdGEiLCJzY2hlbWFWYWx1ZSIsImRhdGFWYWx1ZSIsIl9nZXROZXN0ZWRWYWx1ZSIsIl9yZWFkTnVtZXJpY0NvbXBvbmVudCIsImNvbXBvbmVudENhY2hlIiwiY2FjaGVkIiwicHJveHkiLCJfY3JlYXRlQ29tcG9uZW50UHJveHkiLCJzY2hlbWFJbmZvIiwidHlwZSIsIiRmaXhlZEFycmF5IiwiJGJpdG1hc2siLCIkZW51bSIsIm5lc3RlZENhY2hlIiwiUHJveHkiLCJ0YXJnZXQiLCJwcm9wIiwiaW5mbyIsIl9jcmVhdGVOZXN0ZWRQcm94eSIsInRvSlNPTiIsInN0b3JlZFZhbHVlIiwib3duS2V5cyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJfY3JlYXRlRml4ZWRBcnJheVByb3h5IiwiX2NyZWF0ZUJpdG1hc2tQcm94eSIsImJhc2VOYW1lIiwiY29uZmlnIiwic2l6ZSIsInNpemVGcm9tIiwidG9WYWx1ZSIsImxlbmd0aCIsImZpZWxkUHJlZml4IiwiaSIsImVsZW1lbnQiLCJmaWVsZCIsImluZGV4IiwicGFyc2VJbnQiLCJpc05hTiIsInQiLCJmIiwidiIsIlN0cmluZyIsIndyaXRhYmxlIiwiYml0Q291bnQiLCJmaWVsZENvdW50IiwiTWF0aCIsImNlaWwiLCJnZXRJbmRleCIsImlkIiwiZ2V0RmllbGRWYWx1ZSIsImZpZWxkSWR4Iiwic2V0RmllbGRWYWx1ZSIsInZhbCIsImZsb29yIiwiYml0SWR4IiwiYWRkIiwicmVtb3ZlIiwidG9nZ2xlIiwidG9BcnJheSIsImNsZWFyIiwib2JqIiwicGF0aCIsInBhcnRzIiwic3BsaXQiLCJjdXJyZW50IiwicGFydCIsIm1ldGhvZCIsImhhc1NlcnZpY2UiLCJjYWxsIiwiYXJncyIsImxvZyIsImxpc3RTZXJ2aWNlcyIsImluaXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidHJpZ2dlckV2ZW50IiwibG9hZEdhbWVTY3JpcHRzIiwib3B0aW9ucyIsInNlcnZlciIsIlNjZW5lTWFuYWdlciIsImF2YWlsYWJsZVN5c3RlbVR5cGVzIiwic3lzdGVtc0J5TmFtZSIsInNraXBJbml0aWFsU2NlbmUiLCJsb2FkSW5pdGlhbFNjZW5lIiwiaW5pdGlhbFNjZW5lIiwibG9hZFNjZW5lIiwiY29uc29sZSIsIndhcm4iLCJnZXRPckNyZWF0ZVN5c3RlbSIsInN5c3RlbU5hbWUiLCJpbmNsdWRlcyIsImVycm9yIiwicGFyYW1zIiwiY2FudmFzIiwic3lzdGVtSW5zdCIsImVuYWJsZWQiLCJTeXN0ZW1DbGFzcyIsInNlcnZpY2VzIiwic2VydmljZU5hbWUiLCJpc1N5c3RlbUF2YWlsYWJsZSIsInN3aXRjaFNjZW5lIiwic2NlbmVOYW1lIiwiZ2V0RW50aXR5SWQiLCJFcnJvciIsInVwZGF0ZSIsIl9tZW1vcnlEZWJ1Z0xhc3RMb2ciLCJzdGF0cyIsInF1ZXJ5Q2FjaGUiLCJwcm94eUNhY2hlIiwic3lzdGVtIiwiX2VudGl0eVBvc2l0aW9uQ2FjaGUiLCJyZW5kZXJQb3NDYWNoZSIsIl91bml0UG9zaXRpb25zIiwiZm93VW5pdFBvcyIsIl9sb3NDYWNoZSIsImxvc0NhY2hlIiwic3Bhd25lZEVudGl0aWVzIiwic3Bhd25lZCIsInByb2plY3RpbGVUcmFpbHMiLCJ0cmFpbHMiLCJoZWFsdGhCYXJzIiwiZGFtYWdlTnVtYmVycyIsImRtZ051bXMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0cyIsImVudGl0eUJlaGF2aW9yU3RhdGUiLCJiZWhhdmlvcnMiLCJfdW5pdERhdGFQb29sIiwibXZtdFBvb2wiLCJlbnRyaWVzIiwibWFwIiwiayIsImpvaW4iLCJpc1BhdXNlZCIsInN0YXJ0RnJhbWUiLCJyb3VuZCIsIm5hbWUiLCJzdGFydFN5c3RlbSIsImVuZFN5c3RlbVVwZGF0ZSIsInJlbmRlciIsInN0YXJ0U3lzdGVtUmVuZGVyIiwiZW5kU3lzdGVtUmVuZGVyIiwidXBkYXRlT3ZlcmxheSIsInBvc3RVcGRhdGUiLCJmb3JFYWNoIiwiZW50aXR5IiwiYWRkRW50aXR5IiwiY3JlYXRlRW50aXR5Iiwic2V0SWQiLCJ0cmFjZSIsImRlc3Ryb3lFbnRpdHkiLCJlbnRpdHlEZXN0cm95ZWQiLCJkZWxldGUiLCJhZGRDb21wb25lbnQiLCJjb21wb25lbnRNZXRob2RzIiwiY29tcG9uZW50RGF0YSIsImNvbXBvbmVudEluZm8iLCJhZGRDb21wb25lbnRzIiwiY29tcG9uZW50c0RhdGEiLCJoYXNFbnVtU2VydmljZSIsInJlbW92ZUNvbXBvbmVudCIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsInNlcmlhbGl6ZUNvbXBvbmVudCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImdldEVDU0RhdGEiLCJmdWxsU3luYyIsIm1heEVudGl0eSIsImxhc3RTdGF0ZSIsIl9nZXRGdWxsRUNTRGF0YSIsIl9jYXB0dXJlU3RhdGVTbmFwc2hvdCIsIl9nZXREZWx0YUVDU0RhdGEiLCJudW1lcmljQXJyYXlzIiwib2JqZWN0Q29tcG9uZW50cyIsImxvdyIsImhpZ2giLCJsYXN0QXJyIiwibGFzdE1heEVudGl0eSIsInNwYXJzZSIsImxhc3RWYWwiLCJzbmFwc2hvdCIsInN1YmFycmF5IiwiY29weSIsImVudGl0eURlYWQiLCJwcmV2aW91cyIsImxvd0N1cnJlbnQiLCJoaWdoQ3VycmVudCIsImxvd1ByZXYiLCJoaWdoUHJldiIsImxhc3RTdG9yYWdlIiwiY3VycmVudFN0ciIsInByZXZpb3VzU3RyIiwicmVzZXRTeW5jU3RhdGUiLCJjYXB0dXJlU3RhdGVDaGVja3N1bSIsImhhc2giLCJhZGRUb0hhc2giLCJfY2hlY2tzdW1CdWZmZXIiLCJBcnJheUJ1ZmZlciIsIl9jaGVja3N1bVZpZXciLCJEYXRhVmlldyIsInNldEZsb2F0NjQiLCJnZXRVaW50MzIiLCJzb3J0ZWRLZXlzIiwiZnJvbSIsImNoZWNrc3VtIiwidmFsaWRhdGVTdGF0ZVN5bmMiLCJsb2NhbFN0YXRlIiwicmVtb3RlU3RhdGUiLCJhcHBseUVDU0RhdGEiLCJfYXBwbHlGdWxsRUNTRGF0YSIsIl9hcHBseURlbHRhRUNTRGF0YSIsIl9maW5hbGl6ZUVDU1N5bmMiLCJmaWxsIiwiZW50aXR5SWRTdHIiLCJjbGllbnRPbmx5TWFza0xvdyIsImNsaWVudE9ubHlNYXNrSGlnaCIsInByZXNlcnZlZExvdyIsInByZXNlcnZlZEhpZ2giLCJtYXNrIiwidXBkYXRlQ29tcG9uZW50IiwidXBkYXRlcyIsIl9zZXROZXN0ZWRWYWx1ZSIsImhhc0NvbXBvbmVudCIsImdldEVudGl0aWVzV2l0aCIsImNvbXBvbmVudFR5cGVzIiwicXVlcnlLZXkiLCJxdWVyeU1hc2swIiwicXVlcnlNYXNrMSIsImFsaXZlIiwibWFza3MiLCJtYXhJZCIsIm1hc2swIiwibWFzazEiLCJnZXRBbGxFbnRpdGllcyIsImVudGl0eUV4aXN0cyIsImdldEVudGl0eVJhbmdlIiwic3RhcnQiLCJlbmQiLCJjb3VudCIsImNvbnRpZ3VvdXMiLCJmb3JFYWNoRW50aXR5IiwiY2FsbGJhY2siLCJ0eXBlcyIsImZvckVhY2hJblJhbmdlIiwiZ2V0RW50aXR5Q291bnQiLCJnZXRFbnRpdHlDb21wb25lbnRUeXBlcyIsImZvckVhY2hFbnRpdHlXaXRoIiwiY2xlYXJBbGxFbnRpdGllcyIsInZhbHVlcyIsImV2ZW50TmFtZSIsImdhbWVPdmVyIiwiZ2FtZVZpY3RvcnkiLCJ2aWN0b3J5IiwicmVzZXRDdXJyZW50VGltZSIsImdldFNjaGVtYSIsImVudW1OYW1lIiwiZ2V0Q29sbGVjdGlvbkl0ZW0iLCJjb2xsZWN0aW9uTmFtZSIsImdldENvbGxlY3Rpb25LZXkiLCJfZW51bXMiLCJfcmV2ZXJzZUVudW1zIiwidW5pdFR5cGVDb21wb25lbnQiLCJjb2xsZWN0aW9uIiwiY29sbGVjdGlvbkVudW1NYXAiLCJ0eXBlRW51bU1hcCIsInR5cGVOYW1lIiwiZGVmIiwiZ2xvYmFsIiwid2luZG93Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./global/collections/scripts/libraries/js/BaseECSGame.js\n\n}");

/***/ }),

/***/ "./global/collections/scripts/libraries/js/BaseLoader.js":
/*!***************************************************************!*\
  !*** ./global/collections/scripts/libraries/js/BaseLoader.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLoader: () => (/* binding */ BaseLoader),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass BaseLoader {\n  constructor(game) {\n    this.game = game;\n  }\n  async load() {\n    this.collections = this.game.getCollections();\n    this.game.init(false);\n  }\n}\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.BaseLoader = BaseLoader;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BaseLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZUxvYWRlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLFVBQVUsQ0FBQztFQUNiQyxXQUFXQSxDQUFDQyxJQUFJLEVBQUU7SUFDZCxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSTtFQUNwQjtFQUNBLE1BQU1DLElBQUlBLENBQUEsRUFBRTtJQUNSLElBQUksQ0FBQ0MsV0FBVyxHQUFHLElBQUksQ0FBQ0YsSUFBSSxDQUFDRyxjQUFjLENBQUMsQ0FBQztJQUM3QyxJQUFJLENBQUNILElBQUksQ0FBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQztFQUN6QjtBQUdKOztBQUVBO0FBQ0EsSUFBSSxPQUFPQyxNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNDLElBQUksRUFBRTtFQUNoREQsTUFBTSxDQUFDQyxJQUFJLENBQUNSLFVBQVUsR0FBR0EsVUFBVTtBQUNyQztBQUVBLGlFQUFlQSxVQUFVLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3dlcmRlZmVuc2UvLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZUxvYWRlci5qcz9jY2YxIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEJhc2VMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB9ICAgIFxuICAgIGFzeW5jIGxvYWQoKXtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IHRoaXMuZ2FtZS5nZXRDb2xsZWN0aW9ucygpOyAgICAgICAgICBcbiAgICAgICAgdGhpcy5nYW1lLmluaXQoZmFsc2UpO1xuICAgIH1cbiAgICBcbiBcbn1cblxuLy8gQXV0by1nZW5lcmF0ZWQgZXhwb3J0c1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5HVVRTKSB7XG4gIHdpbmRvdy5HVVRTLkJhc2VMb2FkZXIgPSBCYXNlTG9hZGVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlTG9hZGVyO1xuZXhwb3J0IHsgQmFzZUxvYWRlciB9O1xuIl0sIm5hbWVzIjpbIkJhc2VMb2FkZXIiLCJjb25zdHJ1Y3RvciIsImdhbWUiLCJsb2FkIiwiY29sbGVjdGlvbnMiLCJnZXRDb2xsZWN0aW9ucyIsImluaXQiLCJ3aW5kb3ciLCJHVVRTIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./global/collections/scripts/libraries/js/BaseLoader.js\n\n}");

/***/ }),

/***/ "./global/collections/scripts/libraries/js/BaseSystem.js":
/*!***************************************************************!*\
  !*** ./global/collections/scripts/libraries/js/BaseSystem.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseSystem: () => (/* binding */ BaseSystem),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nclass BaseSystem {\n  constructor(game) {\n    this.game = game;\n    this.engine = game.app;\n    this.enabled = true;\n    this.enums = this.game.getEnums();\n    this.collections = this.game.getCollections();\n    this.reverseEnums = this.game.getReverseEnums();\n  }\n\n  /**\r\n   * Called after all systems are initialized\r\n   */\n  postAllInit() {}\n\n  /**\r\n   * Called when a scene is loaded\r\n   * @param {Object} sceneData - The scene configuration data\r\n   */\n  onSceneLoad(sceneData) {}\n\n  /**\r\n   * Called when a scene is unloaded\r\n   */\n  onSceneUnload() {}\n\n  /**\r\n   * Check if this system is required for a given scene\r\n   * Override in subclasses to make systems optional based on scene config\r\n   * @param {Object} sceneData - The scene configuration data\r\n   * @returns {boolean} True if this system should be enabled for this scene\r\n   */\n  isRequiredForScene(sceneData) {\n    // If scene specifies systems, check if this system is in the list\n    if (sceneData?.systems && Array.isArray(sceneData.systems)) {\n      return sceneData.systems.includes(this.constructor.name);\n    }\n    // Default: always required\n    return true;\n  }\n  update() {}\n  render() {}\n}\n\n// Assign to global.GUTS for server\n// Static property that subclasses can override to define services to register\n// Format: ['methodName1', 'methodName2', ...]\n// Each method will be auto-registered as game.register('methodName', this.methodName.bind(this))\n_defineProperty(BaseSystem, \"services\", []);\nif (typeof __webpack_require__.g !== 'undefined' && __webpack_require__.g.GUTS) {\n  __webpack_require__.g.GUTS.BaseSystem = BaseSystem;\n}\n\n// ES6 exports for webpack bundling\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BaseSystem);\n\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.BaseSystem = BaseSystem;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZVN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU1BLFVBQVUsQ0FBQztFQU1iQyxXQUFXQSxDQUFDQyxJQUFJLEVBQUU7SUFDZCxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSTtJQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBR0QsSUFBSSxDQUFDRSxHQUFHO0lBQ3RCLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUk7SUFDbkIsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSSxDQUFDSixJQUFJLENBQUNLLFFBQVEsQ0FBQyxDQUFDO0lBQ2pDLElBQUksQ0FBQ0MsV0FBVyxHQUFHLElBQUksQ0FBQ04sSUFBSSxDQUFDTyxjQUFjLENBQUMsQ0FBQztJQUM3QyxJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJLENBQUNSLElBQUksQ0FBQ1MsZUFBZSxDQUFDLENBQUM7RUFDbkQ7O0VBRUE7QUFDSjtBQUNBO0VBQ0lDLFdBQVdBLENBQUEsRUFBRyxDQUVkOztFQUVBO0FBQ0o7QUFDQTtBQUNBO0VBQ0lDLFdBQVdBLENBQUNDLFNBQVMsRUFBRSxDQUV2Qjs7RUFFQTtBQUNKO0FBQ0E7RUFDSUMsYUFBYUEsQ0FBQSxFQUFHLENBRWhCOztFQUVBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxrQkFBa0JBLENBQUNGLFNBQVMsRUFBRTtJQUMxQjtJQUNBLElBQUlBLFNBQVMsRUFBRUcsT0FBTyxJQUFJQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0wsU0FBUyxDQUFDRyxPQUFPLENBQUMsRUFBRTtNQUN4RCxPQUFPSCxTQUFTLENBQUNHLE9BQU8sQ0FBQ0csUUFBUSxDQUFDLElBQUksQ0FBQ25CLFdBQVcsQ0FBQ29CLElBQUksQ0FBQztJQUM1RDtJQUNBO0lBQ0EsT0FBTyxJQUFJO0VBQ2Y7RUFFQUMsTUFBTUEsQ0FBQSxFQUFFLENBRVI7RUFFQUMsTUFBTUEsQ0FBQSxFQUFHLENBRVQ7QUFFSjs7QUFHQTtBQTlESTtBQUNBO0FBQ0E7QUFBQUMsZUFBQSxDQUhFeEIsVUFBVSxjQUlNLEVBQUU7QUE0RHhCLElBQUksT0FBT3lCLHFCQUFNLEtBQUssV0FBVyxJQUFJQSxxQkFBTSxDQUFDQyxJQUFJLEVBQUU7RUFDOUNELHFCQUFNLENBQUNDLElBQUksQ0FBQzFCLFVBQVUsR0FBR0EsVUFBVTtBQUN2Qzs7QUFFQTtBQUNBLGlFQUFlQSxVQUFVLEVBQUM7QUFDSjs7QUFFdEI7QUFDQSxJQUFJLE9BQU8yQixNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNELElBQUksRUFBRTtFQUNoREMsTUFBTSxDQUFDRCxJQUFJLENBQUMxQixVQUFVLEdBQUdBLFVBQVU7QUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3dlcmRlZmVuc2UvLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvQmFzZVN5c3RlbS5qcz9mMDBmIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEJhc2VTeXN0ZW0ge1xyXG4gICAgLy8gU3RhdGljIHByb3BlcnR5IHRoYXQgc3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdG8gZGVmaW5lIHNlcnZpY2VzIHRvIHJlZ2lzdGVyXHJcbiAgICAvLyBGb3JtYXQ6IFsnbWV0aG9kTmFtZTEnLCAnbWV0aG9kTmFtZTInLCAuLi5dXHJcbiAgICAvLyBFYWNoIG1ldGhvZCB3aWxsIGJlIGF1dG8tcmVnaXN0ZXJlZCBhcyBnYW1lLnJlZ2lzdGVyKCdtZXRob2ROYW1lJywgdGhpcy5tZXRob2ROYW1lLmJpbmQodGhpcykpXHJcbiAgICBzdGF0aWMgc2VydmljZXMgPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcclxuICAgICAgICB0aGlzLmVuZ2luZSA9IGdhbWUuYXBwO1xyXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lbnVtcyA9IHRoaXMuZ2FtZS5nZXRFbnVtcygpO1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSB0aGlzLmdhbWUuZ2V0Q29sbGVjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnJldmVyc2VFbnVtcyA9IHRoaXMuZ2FtZS5nZXRSZXZlcnNlRW51bXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBhZnRlciBhbGwgc3lzdGVtcyBhcmUgaW5pdGlhbGl6ZWRcclxuICAgICAqL1xyXG4gICAgcG9zdEFsbEluaXQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gYSBzY2VuZSBpcyBsb2FkZWRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzY2VuZURhdGEgLSBUaGUgc2NlbmUgY29uZmlndXJhdGlvbiBkYXRhXHJcbiAgICAgKi9cclxuICAgIG9uU2NlbmVMb2FkKHNjZW5lRGF0YSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB3aGVuIGEgc2NlbmUgaXMgdW5sb2FkZWRcclxuICAgICAqL1xyXG4gICAgb25TY2VuZVVubG9hZCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiB0aGlzIHN5c3RlbSBpcyByZXF1aXJlZCBmb3IgYSBnaXZlbiBzY2VuZVxyXG4gICAgICogT3ZlcnJpZGUgaW4gc3ViY2xhc3NlcyB0byBtYWtlIHN5c3RlbXMgb3B0aW9uYWwgYmFzZWQgb24gc2NlbmUgY29uZmlnXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NlbmVEYXRhIC0gVGhlIHNjZW5lIGNvbmZpZ3VyYXRpb24gZGF0YVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhpcyBzeXN0ZW0gc2hvdWxkIGJlIGVuYWJsZWQgZm9yIHRoaXMgc2NlbmVcclxuICAgICAqL1xyXG4gICAgaXNSZXF1aXJlZEZvclNjZW5lKHNjZW5lRGF0YSkge1xyXG4gICAgICAgIC8vIElmIHNjZW5lIHNwZWNpZmllcyBzeXN0ZW1zLCBjaGVjayBpZiB0aGlzIHN5c3RlbSBpcyBpbiB0aGUgbGlzdFxyXG4gICAgICAgIGlmIChzY2VuZURhdGE/LnN5c3RlbXMgJiYgQXJyYXkuaXNBcnJheShzY2VuZURhdGEuc3lzdGVtcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNjZW5lRGF0YS5zeXN0ZW1zLmluY2x1ZGVzKHRoaXMuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERlZmF1bHQ6IGFsd2F5cyByZXF1aXJlZFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpe1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbi8vIEFzc2lnbiB0byBnbG9iYWwuR1VUUyBmb3Igc2VydmVyXHJcbmlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuR1VUUykge1xyXG4gICAgZ2xvYmFsLkdVVFMuQmFzZVN5c3RlbSA9IEJhc2VTeXN0ZW07XHJcbn1cclxuXHJcbi8vIEVTNiBleHBvcnRzIGZvciB3ZWJwYWNrIGJ1bmRsaW5nXHJcbmV4cG9ydCBkZWZhdWx0IEJhc2VTeXN0ZW07XHJcbmV4cG9ydCB7IEJhc2VTeXN0ZW0gfTtcblxuLy8gQXV0by1nZW5lcmF0ZWQgZXhwb3J0c1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5HVVRTKSB7XG4gIHdpbmRvdy5HVVRTLkJhc2VTeXN0ZW0gPSBCYXNlU3lzdGVtO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImdhbWUiLCJlbmdpbmUiLCJhcHAiLCJlbmFibGVkIiwiZW51bXMiLCJnZXRFbnVtcyIsImNvbGxlY3Rpb25zIiwiZ2V0Q29sbGVjdGlvbnMiLCJyZXZlcnNlRW51bXMiLCJnZXRSZXZlcnNlRW51bXMiLCJwb3N0QWxsSW5pdCIsIm9uU2NlbmVMb2FkIiwic2NlbmVEYXRhIiwib25TY2VuZVVubG9hZCIsImlzUmVxdWlyZWRGb3JTY2VuZSIsInN5c3RlbXMiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsIm5hbWUiLCJ1cGRhdGUiLCJyZW5kZXIiLCJfZGVmaW5lUHJvcGVydHkiLCJnbG9iYWwiLCJHVVRTIiwid2luZG93Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./global/collections/scripts/libraries/js/BaseSystem.js\n\n}");

/***/ }),

/***/ "./global/collections/scripts/libraries/js/SceneManager.js":
/*!*****************************************************************!*\
  !*** ./global/collections/scripts/libraries/js/SceneManager.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneManager: () => (/* binding */ SceneManager),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\r\n * SceneManager - Handles loading, switching, and managing game scenes\r\n * Scenes define which systems to run and which entities to spawn\r\n */\nclass SceneManager {\n  constructor(game) {\n    this.game = game;\n    this.currentScene = null;\n    this.currentSceneName = null;\n    this.spawnedEntityIds = new Set();\n  }\n\n  /**\r\n   * Load a scene by name\r\n   * @param {string} sceneName - The name of the scene to load (from scenes collection)\r\n   * @returns {Promise<void>}\r\n   */\n  async loadScene(sceneName) {\n    const collections = this.game.getCollections();\n    const sceneData = collections.scenes?.[sceneName];\n    if (!sceneData) {\n      return;\n    }\n\n    // Get systems needed by new scene for smart cleanup\n    // Include base systems + environment-specific systems\n    const isServer = !!this.game.isServer;\n    const baseSystems = sceneData.systems || [];\n    const environmentSystems = isServer ? sceneData.serverSystems || [] : sceneData.clientSystems || [];\n    const newSceneSystems = new Set([...baseSystems, ...environmentSystems]);\n\n    // Unload current scene if one is loaded\n    if (this.currentScene) {\n      await this.unloadCurrentScene(newSceneSystems);\n    }\n    this.currentScene = sceneData;\n    this.currentSceneName = sceneName;\n\n    // Enable/disable systems based on scene configuration\n    this.configureSystems(sceneData);\n\n    // Check if we're loading from a save file\n    const isLoadingSave = !!this.game.pendingSaveData;\n    console.log(`[SceneManager] Loading scene: ${sceneName}, isLoadingSave: ${isLoadingSave}, hasSaveData: ${!!this.game.pendingSaveData}, hasSaveSystem: ${!!this.game.saveSystem}, isServer: ${!!this.game.isServer}`);\n    if (this.game.pendingSaveData) {\n      console.log(`[SceneManager] pendingSaveData has ${this.game.pendingSaveData.entities?.length || 0} entities`);\n    }\n\n    // Set flag so systems know not to spawn starting entities\n    if (isLoadingSave) {\n      this.game.state.isLoadingSave = true;\n    }\n\n    // Spawn entities from scene definition (skip if loading save - save has all entities)\n    if (!isLoadingSave) {\n      await this.spawnSceneEntities(sceneData);\n    } else {\n      console.log(`[SceneManager] Skipping scene entities - loading from save`);\n    }\n\n    // Inject saved entities if there's pending save data\n    if (isLoadingSave) {\n      console.log('[SceneManager] Calling saveSystem.loadSavedEntities(), saveSystem:', this.game.saveSystem ? 'exists' : 'null');\n      if (this.game.saveSystem) {\n        this.game.saveSystem.loadSavedEntities();\n      } else {\n        console.error('[SceneManager] SaveSystem not available but pendingSaveData exists!');\n      }\n    }\n\n    // Notify all systems that scene has loaded (initial setup)\n    await this.notifySceneLoaded(sceneData);\n\n    // Notify all systems for post-load processing (after all systems have done initial setup)\n    this.notifyPostSceneLoad(sceneData);\n  }\n\n  /**\r\n   * Switch to a different scene\r\n   * @param {string} sceneName - The name of the scene to switch to\r\n   * @returns {Promise<void>}\r\n   */\n  async switchScene(sceneName) {\n    await this.loadScene(sceneName);\n  }\n\n  /**\r\n   * Unload the current scene\r\n   * @param {Set<string>} [keepSystems] - System names to keep (needed by next scene)\r\n   * @returns {Promise<void>}\r\n   */\n  async unloadCurrentScene(keepSystems = new Set()) {\n    if (!this.currentScene) return;\n\n    // Clear isLoadingSave flag but preserve pendingSaveData for the next scene\n    this.game.state.isLoadingSave = false;\n    // Note: Don't clear pendingSaveData here - it may be needed for the incoming scene\n\n    // Notify systems that are being unloaded (not kept)\n    this.notifySceneUnloading(keepSystems);\n\n    // Destroy ALL entities - not just scene-spawned ones\n    // This includes dynamically created entities (units, projectiles, etc.)\n    const allEntityIds = this.game.getAllEntities();\n    for (const entityId of allEntityIds) {\n      this.game.destroyEntity(entityId);\n    }\n    this.spawnedEntityIds.clear();\n\n    // Reset entity ID counter so new scene starts fresh\n    this.game.nextEntityId = 1;\n\n    // Destroy systems that are NOT needed by the new scene\n    this.destroyUnneededSystems(keepSystems);\n    this.currentScene = null;\n    this.currentSceneName = null;\n  }\n\n  /**\r\n   * Destroy enabled systems that are not needed by the next scene\r\n   * @param {Set<string>} keepSystems - System names to keep\r\n   */\n  destroyUnneededSystems(keepSystems) {\n    const systemsToRemove = [];\n    for (const system of this.game.systems) {\n      if (system.enabled) {\n        const systemName = system.constructor.name;\n\n        // Skip systems that are needed in the next scene\n        if (keepSystems.has(systemName)) {\n          continue;\n        }\n\n        // Call dispose if available\n        if (system.dispose) {\n          system.dispose();\n        }\n        systemsToRemove.push({\n          system,\n          systemName\n        });\n      }\n    }\n\n    // Remove destroyed systems from arrays and maps\n    for (const {\n      system,\n      systemName\n    } of systemsToRemove) {\n      const index = this.game.systems.indexOf(system);\n      if (index > -1) {\n        this.game.systems.splice(index, 1);\n      }\n      this.game.systemsByName.delete(systemName);\n\n      // Reset the postAllInit flag so it can be called again when reinstantiated\n      system._postAllInitCalled = false;\n    }\n  }\n\n  /**\r\n   * Configure which systems are enabled based on scene configuration\r\n   * Uses lazy instantiation - only creates systems when a scene needs them\r\n   * Supports clientSystems and serverSystems for environment-specific systems\r\n   * @param {Object} sceneData - The scene configuration\r\n   */\n  configureSystems(sceneData) {\n    // Base systems shared by client and server\n    const baseSystems = sceneData.systems || [];\n\n    // Environment-specific systems\n    const isServer = !!this.game.isServer;\n    const environmentSystems = isServer ? sceneData.serverSystems || [] : sceneData.clientSystems || [];\n\n    // Combine base + environment-specific systems\n    const sceneSystems = [...baseSystems, ...environmentSystems];\n\n    // Disable all currently active systems first\n    for (const system of this.game.systems) {\n      system.enabled = false;\n    }\n\n    // Lazily instantiate and enable systems required by this scene\n    for (const systemName of sceneSystems) {\n      const system = this.game.getOrCreateSystem(systemName);\n      if (system) {\n        system.enabled = true;\n      }\n    }\n\n    // Call postAllInit on any newly created systems\n    // (systems that were just instantiated need this called)\n    for (const systemName of sceneSystems) {\n      const system = this.game.systemsByName.get(systemName);\n      if (system && system.postAllInit && !system._postAllInitCalled) {\n        system.postAllInit();\n        system._postAllInitCalled = true;\n      }\n    }\n  }\n\n  /**\r\n   * Spawn all entities defined in the scene (deprecated - entities should be in level data)\r\n   * Only supports type prefab format: { prefab: \"unit\", type: \"dragon_red\", components: {...} }\r\n   * @param {Object} sceneData - The scene configuration\r\n   * @returns {Promise<void>}\r\n   */\n  async spawnSceneEntities(sceneData) {\n    const entities = sceneData.entities || [];\n    if (entities.length === 0) return;\n    const collections = this.game.getCollections();\n    const prefabs = collections.prefabs || {};\n    const enums = this.game.call?.('getEnums');\n    for (const entityDef of entities) {\n      if (!entityDef.prefab || !entityDef.type) {\n        console.warn(`[SceneManager] Entity missing prefab or type:`, entityDef);\n        continue;\n      }\n      const prefabData = prefabs[entityDef.prefab];\n      if (!prefabData) {\n        console.warn(`[SceneManager] Prefab '${entityDef.prefab}' not found`);\n        continue;\n      }\n      const collection = prefabData.collection;\n      if (!collection) {\n        console.warn(`[SceneManager] Prefab '${entityDef.prefab}' missing collection`);\n        continue;\n      }\n\n      // Get team from components or default to neutral\n      const team = entityDef.components?.team?.team ?? enums?.team?.neutral ?? 0;\n\n      // Use createEntityFromPrefab service\n      if (this.game.hasService?.('createEntityFromPrefab')) {\n        const createdId = this.game.call('createEntityFromPrefab', {\n          prefab: entityDef.prefab,\n          type: entityDef.type,\n          collection: collection,\n          team: team,\n          componentOverrides: entityDef.components || {}\n        });\n        if (createdId) {\n          this.spawnedEntityIds.add(createdId);\n        }\n      } else {\n        console.warn(`[SceneManager] createEntityFromPrefab service not available`);\n      }\n    }\n  }\n\n  /**\r\n   * Notify all systems that a scene has been loaded\r\n   * @param {Object} sceneData - The scene configuration\r\n   */\n  async notifySceneLoaded(sceneData) {\n    for (const system of this.game.systems) {\n      if (system.enabled && system.onSceneLoad) {\n        await system.onSceneLoad(sceneData);\n      }\n    }\n  }\n\n  /**\r\n   * Notify all systems after scene load is complete\r\n   * This runs after all systems have done their initial onSceneLoad setup\r\n   * @param {Object} sceneData - The scene configuration\r\n   */\n  notifyPostSceneLoad(sceneData) {\n    for (const system of this.game.systems) {\n      if (system.enabled && system.postSceneLoad) {\n        system.postSceneLoad(sceneData);\n      }\n    }\n  }\n\n  /**\r\n   * Notify systems that the scene is being unloaded\r\n   * Only notifies systems that are being destroyed (not kept for next scene)\r\n   * @param {Set<string>} [keepSystems] - System names that will be kept\r\n   */\n  notifySceneUnloading(keepSystems = new Set()) {\n    for (const system of this.game.systems) {\n      if (system.enabled && system.onSceneUnload) {\n        const systemName = system.constructor.name;\n        // Only call onSceneUnload for systems being destroyed\n        if (!keepSystems.has(systemName)) {\n          system.onSceneUnload();\n        }\n      }\n    }\n  }\n\n  /**\r\n   * Get the current scene data\r\n   * @returns {Object|null} Current scene data or null\r\n   */\n  getCurrentScene() {\n    return this.currentScene;\n  }\n\n  /**\r\n   * Get the current scene name\r\n   * @returns {string|null} Current scene name or null\r\n   */\n  getCurrentSceneName() {\n    return this.currentSceneName;\n  }\n\n  /**\r\n   * Check if a scene is currently loaded\r\n   * @returns {boolean} True if a scene is loaded\r\n   */\n  hasLoadedScene() {\n    return this.currentScene !== null;\n  }\n\n  /**\r\n   * Get list of all available scenes\r\n   * @returns {string[]} Array of scene names\r\n   */\n  getAvailableScenes() {\n    const collections = this.game.getCollections();\n    return Object.keys(collections.scenes || {});\n  }\n}\n\n// ES6 exports for webpack bundling\n// The class-export-loader will automatically add window.GUTS.SceneManager assignment\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SceneManager);\n\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.SceneManager = SceneManager;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nbG9iYWwvY29sbGVjdGlvbnMvc2NyaXB0cy9saWJyYXJpZXMvanMvU2NlbmVNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxZQUFZLENBQUM7RUFDZkMsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFO0lBQ2QsSUFBSSxDQUFDQSxJQUFJLEdBQUdBLElBQUk7SUFDaEIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSTtJQUN4QixJQUFJLENBQUNDLGdCQUFnQixHQUFHLElBQUk7SUFDNUIsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztFQUNyQzs7RUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsU0FBU0EsQ0FBQ0MsU0FBUyxFQUFFO0lBQ3ZCLE1BQU1DLFdBQVcsR0FBRyxJQUFJLENBQUNQLElBQUksQ0FBQ1EsY0FBYyxDQUFDLENBQUM7SUFDOUMsTUFBTUMsU0FBUyxHQUFHRixXQUFXLENBQUNHLE1BQU0sR0FBR0osU0FBUyxDQUFDO0lBRWpELElBQUksQ0FBQ0csU0FBUyxFQUFFO01BQ1o7SUFDSjs7SUFFQTtJQUNBO0lBQ0EsTUFBTUUsUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUNYLElBQUksQ0FBQ1csUUFBUTtJQUNyQyxNQUFNQyxXQUFXLEdBQUdILFNBQVMsQ0FBQ0ksT0FBTyxJQUFJLEVBQUU7SUFDM0MsTUFBTUMsa0JBQWtCLEdBQUdILFFBQVEsR0FDNUJGLFNBQVMsQ0FBQ00sYUFBYSxJQUFJLEVBQUUsR0FDN0JOLFNBQVMsQ0FBQ08sYUFBYSxJQUFJLEVBQUc7SUFDckMsTUFBTUMsZUFBZSxHQUFHLElBQUliLEdBQUcsQ0FBQyxDQUFDLEdBQUdRLFdBQVcsRUFBRSxHQUFHRSxrQkFBa0IsQ0FBQyxDQUFDOztJQUV4RTtJQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEVBQUU7TUFDbkIsTUFBTSxJQUFJLENBQUNpQixrQkFBa0IsQ0FBQ0Qs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Q0EsaUVBQWVaLFlBQVksRUFBQztBQUNKOztBQUV4QjtBQUNBLElBQUksT0FBT3dGLE1BQU0sS0FBSyxXQUFXLElBQUlBLE1BQU0sQ0FBQ0MsSUFBSSxFQUFFO0VBQ2hERCxNQUFNLENBQUNDLElBQUksQ0FBQ3pGLFlBQVksR0FBR0EsWUFBWTtBQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Rvd2VyZGVmZW5zZS8uL2dsb2JhbC9jb2xsZWN0aW9ucy9zY3JpcHRzL2xpYnJhcmllcy9qcy9TY2VuZU1hbmFnZXIuanM/NjQ4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU2NlbmVNYW5hZ2VyIC0gSGFuZGxlcyBsb2FkaW5nLCBzd2l0Y2hpbmcsIGFuZCBtYW5hZ2luZyBnYW1lIHNjZW5lc1xyXG4gKiBTY2VuZXMgZGVmaW5lIHdoaWNoIHN5c3RlbXMgdG8gcnVuIGFuZCB3aGljaCBlbnRpdGllcyB0byBzcGF3blxyXG4gKi9cclxuY2xhc3MgU2NlbmVNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNjZW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTY2VuZU5hbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3Bhd25lZEVudGl0eUlkcyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgYSBzY2VuZSBieSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2NlbmVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNjZW5lIHRvIGxvYWQgKGZyb20gc2NlbmVzIGNvbGxlY3Rpb24pXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZFNjZW5lKHNjZW5lTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gdGhpcy5nYW1lLmdldENvbGxlY3Rpb25zKCk7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVEYXRhID0gY29sbGVjdGlvbnMuc2NlbmVzPy5bc2NlbmVOYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKCFzY2VuZURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IHN5c3RlbXMgbmVlZGVkIGJ5IG5ldyBzY2VuZSBmb3Igc21hcnQgY2xlYW51cFxyXG4gICAgICAgIC8vIEluY2x1ZGUgYmFzZSBzeXN0ZW1zICsgZW52aXJvbm1lbnQtc3BlY2lmaWMgc3lzdGVtc1xyXG4gICAgICAgIGNvbnN0IGlzU2VydmVyID0gISF0aGlzLmdhbWUuaXNTZXJ2ZXI7XHJcbiAgICAgICAgY29uc3QgYmFzZVN5c3RlbXMgPSBzY2VuZURhdGEuc3lzdGVtcyB8fCBbXTtcclxuICAgICAgICBjb25zdCBlbnZpcm9ubWVudFN5c3RlbXMgPSBpc1NlcnZlclxyXG4gICAgICAgICAgICA/IChzY2VuZURhdGEuc2VydmVyU3lzdGVtcyB8fCBbXSlcclxuICAgICAgICAgICAgOiAoc2NlbmVEYXRhLmNsaWVudFN5c3RlbXMgfHwgW10pO1xyXG4gICAgICAgIGNvbnN0IG5ld1NjZW5lU3lzdGVtcyA9IG5ldyBTZXQoWy4uLmJhc2VTeXN0ZW1zLCAuLi5lbnZpcm9ubWVudFN5c3RlbXNdKTtcclxuXHJcbiAgICAgICAgLy8gVW5sb2FkIGN1cnJlbnQgc2NlbmUgaWYgb25lIGlzIGxvYWRlZFxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTY2VuZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVubG9hZEN1cnJlbnRTY2VuZShuZXdTY2VuZVN5c3RlbXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2NlbmUgPSBzY2VuZURhdGE7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2NlbmVOYW1lID0gc2NlbmVOYW1lO1xyXG5cclxuICAgICAgICAvLyBFbmFibGUvZGlzYWJsZSBzeXN0ZW1zIGJhc2VkIG9uIHNjZW5lIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZVN5c3RlbXMoc2NlbmVEYXRhKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgbG9hZGluZyBmcm9tIGEgc2F2ZSBmaWxlXHJcbiAgICAgICAgY29uc3QgaXNMb2FkaW5nU2F2ZSA9ICEhdGhpcy5nYW1lLnBlbmRpbmdTYXZlRGF0YTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYFtTY2VuZU1hbmFnZXJdIExvYWRpbmcgc2NlbmU6ICR7c2NlbmVOYW1lfSwgaXNMb2FkaW5nU2F2ZTogJHtpc0xvYWRpbmdTYXZlfSwgaGFzU2F2ZURhdGE6ICR7ISF0aGlzLmdhbWUucGVuZGluZ1NhdmVEYXRhfSwgaGFzU2F2ZVN5c3RlbTogJHshIXRoaXMuZ2FtZS5zYXZlU3lzdGVtfSwgaXNTZXJ2ZXI6ICR7ISF0aGlzLmdhbWUuaXNTZXJ2ZXJ9YCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5wZW5kaW5nU2F2ZURhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTY2VuZU1hbmFnZXJdIHBlbmRpbmdTYXZlRGF0YSBoYXMgJHt0aGlzLmdhbWUucGVuZGluZ1NhdmVEYXRhLmVudGl0aWVzPy5sZW5ndGggfHwgMH0gZW50aXRpZXNgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCBmbGFnIHNvIHN5c3RlbXMga25vdyBub3QgdG8gc3Bhd24gc3RhcnRpbmcgZW50aXRpZXNcclxuICAgICAgICBpZiAoaXNMb2FkaW5nU2F2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuaXNMb2FkaW5nU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTcGF3biBlbnRpdGllcyBmcm9tIHNjZW5lIGRlZmluaXRpb24gKHNraXAgaWYgbG9hZGluZyBzYXZlIC0gc2F2ZSBoYXMgYWxsIGVudGl0aWVzKVxyXG4gICAgICAgIGlmICghaXNMb2FkaW5nU2F2ZSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNwYXduU2NlbmVFbnRpdGllcyhzY2VuZURhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU2NlbmVNYW5hZ2VyXSBTa2lwcGluZyBzY2VuZSBlbnRpdGllcyAtIGxvYWRpbmcgZnJvbSBzYXZlYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbmplY3Qgc2F2ZWQgZW50aXRpZXMgaWYgdGhlcmUncyBwZW5kaW5nIHNhdmUgZGF0YVxyXG4gICAgICAgIGlmIChpc0xvYWRpbmdTYXZlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2NlbmVNYW5hZ2VyXSBDYWxsaW5nIHNhdmVTeXN0ZW0ubG9hZFNhdmVkRW50aXRpZXMoKSwgc2F2ZVN5c3RlbTonLCB0aGlzLmdhbWUuc2F2ZVN5c3RlbSA/ICdleGlzdHMnIDogJ251bGwnKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5zYXZlU3lzdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc2F2ZVN5c3RlbS5sb2FkU2F2ZWRFbnRpdGllcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NjZW5lTWFuYWdlcl0gU2F2ZVN5c3RlbSBub3QgYXZhaWxhYmxlIGJ1dCBwZW5kaW5nU2F2ZURhdGEgZXhpc3RzIScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOb3RpZnkgYWxsIHN5c3RlbXMgdGhhdCBzY2VuZSBoYXMgbG9hZGVkIChpbml0aWFsIHNldHVwKVxyXG4gICAgICAgIGF3YWl0IHRoaXMubm90aWZ5U2NlbmVMb2FkZWQoc2NlbmVEYXRhKTtcclxuXHJcbiAgICAgICAgLy8gTm90aWZ5IGFsbCBzeXN0ZW1zIGZvciBwb3N0LWxvYWQgcHJvY2Vzc2luZyAoYWZ0ZXIgYWxsIHN5c3RlbXMgaGF2ZSBkb25lIGluaXRpYWwgc2V0dXApXHJcbiAgICAgICAgdGhpcy5ub3RpZnlQb3N0U2NlbmVMb2FkKHNjZW5lRGF0YSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dpdGNoIHRvIGEgZGlmZmVyZW50IHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2NlbmVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNjZW5lIHRvIHN3aXRjaCB0b1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHN3aXRjaFNjZW5lKHNjZW5lTmFtZSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNjZW5lKHNjZW5lTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbmxvYWQgdGhlIGN1cnJlbnQgc2NlbmVcclxuICAgICAqIEBwYXJhbSB7U2V0PHN0cmluZz59IFtrZWVwU3lzdGVtc10gLSBTeXN0ZW0gbmFtZXMgdG8ga2VlcCAobmVlZGVkIGJ5IG5leHQgc2NlbmUpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdW5sb2FkQ3VycmVudFNjZW5lKGtlZXBTeXN0ZW1zID0gbmV3IFNldCgpKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTY2VuZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBDbGVhciBpc0xvYWRpbmdTYXZlIGZsYWcgYnV0IHByZXNlcnZlIHBlbmRpbmdTYXZlRGF0YSBmb3IgdGhlIG5leHQgc2NlbmVcclxuICAgICAgICB0aGlzLmdhbWUuc3RhdGUuaXNMb2FkaW5nU2F2ZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNsZWFyIHBlbmRpbmdTYXZlRGF0YSBoZXJlIC0gaXQgbWF5IGJlIG5lZWRlZCBmb3IgdGhlIGluY29taW5nIHNjZW5lXHJcblxyXG4gICAgICAgIC8vIE5vdGlmeSBzeXN0ZW1zIHRoYXQgYXJlIGJlaW5nIHVubG9hZGVkIChub3Qga2VwdClcclxuICAgICAgICB0aGlzLm5vdGlmeVNjZW5lVW5sb2FkaW5nKGtlZXBTeXN0ZW1zKTtcclxuXHJcbiAgICAgICAgLy8gRGVzdHJveSBBTEwgZW50aXRpZXMgLSBub3QganVzdCBzY2VuZS1zcGF3bmVkIG9uZXNcclxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIGR5bmFtaWNhbGx5IGNyZWF0ZWQgZW50aXRpZXMgKHVuaXRzLCBwcm9qZWN0aWxlcywgZXRjLilcclxuICAgICAgICBjb25zdCBhbGxFbnRpdHlJZHMgPSB0aGlzLmdhbWUuZ2V0QWxsRW50aXRpZXMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGFsbEVudGl0eUlkcykge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuZGVzdHJveUVudGl0eShlbnRpdHlJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3Bhd25lZEVudGl0eUlkcy5jbGVhcigpO1xyXG5cclxuICAgICAgICAvLyBSZXNldCBlbnRpdHkgSUQgY291bnRlciBzbyBuZXcgc2NlbmUgc3RhcnRzIGZyZXNoXHJcbiAgICAgICAgdGhpcy5nYW1lLm5leHRFbnRpdHlJZCA9IDE7XHJcblxyXG4gICAgICAgIC8vIERlc3Ryb3kgc3lzdGVtcyB0aGF0IGFyZSBOT1QgbmVlZGVkIGJ5IHRoZSBuZXcgc2NlbmVcclxuICAgICAgICB0aGlzLmRlc3Ryb3lVbm5lZWRlZFN5c3RlbXMoa2VlcFN5c3RlbXMpO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRTY2VuZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2NlbmVOYW1lID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlc3Ryb3kgZW5hYmxlZCBzeXN0ZW1zIHRoYXQgYXJlIG5vdCBuZWVkZWQgYnkgdGhlIG5leHQgc2NlbmVcclxuICAgICAqIEBwYXJhbSB7U2V0PHN0cmluZz59IGtlZXBTeXN0ZW1zIC0gU3lzdGVtIG5hbWVzIHRvIGtlZXBcclxuICAgICAqL1xyXG4gICAgZGVzdHJveVVubmVlZGVkU3lzdGVtcyhrZWVwU3lzdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbXNUb1JlbW92ZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHN5c3RlbSBvZiB0aGlzLmdhbWUuc3lzdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN5c3RlbU5hbWUgPSBzeXN0ZW0uY29uc3RydWN0b3IubmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHN5c3RlbXMgdGhhdCBhcmUgbmVlZGVkIGluIHRoZSBuZXh0IHNjZW5lXHJcbiAgICAgICAgICAgICAgICBpZiAoa2VlcFN5c3RlbXMuaGFzKHN5c3RlbU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBkaXNwb3NlIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgaWYgKHN5c3RlbS5kaXNwb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzeXN0ZW1zVG9SZW1vdmUucHVzaCh7IHN5c3RlbSwgc3lzdGVtTmFtZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGRlc3Ryb3llZCBzeXN0ZW1zIGZyb20gYXJyYXlzIGFuZCBtYXBzXHJcbiAgICAgICAgZm9yIChjb25zdCB7IHN5c3RlbSwgc3lzdGVtTmFtZSB9IG9mIHN5c3RlbXNUb1JlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2FtZS5zeXN0ZW1zLmluZGV4T2Yoc3lzdGVtKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5zeXN0ZW1zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5nYW1lLnN5c3RlbXNCeU5hbWUuZGVsZXRlKHN5c3RlbU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHBvc3RBbGxJbml0IGZsYWcgc28gaXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aGVuIHJlaW5zdGFudGlhdGVkXHJcbiAgICAgICAgICAgIHN5c3RlbS5fcG9zdEFsbEluaXRDYWxsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25maWd1cmUgd2hpY2ggc3lzdGVtcyBhcmUgZW5hYmxlZCBiYXNlZCBvbiBzY2VuZSBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBVc2VzIGxhenkgaW5zdGFudGlhdGlvbiAtIG9ubHkgY3JlYXRlcyBzeXN0ZW1zIHdoZW4gYSBzY2VuZSBuZWVkcyB0aGVtXHJcbiAgICAgKiBTdXBwb3J0cyBjbGllbnRTeXN0ZW1zIGFuZCBzZXJ2ZXJTeXN0ZW1zIGZvciBlbnZpcm9ubWVudC1zcGVjaWZpYyBzeXN0ZW1zXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NlbmVEYXRhIC0gVGhlIHNjZW5lIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgY29uZmlndXJlU3lzdGVtcyhzY2VuZURhdGEpIHtcclxuICAgICAgICAvLyBCYXNlIHN5c3RlbXMgc2hhcmVkIGJ5IGNsaWVudCBhbmQgc2VydmVyXHJcbiAgICAgICAgY29uc3QgYmFzZVN5c3RlbXMgPSBzY2VuZURhdGEuc3lzdGVtcyB8fCBbXTtcclxuXHJcbiAgICAgICAgLy8gRW52aXJvbm1lbnQtc3BlY2lmaWMgc3lzdGVtc1xyXG4gICAgICAgIGNvbnN0IGlzU2VydmVyID0gISF0aGlzLmdhbWUuaXNTZXJ2ZXI7XHJcbiAgICAgICAgY29uc3QgZW52aXJvbm1lbnRTeXN0ZW1zID0gaXNTZXJ2ZXJcclxuICAgICAgICAgICAgPyAoc2NlbmVEYXRhLnNlcnZlclN5c3RlbXMgfHwgW10pXHJcbiAgICAgICAgICAgIDogKHNjZW5lRGF0YS5jbGllbnRTeXN0ZW1zIHx8IFtdKTtcclxuXHJcbiAgICAgICAgLy8gQ29tYmluZSBiYXNlICsgZW52aXJvbm1lbnQtc3BlY2lmaWMgc3lzdGVtc1xyXG4gICAgICAgIGNvbnN0IHNjZW5lU3lzdGVtcyA9IFsuLi5iYXNlU3lzdGVtcywgLi4uZW52aXJvbm1lbnRTeXN0ZW1zXTtcclxuXHJcbiAgICAgICAgLy8gRGlzYWJsZSBhbGwgY3VycmVudGx5IGFjdGl2ZSBzeXN0ZW1zIGZpcnN0XHJcbiAgICAgICAgZm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5nYW1lLnN5c3RlbXMpIHtcclxuICAgICAgICAgICAgc3lzdGVtLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExhemlseSBpbnN0YW50aWF0ZSBhbmQgZW5hYmxlIHN5c3RlbXMgcmVxdWlyZWQgYnkgdGhpcyBzY2VuZVxyXG4gICAgICAgIGZvciAoY29uc3Qgc3lzdGVtTmFtZSBvZiBzY2VuZVN5c3RlbXMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtID0gdGhpcy5nYW1lLmdldE9yQ3JlYXRlU3lzdGVtKHN5c3RlbU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW0uZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGwgcG9zdEFsbEluaXQgb24gYW55IG5ld2x5IGNyZWF0ZWQgc3lzdGVtc1xyXG4gICAgICAgIC8vIChzeXN0ZW1zIHRoYXQgd2VyZSBqdXN0IGluc3RhbnRpYXRlZCBuZWVkIHRoaXMgY2FsbGVkKVxyXG4gICAgICAgIGZvciAoY29uc3Qgc3lzdGVtTmFtZSBvZiBzY2VuZVN5c3RlbXMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtID0gdGhpcy5nYW1lLnN5c3RlbXNCeU5hbWUuZ2V0KHN5c3RlbU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtICYmIHN5c3RlbS5wb3N0QWxsSW5pdCAmJiAhc3lzdGVtLl9wb3N0QWxsSW5pdENhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtLnBvc3RBbGxJbml0KCk7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW0uX3Bvc3RBbGxJbml0Q2FsbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNwYXduIGFsbCBlbnRpdGllcyBkZWZpbmVkIGluIHRoZSBzY2VuZSAoZGVwcmVjYXRlZCAtIGVudGl0aWVzIHNob3VsZCBiZSBpbiBsZXZlbCBkYXRhKVxyXG4gICAgICogT25seSBzdXBwb3J0cyB0eXBlIHByZWZhYiBmb3JtYXQ6IHsgcHJlZmFiOiBcInVuaXRcIiwgdHlwZTogXCJkcmFnb25fcmVkXCIsIGNvbXBvbmVudHM6IHsuLi59IH1cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzY2VuZURhdGEgLSBUaGUgc2NlbmUgY29uZmlndXJhdGlvblxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHNwYXduU2NlbmVFbnRpdGllcyhzY2VuZURhdGEpIHtcclxuICAgICAgICBjb25zdCBlbnRpdGllcyA9IHNjZW5lRGF0YS5lbnRpdGllcyB8fCBbXTtcclxuICAgICAgICBpZiAoZW50aXRpZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gdGhpcy5nYW1lLmdldENvbGxlY3Rpb25zKCk7XHJcbiAgICAgICAgY29uc3QgcHJlZmFicyA9IGNvbGxlY3Rpb25zLnByZWZhYnMgfHwge307XHJcbiAgICAgICAgY29uc3QgZW51bXMgPSB0aGlzLmdhbWUuY2FsbD8uKCdnZXRFbnVtcycpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eURlZiBvZiBlbnRpdGllcykge1xyXG4gICAgICAgICAgICBpZiAoIWVudGl0eURlZi5wcmVmYWIgfHwgIWVudGl0eURlZi50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFtTY2VuZU1hbmFnZXJdIEVudGl0eSBtaXNzaW5nIHByZWZhYiBvciB0eXBlOmAsIGVudGl0eURlZik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJlZmFiRGF0YSA9IHByZWZhYnNbZW50aXR5RGVmLnByZWZhYl07XHJcbiAgICAgICAgICAgIGlmICghcHJlZmFiRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbU2NlbmVNYW5hZ2VyXSBQcmVmYWIgJyR7ZW50aXR5RGVmLnByZWZhYn0nIG5vdCBmb3VuZGApO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBwcmVmYWJEYXRhLmNvbGxlY3Rpb247XHJcbiAgICAgICAgICAgIGlmICghY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbU2NlbmVNYW5hZ2VyXSBQcmVmYWIgJyR7ZW50aXR5RGVmLnByZWZhYn0nIG1pc3NpbmcgY29sbGVjdGlvbmApO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEdldCB0ZWFtIGZyb20gY29tcG9uZW50cyBvciBkZWZhdWx0IHRvIG5ldXRyYWxcclxuICAgICAgICAgICAgY29uc3QgdGVhbSA9IGVudGl0eURlZi5jb21wb25lbnRzPy50ZWFtPy50ZWFtID8/IGVudW1zPy50ZWFtPy5uZXV0cmFsID8/IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBVc2UgY3JlYXRlRW50aXR5RnJvbVByZWZhYiBzZXJ2aWNlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWUuaGFzU2VydmljZT8uKCdjcmVhdGVFbnRpdHlGcm9tUHJlZmFiJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWRJZCA9IHRoaXMuZ2FtZS5jYWxsKCdjcmVhdGVFbnRpdHlGcm9tUHJlZmFiJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWZhYjogZW50aXR5RGVmLnByZWZhYixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBlbnRpdHlEZWYudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlYW06IHRlYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50T3ZlcnJpZGVzOiBlbnRpdHlEZWYuY29tcG9uZW50cyB8fCB7fVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0ZWRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25lZEVudGl0eUlkcy5hZGQoY3JlYXRlZElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW1NjZW5lTWFuYWdlcl0gY3JlYXRlRW50aXR5RnJvbVByZWZhYiBzZXJ2aWNlIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vdGlmeSBhbGwgc3lzdGVtcyB0aGF0IGEgc2NlbmUgaGFzIGJlZW4gbG9hZGVkXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NlbmVEYXRhIC0gVGhlIHNjZW5lIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2NlbmVMb2FkZWQoc2NlbmVEYXRhKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5nYW1lLnN5c3RlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHN5c3RlbS5lbmFibGVkICYmIHN5c3RlbS5vblNjZW5lTG9hZCkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3lzdGVtLm9uU2NlbmVMb2FkKHNjZW5lRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RpZnkgYWxsIHN5c3RlbXMgYWZ0ZXIgc2NlbmUgbG9hZCBpcyBjb21wbGV0ZVxyXG4gICAgICogVGhpcyBydW5zIGFmdGVyIGFsbCBzeXN0ZW1zIGhhdmUgZG9uZSB0aGVpciBpbml0aWFsIG9uU2NlbmVMb2FkIHNldHVwXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NlbmVEYXRhIC0gVGhlIHNjZW5lIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgbm90aWZ5UG9zdFNjZW5lTG9hZChzY2VuZURhdGEpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHN5c3RlbSBvZiB0aGlzLmdhbWUuc3lzdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtLmVuYWJsZWQgJiYgc3lzdGVtLnBvc3RTY2VuZUxvYWQpIHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbS5wb3N0U2NlbmVMb2FkKHNjZW5lRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RpZnkgc3lzdGVtcyB0aGF0IHRoZSBzY2VuZSBpcyBiZWluZyB1bmxvYWRlZFxyXG4gICAgICogT25seSBub3RpZmllcyBzeXN0ZW1zIHRoYXQgYXJlIGJlaW5nIGRlc3Ryb3llZCAobm90IGtlcHQgZm9yIG5leHQgc2NlbmUpXHJcbiAgICAgKiBAcGFyYW0ge1NldDxzdHJpbmc+fSBba2VlcFN5c3RlbXNdIC0gU3lzdGVtIG5hbWVzIHRoYXQgd2lsbCBiZSBrZXB0XHJcbiAgICAgKi9cclxuICAgIG5vdGlmeVNjZW5lVW5sb2FkaW5nKGtlZXBTeXN0ZW1zID0gbmV3IFNldCgpKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzeXN0ZW0gb2YgdGhpcy5nYW1lLnN5c3RlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHN5c3RlbS5lbmFibGVkICYmIHN5c3RlbS5vblNjZW5lVW5sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzeXN0ZW1OYW1lID0gc3lzdGVtLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNhbGwgb25TY2VuZVVubG9hZCBmb3Igc3lzdGVtcyBiZWluZyBkZXN0cm95ZWRcclxuICAgICAgICAgICAgICAgIGlmICgha2VlcFN5c3RlbXMuaGFzKHN5c3RlbU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtLm9uU2NlbmVVbmxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBzY2VuZSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IEN1cnJlbnQgc2NlbmUgZGF0YSBvciBudWxsXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRTY2VuZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2NlbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgc2NlbmUgbmFtZVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBDdXJyZW50IHNjZW5lIG5hbWUgb3IgbnVsbFxyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50U2NlbmVOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTY2VuZU5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBhIHNjZW5lIGlzIGN1cnJlbnRseSBsb2FkZWRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGEgc2NlbmUgaXMgbG9hZGVkXHJcbiAgICAgKi9cclxuICAgIGhhc0xvYWRlZFNjZW5lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTY2VuZSAhPT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsaXN0IG9mIGFsbCBhdmFpbGFibGUgc2NlbmVzXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFycmF5IG9mIHNjZW5lIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGdldEF2YWlsYWJsZVNjZW5lcygpIHtcclxuICAgICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IHRoaXMuZ2FtZS5nZXRDb2xsZWN0aW9ucygpO1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb2xsZWN0aW9ucy5zY2VuZXMgfHwge30pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFUzYgZXhwb3J0cyBmb3Igd2VicGFjayBidW5kbGluZ1xyXG4vLyBUaGUgY2xhc3MtZXhwb3J0LWxvYWRlciB3aWxsIGF1dG9tYXRpY2FsbHkgYWRkIHdpbmRvdy5HVVRTLlNjZW5lTWFuYWdlciBhc3NpZ25tZW50XHJcbmV4cG9ydCBkZWZhdWx0IFNjZW5lTWFuYWdlcjtcclxuZXhwb3J0IHsgU2NlbmVNYW5hZ2VyIH07XG5cbi8vIEF1dG8tZ2VuZXJhdGVkIGV4cG9ydHNcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuR1VUUykge1xuICB3aW5kb3cuR1VUUy5TY2VuZU1hbmFnZXIgPSBTY2VuZU1hbmFnZXI7XG59XG4iXSwibmFtZXMiOlsiU2NlbmVNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJnYW1lIiwiY3VycmVudFNjZW5lIiwiY3VycmVudFNjZW5lTmFtZSIsInNwYXduZWRFbnRpdHlJZHMiLCJTZXQiLCJsb2FkU2NlbmUiLCJzY2VuZU5hbWUiLCJjb2xsZWN0aW9ucyIsImdldENvbGxlY3Rpb25zIiwic2NlbmVEYXRhIiwic2NlbmVzIiwiaXNTZXJ2ZXIiLCJiYXNlU3lzdGVtcyIsInN5c3RlbXMiLCJlbnZpcm9ubWVudFN5c3RlbXMiLCJzZXJ2ZXJTeXN0ZW1zIiwiY2xpZW50U3lzdGVtcyIsIm5ld1NjZW5lU3lzdGVtcyIsInVubG9hZEN1cnJlbnRTY2VuZSIsImNvbmZpZ3VyZVN5c3RlbXMiLCJpc0xvYWRpbmdTYXZlIiwicGVuZGluZ1NhdmVEYXRhIiwiY29uc29sZSIsImxvZyIsInNhdmVTeXN0ZW0iLCJlbnRpdGllcyIsImxlbmd0aCIsInN0YXRlIiwic3Bhd25TY2VuZUVudGl0aWVzIiwibG9hZFNhdmVkRW50aXRpZXMiLCJlcnJvciIsIm5vdGlmeVNjZW5lTG9hZGVkIiwibm90aWZ5UG9zdFNjZW5lTG9hZCIsInN3aXRjaFNjZW5lIiwia2VlcFN5c3RlbXMiLCJub3RpZnlTY2VuZVVubG9hZGluZyIsImFsbEVudGl0eUlkcyIsImdldEFsbEVudGl0aWVzIiwiZW50aXR5SWQiLCJkZXN0cm95RW50aXR5IiwiY2xlYXIiLCJuZXh0RW50aXR5SWQiLCJkZXN0cm95VW5uZWVkZWRTeXN0ZW1zIiwic3lzdGVtc1RvUmVtb3ZlIiwic3lzdGVtIiwiZW5hYmxlZCIsInN5c3RlbU5hbWUiLCJuYW1lIiwiaGFzIiwiZGlzcG9zZSIsInB1c2giLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJzeXN0ZW1zQnlOYW1lIiwiZGVsZXRlIiwiX3Bvc3RBbGxJbml0Q2FsbGVkIiwic2NlbmVTeXN0ZW1zIiwiZ2V0T3JDcmVhdGVTeXN0ZW0iLCJnZXQiLCJwb3N0QWxsSW5pdCIsInByZWZhYnMiLCJlbnVtcyIsImNhbGwiLCJlbnRpdHlEZWYiLCJwcmVmYWIiLCJ0eXBlIiwid2FybiIsInByZWZhYkRhdGEiLCJjb2xsZWN0aW9uIiwidGVhbSIsImNvbXBvbmVudHMiLCJuZXV0cmFsIiwiaGFzU2VydmljZSIsImNyZWF0ZWRJZCIsImNvbXBvbmVudE92ZXJyaWRlcyIsImFkZCIsIm9uU2NlbmVMb2FkIiwicG9zdFNjZW5lTG9hZCIsIm9uU2NlbmVVbmxvYWQiLCJnZXRDdXJyZW50U2NlbmUiLCJnZXRDdXJyZW50U2NlbmVOYW1lIiwiaGFzTG9hZGVkU2NlbmUiLCJnZXRBdmFpbGFibGVTY2VuZXMiLCJPYmplY3QiLCJrZXlzIiwid2luZG93IiwiR1VUUyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./global/collections/scripts/libraries/js/SceneManager.js\n\n}");

/***/ }),

/***/ "./projects/HelloWorld/collections/data/scenes/hello.json":
/*!****************************************************************!*\
  !*** ./projects/HelloWorld/collections/data/scenes/hello.json ***!
  \****************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"title":"Hello Scene","systems":["HelloSystem"],"entities":[]}');

/***/ }),

/***/ "./projects/HelloWorld/collections/scripts/systems/data/HelloSystem.json":
/*!*******************************************************************************!*\
  !*** ./projects/HelloWorld/collections/scripts/systems/data/HelloSystem.json ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"title":"HelloSystem","description":"A simple system that displays Hello World"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/scripts/systems/js/HelloSystem.js":
/*!***************************************************************************!*\
  !*** ./projects/HelloWorld/collections/scripts/systems/js/HelloSystem.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HelloSystem: () => (/* binding */ HelloSystem),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass HelloSystem extends GUTS.BaseSystem {\n  constructor(game) {\n    super(game);\n    this.game.helloSystem = this;\n    this.messageDisplayed = false;\n  }\n  init() {\n    // Register any game manager functions here\n  }\n  onSceneLoad(sceneData) {\n    console.log('[HelloSystem] Hello World scene loaded!');\n  }\n  update() {\n    // Called every frame - could animate the message here\n  }\n  onSceneUnload() {\n    // Clean up when scene unloads\n    const overlay = document.getElementById('hello-overlay');\n    if (overlay) {\n      overlay.remove();\n    }\n  }\n}\n\n// Auto-generated exports\nif (typeof window !== 'undefined' && window.GUTS) {\n  window.GUTS.HelloSystem = HelloSystem;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HelloSystem);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wcm9qZWN0cy9IZWxsb1dvcmxkL2NvbGxlY3Rpb25zL3NjcmlwdHMvc3lzdGVtcy9qcy9IZWxsb1N5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLFdBQVcsU0FBU0MsSUFBSSxDQUFDQyxVQUFVLENBQUM7RUFDdENDLFdBQVdBLENBQUNDLElBQUksRUFBRTtJQUNkLEtBQUssQ0FBQ0EsSUFBSSxDQUFDO0lBQ1gsSUFBSSxDQUFDQSxJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJO0lBQzVCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsS0FBSztFQUNqQztFQUVBQyxJQUFJQSxDQUFBLEVBQUc7SUFDSDtFQUFBO0VBR0pDLFdBQVdBLENBQUNDLFNBQVMsRUFBRTtJQUNuQkMsT0FBTyxDQUFDQyxHQUFHLENBQUMseUNBQXlDLENBQUM7RUFFMUQ7RUFFQUMsTUFBTUEsQ0FBQSxFQUFHO0lBQ0w7RUFBQTtFQUdKQyxhQUFhQSxDQUFBLEVBQUc7SUFDWjtJQUNBLE1BQU1DLE9BQU8sR0FBR0MsUUFBUSxDQUFDQyxjQUFjLENBQUMsZUFBZSxDQUFDO0lBQ3hELElBQUlGLE9BQU8sRUFBRTtNQUNUQSxPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0lBQ3BCO0VBQ0o7QUFDSjs7QUFFQTtBQUNBLElBQUksT0FBT0MsTUFBTSxLQUFLLFdBQVcsSUFBSUEsTUFBTSxDQUFDakIsSUFBSSxFQUFFO0VBQ2hEaUIsTUFBTSxDQUFDakIsSUFBSSxDQUFDRCxXQUFXLEdBQUdBLFdBQVc7QUFDdkM7QUFFQSxpRUFBZUEsV0FBVyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG93ZXJkZWZlbnNlLy4vcHJvamVjdHMvSGVsbG9Xb3JsZC9jb2xsZWN0aW9ucy9zY3JpcHRzL3N5c3RlbXMvanMvSGVsbG9TeXN0ZW0uanM/NDlkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBIZWxsb1N5c3RlbSBleHRlbmRzIEdVVFMuQmFzZVN5c3RlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZSk7XHJcbiAgICAgICAgdGhpcy5nYW1lLmhlbGxvU3lzdGVtID0gdGhpcztcclxuICAgICAgICB0aGlzLm1lc3NhZ2VEaXNwbGF5ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIC8vIFJlZ2lzdGVyIGFueSBnYW1lIG1hbmFnZXIgZnVuY3Rpb25zIGhlcmVcclxuICAgIH1cclxuXHJcbiAgICBvblNjZW5lTG9hZChzY2VuZURhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0hlbGxvU3lzdGVtXSBIZWxsbyBXb3JsZCBzY2VuZSBsb2FkZWQhJyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICAvLyBDYWxsZWQgZXZlcnkgZnJhbWUgLSBjb3VsZCBhbmltYXRlIHRoZSBtZXNzYWdlIGhlcmVcclxuICAgIH1cclxuXHJcbiAgICBvblNjZW5lVW5sb2FkKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIHdoZW4gc2NlbmUgdW5sb2Fkc1xyXG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVsbG8tb3ZlcmxheScpO1xyXG4gICAgICAgIGlmIChvdmVybGF5KSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8vIEF1dG8tZ2VuZXJhdGVkIGV4cG9ydHNcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuR1VUUykge1xuICB3aW5kb3cuR1VUUy5IZWxsb1N5c3RlbSA9IEhlbGxvU3lzdGVtO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIZWxsb1N5c3RlbTtcbmV4cG9ydCB7IEhlbGxvU3lzdGVtIH07XG4iXSwibmFtZXMiOlsiSGVsbG9TeXN0ZW0iLCJHVVRTIiwiQmFzZVN5c3RlbSIsImNvbnN0cnVjdG9yIiwiZ2FtZSIsImhlbGxvU3lzdGVtIiwibWVzc2FnZURpc3BsYXllZCIsImluaXQiLCJvblNjZW5lTG9hZCIsInNjZW5lRGF0YSIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGUiLCJvblNjZW5lVW5sb2FkIiwib3ZlcmxheSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmUiLCJ3aW5kb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./projects/HelloWorld/collections/scripts/systems/js/HelloSystem.js\n\n}");

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/configs/game.json":
/*!********************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/configs/game.json ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"title":"Hello World","gridSize":48,"imageSize":128,"is3D":true,"isIsometric":false,"libraries":["BaseECSGame","SceneManager","BaseSystem","BaseLoader"],"systems":["HelloSystem"],"classes":[],"interface":"main","appLibrary":"BaseECSGame","appLoaderLibrary":"BaseLoader","canvasWidth":800,"canvasHeight":600,"initialScene":"hello"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/configs/state.json":
/*!*********************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/configs/state.json ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"isPaused":false};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/data.json":
/*!*********************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/data.json ***!
  \*********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"title":"Data"};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/editor.json":
/*!***********************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/editor.json ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"title":"Editor"};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/libraries.json":
/*!**************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/libraries.json ***!
  \**************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"title":"Libraries"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/scripts.json":
/*!************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/scripts.json ***!
  \************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"title":"Scripts"};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/settings.json":
/*!*************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/settings.json ***!
  \*************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"title":"Settings"};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeCategories/ui.json":
/*!*******************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeCategories/ui.json ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = {"title":"UI"};

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/configs.json":
/*!*************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/configs.json ***!
  \*************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"configs","name":"Configs","singular":"config","objectTypeCategory":"settings"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/editorModules.json":
/*!*******************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/editorModules.json ***!
  \*******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"editorModules","name":"EditorModules","singular":"editorModule","objectTypeCategory":"editor"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/interfaces.json":
/*!****************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/interfaces.json ***!
  \****************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"interfaces","name":"Interfaces","singular":"Interface","objectTypeCategory":"ui"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/libraries.json":
/*!***************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/libraries.json ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"libraries","name":"Libraries","singular":"librarie","objectTypeCategory":"scripts"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/modals.json":
/*!************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/modals.json ***!
  \************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"modals","name":"Modals","singular":"modal","objectTypeCategory":"ui"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeCategories.json":
/*!**************************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeCategories.json ***!
  \**************************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"objectTypeCategories","name":"ObjectTypeCategories","singular":"objectTypeCategorie","objectTypeCategory":"settings"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeDefinitions.json":
/*!***************************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/objectTypeDefinitions.json ***!
  \***************************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"objectTypeDefinitions","name":"ObjectTypeDefinitions","singular":"objectTypeDefinition","objectTypeCategory":"settings"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/scenes.json":
/*!************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/scenes.json ***!
  \************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"scenes","name":"Scenes","singular":"scene","objectTypeCategory":"data"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/systems.json":
/*!*************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/systems.json ***!
  \*************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"systems","name":"Systems","singular":"system","objectTypeCategory":"scripts"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/tests.json":
/*!***********************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/tests.json ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"tests","name":"Tests","singular":"test","objectTypeCategory":"libraries"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/settings/objectTypeDefinitions/themes.json":
/*!************************************************************************************!*\
  !*** ./projects/HelloWorld/collections/settings/objectTypeDefinitions/themes.json ***!
  \************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"themes","name":"Themes","singular":"theme","objectTypeCategory":"editor"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/ui/interfaces/css/main.css":
/*!********************************************************************!*\
  !*** ./projects/HelloWorld/collections/ui/interfaces/css/main.css ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = "body {\r\n    background-color: black;\r\n    color: white;\r\n}\r\n\r\n#appContainer {\r\n    width: 72%;\r\n    height: 48px;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    font-size: 2em;\r\n    position: absolute;\r\n    display: block;\r\n    text-align: center;\r\n}";

/***/ }),

/***/ "./projects/HelloWorld/collections/ui/interfaces/data/main.json":
/*!**********************************************************************!*\
  !*** ./projects/HelloWorld/collections/ui/interfaces/data/main.json ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"title":"Main Interface","modals":[],"fileName":"main"}');

/***/ }),

/***/ "./projects/HelloWorld/collections/ui/interfaces/html/main.html":
/*!**********************************************************************!*\
  !*** ./projects/HelloWorld/collections/ui/interfaces/html/main.html ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = "<div id=\"gameContainer\" class=\"screen active\">\r\n    Hello World!\r\n</div>\r\n";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./build/.temp/HelloWorld/combined-entry.js");
/******/ 	
/******/ })()
;